{"remainingRequest":"/app/app/node_modules/babel-loader/lib/index.js!/app/app/node_modules/ts-loader/index.js??ref--15-2!/app/app/node_modules/eslint-loader/index.js??ref--14-0!/app/app/src/api/Auth.ts","dependencies":[{"path":"/app/app/src/api/Auth.ts","mtime":1648456806745},{"path":"/app/app/babel.config.js","mtime":1643593581402},{"path":"/app/app/node_modules/cache-loader/dist/cjs.js","mtime":1648218240323},{"path":"/app/app/node_modules/babel-loader/lib/index.js","mtime":1648218249787},{"path":"/app/app/node_modules/ts-loader/index.js","mtime":1648218251153},{"path":"/app/app/node_modules/eslint-loader/index.js","mtime":1648218241210}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19hd2FpdGVyIH0gZnJvbSAidHNsaWIiOwovKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzICovCgppbXBvcnQgQ2xpZW50IGZyb20gIkAvYXBpL0NsaWVudCI7CmltcG9ydCB7IGdldEF1dGhUb2tlbkZyb21TdG9yYWdlLCByZW1vdmVBdXRoRGF0YUZyb21TdG9yYWdlLCBzZXRBdXRoRGF0YUZyb21SZXNwb25zZSB9IGZyb20gIkAvdXRpbHMvQXV0aFRva2VuIjsKZXhwb3J0IGNvbnN0IGxvZ2luID0gKGVtYWlsLCBwYXNzd29yZCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7CiAgcmV0dXJuIHlpZWxkIENsaWVudC5wb3N0KCIvYXV0aC9zaWduX2luIiwgewogICAgZW1haWwsCiAgICBwYXNzd29yZAogIH0pLnRoZW4ocmVzID0+IHsKICAgIGNvbnN0IGhlYWRlciA9IHsKICAgICAgImFjY2Vzcy10b2tlbiI6ICIiLAogICAgICAidWlkIjogIiIsCiAgICAgICJjbGllbnQiOiAiIiwKICAgICAgImV4cGlyeSI6ICIiLAogICAgICAiY29udGVudC10eXBlIjogIiIKICAgIH07CiAgICBoZWFkZXJbImFjY2Vzcy10b2tlbiJdID0gcmVzLmhlYWRlcnNbImFjY2Vzcy10b2tlbiJdIHx8ICIiOwogICAgaGVhZGVyWyJ1aWQiXSA9IHJlcy5oZWFkZXJzWyJ1aWQiXSB8fCAiIjsKICAgIGhlYWRlclsiY2xpZW50Il0gPSByZXMuaGVhZGVyc1siY2xpZW50Il0gfHwgIiI7CiAgICBoZWFkZXJbImV4cGlyeSJdID0gcmVzLmhlYWRlcnNbImV4cGlyeSJdIHx8ICIiOwogICAgaGVhZGVyWyJjb250ZW50LXR5cGUiXSA9IHJlcy5oZWFkZXJzWyJjb250ZW50LXR5cGUiXSB8fCAiIjsKICAgIHNldEF1dGhEYXRhRnJvbVJlc3BvbnNlKGhlYWRlcik7CiAgICByZXR1cm4gcmVzOwogIH0pLmNhdGNoKGVyciA9PiB7CiAgICByZXR1cm4gZXJyLnJlc3BvbnNlOwogIH0pOwp9KTsKZXhwb3J0IGNvbnN0IGxvZ291dCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgewogIHJldHVybiB5aWVsZCBDbGllbnQuZGVsZXRlKCIvYXV0aC9zaWduX291dCIsIHsKICAgIGhlYWRlcnM6IGdldEF1dGhUb2tlbkZyb21TdG9yYWdlKCkKICB9KS50aGVuKCgpID0+IHsKICAgIHJlbW92ZUF1dGhEYXRhRnJvbVN0b3JhZ2UoKTsKICB9KTsKfSk7"},{"version":3,"mappings":";AAAA;;AACA,OAAOA,MAAP,MAAmB,cAAnB;AAGA,SACEC,uBADF,EAEEC,yBAFF,EAGEC,uBAHF,QAIO,mBAJP;AAQA,OAAO,MAAMC,KAAK,GAAG,CAAOC,KAAP,EAAsBC,QAAtB,KAA0CC;AAC7D,SAAO,MAAMP,MAAM,CAACQ,IAAP,CAAkB,eAAlB,EAAmC;AAAEH,SAAF;AAASC;AAAT,GAAnC,EACVG,IADU,CACJC,GAAD,IAA6B;AACjC,UAAMC,MAAM,GAAgB;AAC1B,sBAAgB,EADU;AAE1B,aAAO,EAFmB;AAG1B,gBAAU,EAHgB;AAI1B,gBAAU,EAJgB;AAK1B,sBAAgB;AALU,KAA5B;AAOAA,UAAM,CAAC,cAAD,CAAN,GAAyBD,GAAG,CAACE,OAAJ,CAAY,cAAZ,KAA+B,EAAxD;AACAD,UAAM,CAAC,KAAD,CAAN,GAAgBD,GAAG,CAACE,OAAJ,CAAY,KAAZ,KAAsB,EAAtC;AACAD,UAAM,CAAC,QAAD,CAAN,GAAmBD,GAAG,CAACE,OAAJ,CAAY,QAAZ,KAAyB,EAA5C;AACAD,UAAM,CAAC,QAAD,CAAN,GAAmBD,GAAG,CAACE,OAAJ,CAAY,QAAZ,KAAyB,EAA5C;AACAD,UAAM,CAAC,cAAD,CAAN,GAAyBD,GAAG,CAACE,OAAJ,CAAY,cAAZ,KAA+B,EAAxD;AACAT,2BAAuB,CAACQ,MAAD,CAAvB;AACA,WAAOD,GAAP;AACD,GAhBU,EAiBVG,KAjBU,CAiBHC,GAAD,IAAoB;AACzB,WAAOA,GAAG,CAACC,QAAX;AACD,GAnBU,CAAb;AAoBD,CArB8D,CAAxD;AAuBP,OAAO,MAAMC,MAAM,GAAG,MAAWT;AAC/B,SAAO,MAAMP,MAAM,CAACiB,MAAP,CAAc,gBAAd,EAAgC;AAC3CL,WAAO,EAAEX,uBAAuB;AADW,GAAhC,EAEVQ,IAFU,CAEL,MAAK;AACXP,6BAAyB;AAC1B,GAJY,CAAb;AAKD,CANgC,CAA1B","names":["Client","getAuthTokenFromStorage","removeAuthDataFromStorage","setAuthDataFromResponse","login","email","password","__awaiter","post","then","res","header","headers","catch","err","response","logout","delete"],"sourceRoot":"","sources":["/app/app/node_modules/eslint-loader/index.js??ref--14-0!/app/app/src/api/Auth.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport Client from \"@/api/Client\";\nimport { User } from \"@/types/User\";\nimport { AuthHeaders } from \"@/types/Auth\";\nimport {\n  getAuthTokenFromStorage,\n  removeAuthDataFromStorage,\n  setAuthDataFromResponse,\n} from \"@/utils/AuthToken\";\n\nimport { AxiosResponse, AxiosError } from \"axios\";\n\nexport const login = async (email: string, password: string) => {\n  return await Client.post<User>(\"/auth/sign_in\", { email, password })\n    .then((res: AxiosResponse<User>) => {\n      const header: AuthHeaders = {\n        \"access-token\": \"\",\n        \"uid\": \"\",\n        \"client\": \"\",\n        \"expiry\": \"\",\n        \"content-type\": \"\",\n      };\n      header[\"access-token\"] = res.headers[\"access-token\"] || \"\";\n      header[\"uid\"] = res.headers[\"uid\"] || \"\";\n      header[\"client\"] = res.headers[\"client\"] || \"\";\n      header[\"expiry\"] = res.headers[\"expiry\"] || \"\";\n      header[\"content-type\"] = res.headers[\"content-type\"] || \"\";\n      setAuthDataFromResponse(header);\n      return res;\n    })\n    .catch((err: AxiosError) => {\n      return err.response;\n    });\n};\n\nexport const logout = async () => {\n  return await Client.delete(\"/auth/sign_out\", {\n    headers: getAuthTokenFromStorage(),\n  }).then(() => {\n    removeAuthDataFromStorage();\n  });\n};\n"]}]}