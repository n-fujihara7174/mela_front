{"remainingRequest":"/app/app/node_modules/babel-loader/lib/index.js!/app/app/node_modules/ts-loader/index.js??ref--15-2!/app/app/node_modules/eslint-loader/index.js??ref--14-0!/app/app/src/api/Auth.ts","dependencies":[{"path":"/app/app/src/api/Auth.ts","mtime":1653730712955},{"path":"/app/app/babel.config.js","mtime":1653536287205},{"path":"/app/app/node_modules/cache-loader/dist/cjs.js","mtime":1653536287828},{"path":"/app/app/node_modules/babel-loader/lib/index.js","mtime":1653536287773},{"path":"/app/app/node_modules/ts-loader/index.js","mtime":1653536289992},{"path":"/app/app/node_modules/eslint-loader/index.js","mtime":1653536288483}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19hd2FpdGVyIH0gZnJvbSAidHNsaWIiOwovKiBlc2xpbnQtZGlzYWJsZSBwcmV0dGllci9wcmV0dGllciAqLwoKLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlcyAqLwoKaW1wb3J0IENsaWVudCBmcm9tICJAL2FwaS9DbGllbnQiOwppbXBvcnQgeyBnZXRBdXRoVG9rZW5Gcm9tU3RvcmFnZSwgcmVtb3ZlQXV0aERhdGFGcm9tU3RvcmFnZSwgc2V0QXV0aERhdGFGcm9tUmVzcG9uc2UgfSBmcm9tICJAL3V0aWxzL0F1dGhUb2tlbiI7CmltcG9ydCBjb25maWcgZnJvbSAiQC9jb25zdCI7CmV4cG9ydCBjb25zdCBzaWduX2luID0gKGVtYWlsLCBwYXNzd29yZCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7CiAgcmV0dXJuIHlpZWxkIENsaWVudC5wb3N0KCIvYXV0aC9zaWduX2luIiwgewogICAgZW1haWwsCiAgICBwYXNzd29yZAogIH0pLnRoZW4ocmVzID0+IHsKICAgIGNvbnN0IGhlYWRlciA9IHsKICAgICAgImFjY2Vzcy10b2tlbiI6ICIiLAogICAgICB1aWQ6ICIiLAogICAgICBjbGllbnQ6ICIiLAogICAgICBleHBpcnk6ICIiLAogICAgICAiY29udGVudC10eXBlIjogIiIKICAgIH07CiAgICBoZWFkZXJbImFjY2Vzcy10b2tlbiJdID0gcmVzLmhlYWRlcnNbImFjY2Vzcy10b2tlbiJdIHx8ICIiOwogICAgaGVhZGVyWyJ1aWQiXSA9IHJlcy5oZWFkZXJzWyJ1aWQiXSB8fCAiIjsKICAgIGhlYWRlclsiY2xpZW50Il0gPSByZXMuaGVhZGVyc1siY2xpZW50Il0gfHwgIiI7CiAgICBoZWFkZXJbImV4cGlyeSJdID0gcmVzLmhlYWRlcnNbImV4cGlyeSJdIHx8ICIiOwogICAgaGVhZGVyWyJjb250ZW50LXR5cGUiXSA9IHJlcy5oZWFkZXJzWyJjb250ZW50LXR5cGUiXSB8fCAiIjsKICAgIHNldEF1dGhEYXRhRnJvbVJlc3BvbnNlKGhlYWRlcik7CiAgICByZXR1cm4gcmVzOwogIH0pLmNhdGNoKGVyciA9PiB7CiAgICByZXR1cm4gZXJyLnJlc3BvbnNlOwogIH0pOwp9KTsKZXhwb3J0IGNvbnN0IHNpZ25fb3V0ID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7CiAgcmV0dXJuIHlpZWxkIENsaWVudC5kZWxldGUoIi9hdXRoL3NpZ25fb3V0IiwgewogICAgaGVhZGVyczogZ2V0QXV0aFRva2VuRnJvbVN0b3JhZ2UoKQogIH0pLnRoZW4oKCkgPT4gewogICAgcmVtb3ZlQXV0aERhdGFGcm9tU3RvcmFnZSgpOwogIH0pOwp9KTsKZXhwb3J0IGNvbnN0IHNpZ25fdXAgPSAobmFtZSwgcGFzc3dvcmQsIHBhc3N3b3JkX2NvbmZpcm1hdGlvbiwgZW1haWwpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgewogIGNvbnNvbGUubG9nKGBuYW1lOiAke25hbWV9LCBwYXNzd29yZDogJHtwYXNzd29yZH0sIHBhc3N3b3JkX2NvbmZpcm06ICR7cGFzc3dvcmRfY29uZmlybWF0aW9ufSwgZW1haWw6ICR7ZW1haWx9YCk7CiAgcmV0dXJuIHlpZWxkIENsaWVudC5wb3N0KCIvYXV0aCIsIHsKICAgIG5hbWU6IG5hbWUsCiAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICBwYXNzd29yZF9jb25maXJtYXRpb246IHBhc3N3b3JkX2NvbmZpcm1hdGlvbiwKICAgIGVtYWlsOiBlbWFpbCwKICAgIGNvbmZpcm1fc3VjY2Vzc191cmw6IGNvbmZpZy5DT05GSVJNX1NVQ0NFU1NfVVJMLAogICAgaGVhZGVyczogZ2V0QXV0aFRva2VuRnJvbVN0b3JhZ2UoKQogIH0pLnRoZW4ocmVzID0+IHsKICAgIGNvbnNvbGUubG9nKCJzaWduX3Vw44Oh44K944OD44OJ4oaS5oiQ5YqfIik7CiAgICByZXR1cm4gcmVzOwogIH0pLmNhdGNoKGVyciA9PiB7CiAgICBjb25zb2xlLmxvZygic2lnbl91cOODoeOCveODg+ODieKGkuWkseaVlyIpOwogICAgdGhyb3cgZXJyOwogIH0pOwp9KTs="},{"version":3,"mappings":";AAAA;;AACA;;AACA,OAAOA,MAAP,MAAmB,cAAnB;AAGA,SACEC,uBADF,EAEEC,yBAFF,EAGEC,uBAHF,QAIO,mBAJP;AAKA,OAAOC,MAAP,MAAmB,SAAnB;AAIA,OAAO,MAAMC,OAAO,GAAG,CAAOC,KAAP,EAAsBC,QAAtB,KAA0CC;AAC/D,SAAO,MAAMR,MAAM,CAACS,IAAP,CAAkB,eAAlB,EAAmC;AAAEH,SAAF;AAASC;AAAT,GAAnC,EACVG,IADU,CACJC,GAAD,IAA6B;AACjC,UAAMC,MAAM,GAAgB;AAC1B,sBAAgB,EADU;AAE1BC,SAAG,EAAE,EAFqB;AAG1BC,YAAM,EAAE,EAHkB;AAI1BC,YAAM,EAAE,EAJkB;AAK1B,sBAAgB;AALU,KAA5B;AAOAH,UAAM,CAAC,cAAD,CAAN,GAAyBD,GAAG,CAACK,OAAJ,CAAY,cAAZ,KAA+B,EAAxD;AACAJ,UAAM,CAAC,KAAD,CAAN,GAAgBD,GAAG,CAACK,OAAJ,CAAY,KAAZ,KAAsB,EAAtC;AACAJ,UAAM,CAAC,QAAD,CAAN,GAAmBD,GAAG,CAACK,OAAJ,CAAY,QAAZ,KAAyB,EAA5C;AACAJ,UAAM,CAAC,QAAD,CAAN,GAAmBD,GAAG,CAACK,OAAJ,CAAY,QAAZ,KAAyB,EAA5C;AACAJ,UAAM,CAAC,cAAD,CAAN,GAAyBD,GAAG,CAACK,OAAJ,CAAY,cAAZ,KAA+B,EAAxD;AACAb,2BAAuB,CAACS,MAAD,CAAvB;AACA,WAAOD,GAAP;AACD,GAhBU,EAiBVM,KAjBU,CAiBHC,GAAD,IAAoB;AACzB,WAAOA,GAAG,CAACC,QAAX;AACD,GAnBU,CAAb;AAoBD,CArBgE,CAA1D;AAuBP,OAAO,MAAMC,QAAQ,GAAG,MAAWZ;AACjC,SAAO,MAAMR,MAAM,CAACqB,MAAP,CAAc,gBAAd,EAAgC;AAC3CL,WAAO,EAAEf,uBAAuB;AADW,GAAhC,EAEVS,IAFU,CAEL,MAAK;AACXR,6BAAyB;AAC1B,GAJY,CAAb;AAKD,CANkC,CAA5B;AAQP,OAAO,MAAMoB,OAAO,GAAG,CACrBC,IADqB,EAErBhB,QAFqB,EAGrBiB,qBAHqB,EAIrBlB,KAJqB,KAKnBE;AACFiB,SAAO,CAACC,GAAR,CACE,SAASH,IAAI,eAAehB,QAAQ,uBAAuBiB,qBAAqB,YAAYlB,KAAK,EADnG;AAGA,SAAO,MAAMN,MAAM,CAACS,IAAP,CAAkB,OAAlB,EAA2B;AACtCc,QAAI,EAAEA,IADgC;AAEtChB,YAAQ,EAAEA,QAF4B;AAGtCiB,yBAAqB,EAAEA,qBAHe;AAItClB,SAAK,EAAEA,KAJ+B;AAKtCqB,uBAAmB,EAAEvB,MAAM,CAACwB,mBALU;AAMtCZ,WAAO,EAAEf,uBAAuB;AANM,GAA3B,EAQVS,IARU,CAQJC,GAAD,IAA6B;AACjCc,WAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,WAAOf,GAAP;AACD,GAXU,EAYVM,KAZU,CAYHC,GAAD,IAAoB;AACzBO,WAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,UAAMR,GAAN;AACD,GAfU,CAAb;AAgBD,CApBG,CALG","names":["Client","getAuthTokenFromStorage","removeAuthDataFromStorage","setAuthDataFromResponse","config","sign_in","email","password","__awaiter","post","then","res","header","uid","client","expiry","headers","catch","err","response","sign_out","delete","sign_up","name","password_confirmation","console","log","confirm_success_url","CONFIRM_SUCCESS_URL"],"sourceRoot":"","sources":["/app/app/node_modules/eslint-loader/index.js??ref--14-0!/app/app/src/api/Auth.ts"],"sourcesContent":["/* eslint-disable prettier/prettier */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport Client from \"@/api/Client\";\nimport { User } from \"@/types/User\";\nimport { AuthHeaders } from \"@/types/Auth\";\nimport {\n  getAuthTokenFromStorage,\n  removeAuthDataFromStorage,\n  setAuthDataFromResponse,\n} from \"@/utils/AuthToken\";\nimport config from \"@/const\";\n\nimport { AxiosResponse, AxiosError } from \"axios\";\n\nexport const sign_in = async (email: string, password: string) => {\n  return await Client.post<User>(\"/auth/sign_in\", { email, password })\n    .then((res: AxiosResponse<User>) => {\n      const header: AuthHeaders = {\n        \"access-token\": \"\",\n        uid: \"\",\n        client: \"\",\n        expiry: \"\",\n        \"content-type\": \"\",\n      };\n      header[\"access-token\"] = res.headers[\"access-token\"] || \"\";\n      header[\"uid\"] = res.headers[\"uid\"] || \"\";\n      header[\"client\"] = res.headers[\"client\"] || \"\";\n      header[\"expiry\"] = res.headers[\"expiry\"] || \"\";\n      header[\"content-type\"] = res.headers[\"content-type\"] || \"\";\n      setAuthDataFromResponse(header);\n      return res;\n    })\n    .catch((err: AxiosError) => {\n      return err.response;\n    });\n};\n\nexport const sign_out = async () => {\n  return await Client.delete(\"/auth/sign_out\", {\n    headers: getAuthTokenFromStorage(),\n  }).then(() => {\n    removeAuthDataFromStorage();\n  });\n};\n\nexport const sign_up = async (\n  name: string,\n  password: string,\n  password_confirmation: string,\n  email: string\n) => {\n  console.log(\n    `name: ${name}, password: ${password}, password_confirm: ${password_confirmation}, email: ${email}`\n  );\n  return await Client.post<User>(\"/auth\", {\n    name: name,\n    password: password,\n    password_confirmation: password_confirmation,\n    email: email,\n    confirm_success_url: config.CONFIRM_SUCCESS_URL,\n    headers: getAuthTokenFromStorage(),\n  })\n    .then((res: AxiosResponse<User>) => {\n      console.log(\"sign_upメソッド→成功\");\n      return res;\n    })\n    .catch((err: AxiosError) => {\n      console.log(\"sign_upメソッド→失敗\");\n      throw err;\n    });\n};\n"]}]}