{"remainingRequest":"/app/app/node_modules/babel-loader/lib/index.js!/app/app/node_modules/ts-loader/index.js??ref--15-2!/app/app/node_modules/eslint-loader/index.js??ref--14-0!/app/app/src/api/Auth.ts","dependencies":[{"path":"/app/app/src/api/Auth.ts","mtime":1653568328434},{"path":"/app/app/babel.config.js","mtime":1653536287205},{"path":"/app/app/node_modules/cache-loader/dist/cjs.js","mtime":1653536287828},{"path":"/app/app/node_modules/babel-loader/lib/index.js","mtime":1653536287773},{"path":"/app/app/node_modules/ts-loader/index.js","mtime":1653536289992},{"path":"/app/app/node_modules/eslint-loader/index.js","mtime":1653536288483}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19hd2FpdGVyIH0gZnJvbSAidHNsaWIiOwovKiBlc2xpbnQtZGlzYWJsZSBwcmV0dGllci9wcmV0dGllciAqLwoKLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlcyAqLwoKaW1wb3J0IENsaWVudCBmcm9tICJAL2FwaS9DbGllbnQiOwppbXBvcnQgeyBnZXRBdXRoVG9rZW5Gcm9tU3RvcmFnZSwgcmVtb3ZlQXV0aERhdGFGcm9tU3RvcmFnZSwgc2V0QXV0aERhdGFGcm9tUmVzcG9uc2UgfSBmcm9tICJAL3V0aWxzL0F1dGhUb2tlbiI7CmV4cG9ydCBjb25zdCBsb2dpbiA9IChlbWFpbCwgcGFzc3dvcmQpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgewogIHJldHVybiB5aWVsZCBDbGllbnQucG9zdCgiL2F1dGgvc2lnbl9pbiIsIHsKICAgIGVtYWlsLAogICAgcGFzc3dvcmQKICB9KS50aGVuKHJlcyA9PiB7CiAgICBjb25zdCBoZWFkZXIgPSB7CiAgICAgICJhY2Nlc3MtdG9rZW4iOiAiIiwKICAgICAgdWlkOiAiIiwKICAgICAgY2xpZW50OiAiIiwKICAgICAgZXhwaXJ5OiAiIiwKICAgICAgImNvbnRlbnQtdHlwZSI6ICIiCiAgICB9OwogICAgaGVhZGVyWyJhY2Nlc3MtdG9rZW4iXSA9IHJlcy5oZWFkZXJzWyJhY2Nlc3MtdG9rZW4iXSB8fCAiIjsKICAgIGhlYWRlclsidWlkIl0gPSByZXMuaGVhZGVyc1sidWlkIl0gfHwgIiI7CiAgICBoZWFkZXJbImNsaWVudCJdID0gcmVzLmhlYWRlcnNbImNsaWVudCJdIHx8ICIiOwogICAgaGVhZGVyWyJleHBpcnkiXSA9IHJlcy5oZWFkZXJzWyJleHBpcnkiXSB8fCAiIjsKICAgIGhlYWRlclsiY29udGVudC10eXBlIl0gPSByZXMuaGVhZGVyc1siY29udGVudC10eXBlIl0gfHwgIiI7CiAgICBzZXRBdXRoRGF0YUZyb21SZXNwb25zZShoZWFkZXIpOwogICAgcmV0dXJuIHJlczsKICB9KS5jYXRjaChlcnIgPT4gewogICAgcmV0dXJuIGVyci5yZXNwb25zZTsKICB9KTsKfSk7CmV4cG9ydCBjb25zdCBsb2dvdXQgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsKICByZXR1cm4geWllbGQgQ2xpZW50LmRlbGV0ZSgiL2F1dGgvc2lnbl9vdXQiLCB7CiAgICBoZWFkZXJzOiBnZXRBdXRoVG9rZW5Gcm9tU3RvcmFnZSgpCiAgfSkudGhlbigoKSA9PiB7CiAgICByZW1vdmVBdXRoRGF0YUZyb21TdG9yYWdlKCk7CiAgfSk7Cn0pOw=="},{"version":3,"mappings":";AAAA;;AACA;;AACA,OAAOA,MAAP,MAAmB,cAAnB;AAGA,SACEC,uBADF,EAEEC,yBAFF,EAGEC,uBAHF,QAIO,mBAJP;AAQA,OAAO,MAAMC,KAAK,GAAG,CAAOC,KAAP,EAAsBC,QAAtB,KAA0CC;AAC7D,SAAO,MAAMP,MAAM,CAACQ,IAAP,CAAkB,eAAlB,EAAmC;AAAEH,SAAF;AAASC;AAAT,GAAnC,EACVG,IADU,CACJC,GAAD,IAA6B;AACjC,UAAMC,MAAM,GAAgB;AAC1B,sBAAgB,EADU;AAE1BC,SAAG,EAAE,EAFqB;AAG1BC,YAAM,EAAE,EAHkB;AAI1BC,YAAM,EAAE,EAJkB;AAK1B,sBAAgB;AALU,KAA5B;AAOAH,UAAM,CAAC,cAAD,CAAN,GAAyBD,GAAG,CAACK,OAAJ,CAAY,cAAZ,KAA+B,EAAxD;AACAJ,UAAM,CAAC,KAAD,CAAN,GAAgBD,GAAG,CAACK,OAAJ,CAAY,KAAZ,KAAsB,EAAtC;AACAJ,UAAM,CAAC,QAAD,CAAN,GAAmBD,GAAG,CAACK,OAAJ,CAAY,QAAZ,KAAyB,EAA5C;AACAJ,UAAM,CAAC,QAAD,CAAN,GAAmBD,GAAG,CAACK,OAAJ,CAAY,QAAZ,KAAyB,EAA5C;AACAJ,UAAM,CAAC,cAAD,CAAN,GAAyBD,GAAG,CAACK,OAAJ,CAAY,cAAZ,KAA+B,EAAxD;AACAZ,2BAAuB,CAACQ,MAAD,CAAvB;AACA,WAAOD,GAAP;AACD,GAhBU,EAiBVM,KAjBU,CAiBHC,GAAD,IAAoB;AACzB,WAAOA,GAAG,CAACC,QAAX;AACD,GAnBU,CAAb;AAoBD,CArB8D,CAAxD;AAuBP,OAAO,MAAMC,MAAM,GAAG,MAAWZ;AAC/B,SAAO,MAAMP,MAAM,CAACoB,MAAP,CAAc,gBAAd,EAAgC;AAC3CL,WAAO,EAAEd,uBAAuB;AADW,GAAhC,EAEVQ,IAFU,CAEL,MAAK;AACXP,6BAAyB;AAC1B,GAJY,CAAb;AAKD,CANgC,CAA1B","names":["Client","getAuthTokenFromStorage","removeAuthDataFromStorage","setAuthDataFromResponse","login","email","password","__awaiter","post","then","res","header","uid","client","expiry","headers","catch","err","response","logout","delete"],"sourceRoot":"","sources":["/app/app/node_modules/eslint-loader/index.js??ref--14-0!/app/app/src/api/Auth.ts"],"sourcesContent":["/* eslint-disable prettier/prettier */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport Client from \"@/api/Client\";\nimport { User } from \"@/types/User\";\nimport { AuthHeaders } from \"@/types/Auth\";\nimport {\n  getAuthTokenFromStorage,\n  removeAuthDataFromStorage,\n  setAuthDataFromResponse,\n} from \"@/utils/AuthToken\";\n\nimport { AxiosResponse, AxiosError } from \"axios\";\n\nexport const login = async (email: string, password: string) => {\n  return await Client.post<User>(\"/auth/sign_in\", { email, password })\n    .then((res: AxiosResponse<User>) => {\n      const header: AuthHeaders = {\n        \"access-token\": \"\",\n        uid: \"\",\n        client: \"\",\n        expiry: \"\",\n        \"content-type\": \"\",\n      };\n      header[\"access-token\"] = res.headers[\"access-token\"] || \"\";\n      header[\"uid\"] = res.headers[\"uid\"] || \"\";\n      header[\"client\"] = res.headers[\"client\"] || \"\";\n      header[\"expiry\"] = res.headers[\"expiry\"] || \"\";\n      header[\"content-type\"] = res.headers[\"content-type\"] || \"\";\n      setAuthDataFromResponse(header);\n      return res;\n    })\n    .catch((err: AxiosError) => {\n      return err.response;\n    });\n};\n\nexport const logout = async () => {\n  return await Client.delete(\"/auth/sign_out\", {\n    headers: getAuthTokenFromStorage(),\n  }).then(() => {\n    removeAuthDataFromStorage();\n  });\n};\n"]}]}