{"remainingRequest":"/app/app/node_modules/babel-loader/lib/index.js!/app/app/node_modules/eslint-loader/index.js??ref--14-0!/app/app/src/js/gsapPackage/CSSPlugin.js","dependencies":[{"path":"/app/app/src/js/gsapPackage/CSSPlugin.js","mtime":499162500000},{"path":"/app/app/babel.config.js","mtime":1643593581402},{"path":"/app/app/node_modules/cache-loader/dist/cjs.js","mtime":1639906761392},{"path":"/app/app/node_modules/babel-loader/lib/index.js","mtime":1639906767681},{"path":"/app/app/node_modules/eslint-loader/index.js","mtime":1639906762562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyohCiAqIENTU1BsdWdpbiAzLjkuMQogKiBodHRwczovL2dyZWVuc29jay5jb20KICoKICogQ29weXJpZ2h0IDIwMDgtMjAyMSwgR3JlZW5Tb2NrLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBTdWJqZWN0IHRvIHRoZSB0ZXJtcyBhdCBodHRwczovL2dyZWVuc29jay5jb20vc3RhbmRhcmQtbGljZW5zZSBvciBmb3IKICogQ2x1YiBHcmVlblNvY2sgbWVtYmVycywgdGhlIGFncmVlbWVudCBpc3N1ZWQgd2l0aCB0aGF0IG1lbWJlcnNoaXAuCiAqIEBhdXRob3I6IEphY2sgRG95bGUsIGphY2tAZ3JlZW5zb2NrLmNvbQoqLwoKLyogZXNsaW50LWRpc2FibGUgKi8KaW1wb3J0IHsgZ3NhcCwgX2dldFByb3BlcnR5LCBfbnVtRXhwLCBfbnVtV2l0aFVuaXRFeHAsIGdldFVuaXQsIF9pc1N0cmluZywgX2lzVW5kZWZpbmVkLCBfcmVuZGVyQ29tcGxleFN0cmluZywgX3JlbEV4cCwgX2ZvckVhY2hOYW1lLCBfc29ydFByb3BUd2VlbnNCeVByaW9yaXR5LCBfY29sb3JTdHJpbmdGaWx0ZXIsIF9jaGVja1BsdWdpbiwgX3JlcGxhY2VSYW5kb20sIF9wbHVnaW5zLCBHU0NhY2hlLCBQcm9wVHdlZW4sIF9jb25maWcsIF90aWNrZXIsIF9yb3VuZCwgX21pc3NpbmdQbHVnaW4sIF9nZXRTZXR0ZXIsIF9nZXRDYWNoZSwgX2NvbG9yRXhwLCBfc2V0RGVmYXVsdHMsIF9yZW1vdmVMaW5rZWRMaXN0SXRlbSAvL2ZvciB0aGUgY29tbWVudGVkLW91dCBjbGFzc05hbWUgZmVhdHVyZS4KfSBmcm9tICIuL2dzYXAtY29yZS5qcyI7Cgp2YXIgX3dpbiwKICAgIF9kb2MsCiAgICBfZG9jRWxlbWVudCwKICAgIF9wbHVnaW5Jbml0dGVkLAogICAgX3RlbXBEaXYsCiAgICBfdGVtcERpdlN0eWxlciwKICAgIF9yZWNlbnRTZXR0ZXJQbHVnaW4sCiAgICBfd2luZG93RXhpc3RzID0gZnVuY3Rpb24gX3dpbmRvd0V4aXN0cygpIHsKICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCI7Cn0sCiAgICBfdHJhbnNmb3JtUHJvcHMgPSB7fSwKICAgIF9SQUQyREVHID0gMTgwIC8gTWF0aC5QSSwKICAgIF9ERUcyUkFEID0gTWF0aC5QSSAvIDE4MCwKICAgIF9hdGFuMiA9IE1hdGguYXRhbjIsCiAgICBfYmlnTnVtID0gMWU4LAogICAgX2NhcHNFeHAgPSAvKFtBLVpdKS9nLAogICAgX2hvcml6b250YWxFeHAgPSAvKD86bGVmdHxyaWdodHx3aWR0aHxtYXJnaW58cGFkZGluZ3x4KS9pLAogICAgX2NvbXBsZXhFeHAgPSAvW1xzLFwoXVxTLywKICAgIF9wcm9wZXJ0eUFsaWFzZXMgPSB7CiAgYXV0b0FscGhhOiAib3BhY2l0eSx2aXNpYmlsaXR5IiwKICBzY2FsZTogInNjYWxlWCxzY2FsZVkiLAogIGFscGhhOiAib3BhY2l0eSIKfSwKICAgIF9yZW5kZXJDU1NQcm9wID0gZnVuY3Rpb24gX3JlbmRlckNTU1Byb3AocmF0aW8sIGRhdGEpIHsKICByZXR1cm4gZGF0YS5zZXQoZGF0YS50LCBkYXRhLnAsIE1hdGgucm91bmQoKGRhdGEucyArIGRhdGEuYyAqIHJhdGlvKSAqIDEwMDAwKSAvIDEwMDAwICsgZGF0YS51LCBkYXRhKTsKfSwKICAgIF9yZW5kZXJQcm9wV2l0aEVuZCA9IGZ1bmN0aW9uIF9yZW5kZXJQcm9wV2l0aEVuZChyYXRpbywgZGF0YSkgewogIHJldHVybiBkYXRhLnNldChkYXRhLnQsIGRhdGEucCwgcmF0aW8gPT09IDEgPyBkYXRhLmUgOiBNYXRoLnJvdW5kKChkYXRhLnMgKyBkYXRhLmMgKiByYXRpbykgKiAxMDAwMCkgLyAxMDAwMCArIGRhdGEudSwgZGF0YSk7Cn0sCiAgICBfcmVuZGVyQ1NTUHJvcFdpdGhCZWdpbm5pbmcgPSBmdW5jdGlvbiBfcmVuZGVyQ1NTUHJvcFdpdGhCZWdpbm5pbmcocmF0aW8sIGRhdGEpIHsKICByZXR1cm4gZGF0YS5zZXQoZGF0YS50LCBkYXRhLnAsIHJhdGlvID8gTWF0aC5yb3VuZCgoZGF0YS5zICsgZGF0YS5jICogcmF0aW8pICogMTAwMDApIC8gMTAwMDAgKyBkYXRhLnUgOiBkYXRhLmIsIGRhdGEpOwp9LAogICAgLy9pZiB1bml0cyBjaGFuZ2UsIHdlIG5lZWQgYSB3YXkgdG8gcmVuZGVyIHRoZSBvcmlnaW5hbCB1bml0L3ZhbHVlIHdoZW4gdGhlIHR3ZWVuIGdvZXMgYWxsIHRoZSB3YXkgYmFjayB0byB0aGUgYmVnaW5uaW5nIChyYXRpbzowKQpfcmVuZGVyUm91bmRlZENTU1Byb3AgPSBmdW5jdGlvbiBfcmVuZGVyUm91bmRlZENTU1Byb3AocmF0aW8sIGRhdGEpIHsKICB2YXIgdmFsdWUgPSBkYXRhLnMgKyBkYXRhLmMgKiByYXRpbzsKICBkYXRhLnNldChkYXRhLnQsIGRhdGEucCwgfn4odmFsdWUgKyAodmFsdWUgPCAwID8gLS41IDogLjUpKSArIGRhdGEudSwgZGF0YSk7Cn0sCiAgICBfcmVuZGVyTm9uVHdlZW5pbmdWYWx1ZSA9IGZ1bmN0aW9uIF9yZW5kZXJOb25Ud2VlbmluZ1ZhbHVlKHJhdGlvLCBkYXRhKSB7CiAgcmV0dXJuIGRhdGEuc2V0KGRhdGEudCwgZGF0YS5wLCByYXRpbyA/IGRhdGEuZSA6IGRhdGEuYiwgZGF0YSk7Cn0sCiAgICBfcmVuZGVyTm9uVHdlZW5pbmdWYWx1ZU9ubHlBdEVuZCA9IGZ1bmN0aW9uIF9yZW5kZXJOb25Ud2VlbmluZ1ZhbHVlT25seUF0RW5kKHJhdGlvLCBkYXRhKSB7CiAgcmV0dXJuIGRhdGEuc2V0KGRhdGEudCwgZGF0YS5wLCByYXRpbyAhPT0gMSA/IGRhdGEuYiA6IGRhdGEuZSwgZGF0YSk7Cn0sCiAgICBfc2V0dGVyQ1NTU3R5bGUgPSBmdW5jdGlvbiBfc2V0dGVyQ1NTU3R5bGUodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpIHsKICByZXR1cm4gdGFyZ2V0LnN0eWxlW3Byb3BlcnR5XSA9IHZhbHVlOwp9LAogICAgX3NldHRlckNTU1Byb3AgPSBmdW5jdGlvbiBfc2V0dGVyQ1NTUHJvcCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkgewogIHJldHVybiB0YXJnZXQuc3R5bGUuc2V0UHJvcGVydHkocHJvcGVydHksIHZhbHVlKTsKfSwKICAgIF9zZXR0ZXJUcmFuc2Zvcm0gPSBmdW5jdGlvbiBfc2V0dGVyVHJhbnNmb3JtKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7CiAgcmV0dXJuIHRhcmdldC5fZ3NhcFtwcm9wZXJ0eV0gPSB2YWx1ZTsKfSwKICAgIF9zZXR0ZXJTY2FsZSA9IGZ1bmN0aW9uIF9zZXR0ZXJTY2FsZSh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkgewogIHJldHVybiB0YXJnZXQuX2dzYXAuc2NhbGVYID0gdGFyZ2V0Ll9nc2FwLnNjYWxlWSA9IHZhbHVlOwp9LAogICAgX3NldHRlclNjYWxlV2l0aFJlbmRlciA9IGZ1bmN0aW9uIF9zZXR0ZXJTY2FsZVdpdGhSZW5kZXIodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIGRhdGEsIHJhdGlvKSB7CiAgdmFyIGNhY2hlID0gdGFyZ2V0Ll9nc2FwOwogIGNhY2hlLnNjYWxlWCA9IGNhY2hlLnNjYWxlWSA9IHZhbHVlOwogIGNhY2hlLnJlbmRlclRyYW5zZm9ybShyYXRpbywgY2FjaGUpOwp9LAogICAgX3NldHRlclRyYW5zZm9ybVdpdGhSZW5kZXIgPSBmdW5jdGlvbiBfc2V0dGVyVHJhbnNmb3JtV2l0aFJlbmRlcih0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgZGF0YSwgcmF0aW8pIHsKICB2YXIgY2FjaGUgPSB0YXJnZXQuX2dzYXA7CiAgY2FjaGVbcHJvcGVydHldID0gdmFsdWU7CiAgY2FjaGUucmVuZGVyVHJhbnNmb3JtKHJhdGlvLCBjYWNoZSk7Cn0sCiAgICBfdHJhbnNmb3JtUHJvcCA9ICJ0cmFuc2Zvcm0iLAogICAgX3RyYW5zZm9ybU9yaWdpblByb3AgPSBfdHJhbnNmb3JtUHJvcCArICJPcmlnaW4iLAogICAgX3N1cHBvcnRzM0QsCiAgICBfY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIF9jcmVhdGVFbGVtZW50KHR5cGUsIG5zKSB7CiAgdmFyIGUgPSBfZG9jLmNyZWF0ZUVsZW1lbnROUyA/IF9kb2MuY3JlYXRlRWxlbWVudE5TKChucyB8fCAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIpLnJlcGxhY2UoL15odHRwcy8sICJodHRwIiksIHR5cGUpIDogX2RvYy5jcmVhdGVFbGVtZW50KHR5cGUpOyAvL3NvbWUgc2VydmVycyBzd2FwIGluIGh0dHBzIGZvciBodHRwIGluIHRoZSBuYW1lc3BhY2Ugd2hpY2ggY2FuIGJyZWFrIHRoaW5ncywgbWFraW5nICJzdHlsZSIgaW5hY2Nlc3NpYmxlLgoKICByZXR1cm4gZS5zdHlsZSA/IGUgOiBfZG9jLmNyZWF0ZUVsZW1lbnQodHlwZSk7IC8vc29tZSBlbnZpcm9ubWVudHMgd29uJ3QgYWxsb3cgYWNjZXNzIHRvIHRoZSBlbGVtZW50J3Mgc3R5bGUgd2hlbiBjcmVhdGVkIHdpdGggYSBuYW1lc3BhY2UgaW4gd2hpY2ggY2FzZSB3ZSBkZWZhdWx0IHRvIHRoZSBzdGFuZGFyZCBjcmVhdGVFbGVtZW50KCkgdG8gd29yayBhcm91bmQgdGhlIGlzc3VlLiBBbHNvIG5vdGUgdGhhdCB3aGVuIEdTQVAgaXMgZW1iZWRkZWQgZGlyZWN0bHkgaW5zaWRlIGFuIFNWRyBmaWxlLCBjcmVhdGVFbGVtZW50KCkgd29uJ3QgYWxsb3cgYWNjZXNzIHRvIHRoZSBzdHlsZSBvYmplY3QgaW4gRmlyZWZveCAoc2VlIGh0dHBzOi8vZ3JlZW5zb2NrLmNvbS9mb3J1bXMvdG9waWMvMjAyMTUtcHJvYmxlbS11c2luZy10d2Vlbm1heC1pbi1zdGFuZGFsb25lLXNlbGYtY29udGFpbmluZy1zdmctZmlsZS1lcnItY2Fubm90LXNldC1wcm9wZXJ0eS1jc3N0ZXh0LW9mLXVuZGVmaW5lZC8pLgp9LAogICAgX2dldENvbXB1dGVkUHJvcGVydHkgPSBmdW5jdGlvbiBfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBza2lwUHJlZml4RmFsbGJhY2spIHsKICB2YXIgY3MgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7CiAgcmV0dXJuIGNzW3Byb3BlcnR5XSB8fCBjcy5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5LnJlcGxhY2UoX2NhcHNFeHAsICItJDEiKS50b0xvd2VyQ2FzZSgpKSB8fCBjcy5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KSB8fCAhc2tpcFByZWZpeEZhbGxiYWNrICYmIF9nZXRDb21wdXRlZFByb3BlcnR5KHRhcmdldCwgX2NoZWNrUHJvcFByZWZpeChwcm9wZXJ0eSkgfHwgcHJvcGVydHksIDEpIHx8ICIiOyAvL2NzcyB2YXJpYWJsZXMgbWF5IG5vdCBuZWVkIGNhcHMgc3dhcHBlZCBvdXQgZm9yIGRhc2hlcyBhbmQgbG93ZXJjYXNlLgp9LAogICAgX3ByZWZpeGVzID0gIk8sTW96LG1zLE1zLFdlYmtpdCIuc3BsaXQoIiwiKSwKICAgIF9jaGVja1Byb3BQcmVmaXggPSBmdW5jdGlvbiBfY2hlY2tQcm9wUHJlZml4KHByb3BlcnR5LCBlbGVtZW50LCBwcmVmZXJQcmVmaXgpIHsKICB2YXIgZSA9IGVsZW1lbnQgfHwgX3RlbXBEaXYsCiAgICAgIHMgPSBlLnN0eWxlLAogICAgICBpID0gNTsKCiAgaWYgKHByb3BlcnR5IGluIHMgJiYgIXByZWZlclByZWZpeCkgewogICAgcmV0dXJuIHByb3BlcnR5OwogIH0KCiAgcHJvcGVydHkgPSBwcm9wZXJ0eS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3BlcnR5LnN1YnN0cigxKTsKCiAgd2hpbGUgKGktLSAmJiAhKF9wcmVmaXhlc1tpXSArIHByb3BlcnR5IGluIHMpKSB7fQoKICByZXR1cm4gaSA8IDAgPyBudWxsIDogKGkgPT09IDMgPyAibXMiIDogaSA+PSAwID8gX3ByZWZpeGVzW2ldIDogIiIpICsgcHJvcGVydHk7Cn0sCiAgICBfaW5pdENvcmUgPSBmdW5jdGlvbiBfaW5pdENvcmUoKSB7CiAgaWYgKF93aW5kb3dFeGlzdHMoKSAmJiB3aW5kb3cuZG9jdW1lbnQpIHsKICAgIF93aW4gPSB3aW5kb3c7CiAgICBfZG9jID0gX3dpbi5kb2N1bWVudDsKICAgIF9kb2NFbGVtZW50ID0gX2RvYy5kb2N1bWVudEVsZW1lbnQ7CiAgICBfdGVtcERpdiA9IF9jcmVhdGVFbGVtZW50KCJkaXYiKSB8fCB7CiAgICAgIHN0eWxlOiB7fQogICAgfTsKICAgIF90ZW1wRGl2U3R5bGVyID0gX2NyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgX3RyYW5zZm9ybVByb3AgPSBfY2hlY2tQcm9wUHJlZml4KF90cmFuc2Zvcm1Qcm9wKTsKICAgIF90cmFuc2Zvcm1PcmlnaW5Qcm9wID0gX3RyYW5zZm9ybVByb3AgKyAiT3JpZ2luIjsKICAgIF90ZW1wRGl2LnN0eWxlLmNzc1RleHQgPSAiYm9yZGVyLXdpZHRoOjA7bGluZS1oZWlnaHQ6MDtwb3NpdGlvbjphYnNvbHV0ZTtwYWRkaW5nOjAiOyAvL21ha2Ugc3VyZSB0byBvdmVycmlkZSBjZXJ0YWluIHByb3BlcnRpZXMgdGhhdCBtYXkgY29udGFtaW5hdGUgbWVhc3VyZW1lbnRzLCBpbiBjYXNlIHRoZSB1c2VyIGhhcyBvdmVycmVhY2hpbmcgc3R5bGUgc2hlZXRzLgoKICAgIF9zdXBwb3J0czNEID0gISFfY2hlY2tQcm9wUHJlZml4KCJwZXJzcGVjdGl2ZSIpOwogICAgX3BsdWdpbkluaXR0ZWQgPSAxOwogIH0KfSwKICAgIF9nZXRCQm94SGFjayA9IGZ1bmN0aW9uIF9nZXRCQm94SGFjayhzd2FwSWZQb3NzaWJsZSkgewogIC8vd29ya3MgYXJvdW5kIGlzc3VlcyBpbiBzb21lIGJyb3dzZXJzIChsaWtlIEZpcmVmb3gpIHRoYXQgZG9uJ3QgY29ycmVjdGx5IHJlcG9ydCBnZXRCQm94KCkgb24gU1ZHIGVsZW1lbnRzIGluc2lkZSBhIDxkZWZzPiBlbGVtZW50IGFuZC9vciA8bWFzaz4uIFdlIHRyeSBjcmVhdGluZyBhbiBTVkcsIGFkZGluZyBpdCB0byB0aGUgZG9jdW1lbnRFbGVtZW50IGFuZCB0b3NzIHRoZSBlbGVtZW50IGluIHRoZXJlIHNvIHRoYXQgaXQncyBkZWZpbml0ZWx5IHBhcnQgb2YgdGhlIHJlbmRlcmluZyB0cmVlLCB0aGVuIGdyYWIgdGhlIGJib3ggYW5kIGlmIGl0IHdvcmtzLCB3ZSBhY3R1YWxseSBzd2FwIG91dCB0aGUgb3JpZ2luYWwgZ2V0QkJveCgpIG1ldGhvZCBmb3Igb3VyIG93biB0aGF0IGRvZXMgdGhlc2UgZXh0cmEgc3RlcHMgd2hlbmV2ZXIgZ2V0QkJveCBpcyBuZWVkZWQuIFRoaXMgaGVscHMgZW5zdXJlIHRoYXQgcGVyZm9ybWFuY2UgaXMgb3B0aW1hbCAob25seSBkbyBhbGwgdGhlc2UgZXh0cmEgc3RlcHMgd2hlbiBhYnNvbHV0ZWx5IG5lY2Vzc2FyeS4uLm1vc3QgZWxlbWVudHMgZG9uJ3QgbmVlZCBpdCkuCiAgdmFyIHN2ZyA9IF9jcmVhdGVFbGVtZW50KCJzdmciLCB0aGlzLm93bmVyU1ZHRWxlbWVudCAmJiB0aGlzLm93bmVyU1ZHRWxlbWVudC5nZXRBdHRyaWJ1dGUoInhtbG5zIikgfHwgImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiksCiAgICAgIG9sZFBhcmVudCA9IHRoaXMucGFyZW50Tm9kZSwKICAgICAgb2xkU2libGluZyA9IHRoaXMubmV4dFNpYmxpbmcsCiAgICAgIG9sZENTUyA9IHRoaXMuc3R5bGUuY3NzVGV4dCwKICAgICAgYmJveDsKCiAgX2RvY0VsZW1lbnQuYXBwZW5kQ2hpbGQoc3ZnKTsKCiAgc3ZnLmFwcGVuZENoaWxkKHRoaXMpOwogIHRoaXMuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgogIGlmIChzd2FwSWZQb3NzaWJsZSkgewogICAgdHJ5IHsKICAgICAgYmJveCA9IHRoaXMuZ2V0QkJveCgpOwogICAgICB0aGlzLl9nc2FwQkJveCA9IHRoaXMuZ2V0QkJveDsgLy9zdG9yZSB0aGUgb3JpZ2luYWwKCiAgICAgIHRoaXMuZ2V0QkJveCA9IF9nZXRCQm94SGFjazsKICAgIH0gY2F0Y2ggKGUpIHt9CiAgfSBlbHNlIGlmICh0aGlzLl9nc2FwQkJveCkgewogICAgYmJveCA9IHRoaXMuX2dzYXBCQm94KCk7CiAgfQoKICBpZiAob2xkUGFyZW50KSB7CiAgICBpZiAob2xkU2libGluZykgewogICAgICBvbGRQYXJlbnQuaW5zZXJ0QmVmb3JlKHRoaXMsIG9sZFNpYmxpbmcpOwogICAgfSBlbHNlIHsKICAgICAgb2xkUGFyZW50LmFwcGVuZENoaWxkKHRoaXMpOwogICAgfQogIH0KCiAgX2RvY0VsZW1lbnQucmVtb3ZlQ2hpbGQoc3ZnKTsKCiAgdGhpcy5zdHlsZS5jc3NUZXh0ID0gb2xkQ1NTOwogIHJldHVybiBiYm94Owp9LAogICAgX2dldEF0dHJpYnV0ZUZhbGxiYWNrcyA9IGZ1bmN0aW9uIF9nZXRBdHRyaWJ1dGVGYWxsYmFja3ModGFyZ2V0LCBhdHRyaWJ1dGVzQXJyYXkpIHsKICB2YXIgaSA9IGF0dHJpYnV0ZXNBcnJheS5sZW5ndGg7CgogIHdoaWxlIChpLS0pIHsKICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZXNBcnJheVtpXSkpIHsKICAgICAgcmV0dXJuIHRhcmdldC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlc0FycmF5W2ldKTsKICAgIH0KICB9Cn0sCiAgICBfZ2V0QkJveCA9IGZ1bmN0aW9uIF9nZXRCQm94KHRhcmdldCkgewogIHZhciBib3VuZHM7CgogIHRyeSB7CiAgICBib3VuZHMgPSB0YXJnZXQuZ2V0QkJveCgpOyAvL0ZpcmVmb3ggdGhyb3dzIGVycm9ycyBpZiB5b3UgdHJ5IGNhbGxpbmcgZ2V0QkJveCgpIG9uIGFuIFNWRyBlbGVtZW50IHRoYXQncyBub3QgcmVuZGVyZWQgKGxpa2UgaW4gYSA8c3ltYm9sPiBvciA8ZGVmcz4pLiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02MTIxMTgKICB9IGNhdGNoIChlcnJvcikgewogICAgYm91bmRzID0gX2dldEJCb3hIYWNrLmNhbGwodGFyZ2V0LCB0cnVlKTsKICB9CgogIGJvdW5kcyAmJiAoYm91bmRzLndpZHRoIHx8IGJvdW5kcy5oZWlnaHQpIHx8IHRhcmdldC5nZXRCQm94ID09PSBfZ2V0QkJveEhhY2sgfHwgKGJvdW5kcyA9IF9nZXRCQm94SGFjay5jYWxsKHRhcmdldCwgdHJ1ZSkpOyAvL3NvbWUgYnJvd3NlcnMgKGxpa2UgRmlyZWZveCkgbWlzcmVwb3J0IHRoZSBib3VuZHMgaWYgdGhlIGVsZW1lbnQgaGFzIHplcm8gd2lkdGggYW5kIGhlaWdodCAoaXQganVzdCBhc3N1bWVzIGl0J3MgYXQgeDowLCB5OjApLCB0aHVzIHdlIG5lZWQgdG8gbWFudWFsbHkgZ3JhYiB0aGUgcG9zaXRpb24gaW4gdGhhdCBjYXNlLgoKICByZXR1cm4gYm91bmRzICYmICFib3VuZHMud2lkdGggJiYgIWJvdW5kcy54ICYmICFib3VuZHMueSA/IHsKICAgIHg6ICtfZ2V0QXR0cmlidXRlRmFsbGJhY2tzKHRhcmdldCwgWyJ4IiwgImN4IiwgIngxIl0pIHx8IDAsCiAgICB5OiArX2dldEF0dHJpYnV0ZUZhbGxiYWNrcyh0YXJnZXQsIFsieSIsICJjeSIsICJ5MSJdKSB8fCAwLAogICAgd2lkdGg6IDAsCiAgICBoZWlnaHQ6IDAKICB9IDogYm91bmRzOwp9LAogICAgX2lzU1ZHID0gZnVuY3Rpb24gX2lzU1ZHKGUpIHsKICByZXR1cm4gISEoZS5nZXRDVE0gJiYgKCFlLnBhcmVudE5vZGUgfHwgZS5vd25lclNWR0VsZW1lbnQpICYmIF9nZXRCQm94KGUpKTsKfSwKICAgIC8vcmVwb3J0cyBpZiB0aGUgZWxlbWVudCBpcyBhbiBTVkcgb24gd2hpY2ggZ2V0QkJveCgpIGFjdHVhbGx5IHdvcmtzCl9yZW1vdmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIF9yZW1vdmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5KSB7CiAgaWYgKHByb3BlcnR5KSB7CiAgICB2YXIgc3R5bGUgPSB0YXJnZXQuc3R5bGU7CgogICAgaWYgKHByb3BlcnR5IGluIF90cmFuc2Zvcm1Qcm9wcyAmJiBwcm9wZXJ0eSAhPT0gX3RyYW5zZm9ybU9yaWdpblByb3ApIHsKICAgICAgcHJvcGVydHkgPSBfdHJhbnNmb3JtUHJvcDsKICAgIH0KCiAgICBpZiAoc3R5bGUucmVtb3ZlUHJvcGVydHkpIHsKICAgICAgaWYgKHByb3BlcnR5LnN1YnN0cigwLCAyKSA9PT0gIm1zIiB8fCBwcm9wZXJ0eS5zdWJzdHIoMCwgNikgPT09ICJ3ZWJraXQiKSB7CiAgICAgICAgLy9NaWNyb3NvZnQgYW5kIHNvbWUgV2Via2l0IGJyb3dzZXJzIGRvbid0IGNvbmZvcm0gdG8gdGhlIHN0YW5kYXJkIG9mIGNhcGl0YWxpemluZyB0aGUgZmlyc3QgcHJlZml4IGNoYXJhY3Rlciwgc28gd2UgYWRqdXN0IHNvIHRoYXQgd2hlbiB3ZSBwcmVmaXggdGhlIGNhcHMgd2l0aCBhIGRhc2gsIGl0J3MgY29ycmVjdCAob3RoZXJ3aXNlIGl0J2QgYmUgIm1zLXRyYW5zZm9ybSIgaW5zdGVhZCBvZiAiLW1zLXRyYW5zZm9ybSIgZm9yIElFOSwgZm9yIGV4YW1wbGUpCiAgICAgICAgcHJvcGVydHkgPSAiLSIgKyBwcm9wZXJ0eTsKICAgICAgfQoKICAgICAgc3R5bGUucmVtb3ZlUHJvcGVydHkocHJvcGVydHkucmVwbGFjZShfY2Fwc0V4cCwgIi0kMSIpLnRvTG93ZXJDYXNlKCkpOwogICAgfSBlbHNlIHsKICAgICAgLy9ub3RlOiBvbGQgdmVyc2lvbnMgb2YgSUUgdXNlICJyZW1vdmVBdHRyaWJ1dGUoKSIgaW5zdGVhZCBvZiAicmVtb3ZlUHJvcGVydHkoKSIKICAgICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKHByb3BlcnR5KTsKICAgIH0KICB9Cn0sCiAgICBfYWRkTm9uVHdlZW5pbmdQVCA9IGZ1bmN0aW9uIF9hZGROb25Ud2VlbmluZ1BUKHBsdWdpbiwgdGFyZ2V0LCBwcm9wZXJ0eSwgYmVnaW5uaW5nLCBlbmQsIG9ubHlTZXRBdEVuZCkgewogIHZhciBwdCA9IG5ldyBQcm9wVHdlZW4ocGx1Z2luLl9wdCwgdGFyZ2V0LCBwcm9wZXJ0eSwgMCwgMSwgb25seVNldEF0RW5kID8gX3JlbmRlck5vblR3ZWVuaW5nVmFsdWVPbmx5QXRFbmQgOiBfcmVuZGVyTm9uVHdlZW5pbmdWYWx1ZSk7CiAgcGx1Z2luLl9wdCA9IHB0OwogIHB0LmIgPSBiZWdpbm5pbmc7CiAgcHQuZSA9IGVuZDsKCiAgcGx1Z2luLl9wcm9wcy5wdXNoKHByb3BlcnR5KTsKCiAgcmV0dXJuIHB0Owp9LAogICAgX25vbkNvbnZlcnRpYmxlVW5pdHMgPSB7CiAgZGVnOiAxLAogIHJhZDogMSwKICB0dXJuOiAxCn0sCiAgICAvL3Rha2VzIGEgc2luZ2xlIHZhbHVlIGxpa2UgMjBweCBhbmQgY29udmVydHMgaXQgdG8gdGhlIHVuaXQgc3BlY2lmaWVkLCBsaWtlICIlIiwgcmV0dXJuaW5nIG9ubHkgdGhlIG51bWVyaWMgYW1vdW50LgpfY29udmVydFRvVW5pdCA9IGZ1bmN0aW9uIF9jb252ZXJ0VG9Vbml0KHRhcmdldCwgcHJvcGVydHksIHZhbHVlLCB1bml0KSB7CiAgdmFyIGN1clZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMCwKICAgICAgY3VyVW5pdCA9ICh2YWx1ZSArICIiKS50cmltKCkuc3Vic3RyKChjdXJWYWx1ZSArICIiKS5sZW5ndGgpIHx8ICJweCIsCiAgICAgIC8vIHNvbWUgYnJvd3NlcnMgbGVhdmUgZXh0cmEgd2hpdGVzcGFjZSBhdCB0aGUgYmVnaW5uaW5nIG9mIENTUyB2YXJpYWJsZXMsIGhlbmNlIHRoZSBuZWVkIHRvIHRyaW0oKQogIHN0eWxlID0gX3RlbXBEaXYuc3R5bGUsCiAgICAgIGhvcml6b250YWwgPSBfaG9yaXpvbnRhbEV4cC50ZXN0KHByb3BlcnR5KSwKICAgICAgaXNSb290U1ZHID0gdGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gInN2ZyIsCiAgICAgIG1lYXN1cmVQcm9wZXJ0eSA9IChpc1Jvb3RTVkcgPyAiY2xpZW50IiA6ICJvZmZzZXQiKSArIChob3Jpem9udGFsID8gIldpZHRoIiA6ICJIZWlnaHQiKSwKICAgICAgYW1vdW50ID0gMTAwLAogICAgICB0b1BpeGVscyA9IHVuaXQgPT09ICJweCIsCiAgICAgIHRvUGVyY2VudCA9IHVuaXQgPT09ICIlIiwKICAgICAgcHgsCiAgICAgIHBhcmVudCwKICAgICAgY2FjaGUsCiAgICAgIGlzU1ZHOwoKICBpZiAodW5pdCA9PT0gY3VyVW5pdCB8fCAhY3VyVmFsdWUgfHwgX25vbkNvbnZlcnRpYmxlVW5pdHNbdW5pdF0gfHwgX25vbkNvbnZlcnRpYmxlVW5pdHNbY3VyVW5pdF0pIHsKICAgIHJldHVybiBjdXJWYWx1ZTsKICB9CgogIGN1clVuaXQgIT09ICJweCIgJiYgIXRvUGl4ZWxzICYmIChjdXJWYWx1ZSA9IF9jb252ZXJ0VG9Vbml0KHRhcmdldCwgcHJvcGVydHksIHZhbHVlLCAicHgiKSk7CiAgaXNTVkcgPSB0YXJnZXQuZ2V0Q1RNICYmIF9pc1NWRyh0YXJnZXQpOwoKICBpZiAoKHRvUGVyY2VudCB8fCBjdXJVbml0ID09PSAiJSIpICYmIChfdHJhbnNmb3JtUHJvcHNbcHJvcGVydHldIHx8IH5wcm9wZXJ0eS5pbmRleE9mKCJhZGl1cyIpKSkgewogICAgcHggPSBpc1NWRyA/IHRhcmdldC5nZXRCQm94KClbaG9yaXpvbnRhbCA/ICJ3aWR0aCIgOiAiaGVpZ2h0Il0gOiB0YXJnZXRbbWVhc3VyZVByb3BlcnR5XTsKICAgIHJldHVybiBfcm91bmQodG9QZXJjZW50ID8gY3VyVmFsdWUgLyBweCAqIGFtb3VudCA6IGN1clZhbHVlIC8gMTAwICogcHgpOwogIH0KCiAgc3R5bGVbaG9yaXpvbnRhbCA/ICJ3aWR0aCIgOiAiaGVpZ2h0Il0gPSBhbW91bnQgKyAodG9QaXhlbHMgPyBjdXJVbml0IDogdW5pdCk7CiAgcGFyZW50ID0gfnByb3BlcnR5LmluZGV4T2YoImFkaXVzIikgfHwgdW5pdCA9PT0gImVtIiAmJiB0YXJnZXQuYXBwZW5kQ2hpbGQgJiYgIWlzUm9vdFNWRyA/IHRhcmdldCA6IHRhcmdldC5wYXJlbnROb2RlOwoKICBpZiAoaXNTVkcpIHsKICAgIHBhcmVudCA9ICh0YXJnZXQub3duZXJTVkdFbGVtZW50IHx8IHt9KS5wYXJlbnROb2RlOwogIH0KCiAgaWYgKCFwYXJlbnQgfHwgcGFyZW50ID09PSBfZG9jIHx8ICFwYXJlbnQuYXBwZW5kQ2hpbGQpIHsKICAgIHBhcmVudCA9IF9kb2MuYm9keTsKICB9CgogIGNhY2hlID0gcGFyZW50Ll9nc2FwOwoKICBpZiAoY2FjaGUgJiYgdG9QZXJjZW50ICYmIGNhY2hlLndpZHRoICYmIGhvcml6b250YWwgJiYgY2FjaGUudGltZSA9PT0gX3RpY2tlci50aW1lKSB7CiAgICByZXR1cm4gX3JvdW5kKGN1clZhbHVlIC8gY2FjaGUud2lkdGggKiBhbW91bnQpOwogIH0gZWxzZSB7CiAgICAodG9QZXJjZW50IHx8IGN1clVuaXQgPT09ICIlIikgJiYgKHN0eWxlLnBvc2l0aW9uID0gX2dldENvbXB1dGVkUHJvcGVydHkodGFyZ2V0LCAicG9zaXRpb24iKSk7CiAgICBwYXJlbnQgPT09IHRhcmdldCAmJiAoc3R5bGUucG9zaXRpb24gPSAic3RhdGljIik7IC8vIGxpa2UgZm9yIGJvcmRlclJhZGl1cywgaWYgaXQncyBhICUgd2UgbXVzdCBoYXZlIGl0IHJlbGF0aXZlIHRvIHRoZSB0YXJnZXQgaXRzZWxmIGJ1dCB0aGF0IG1heSBub3QgaGF2ZSBwb3NpdGlvbjogcmVsYXRpdmUgb3IgcG9zaXRpb246IGFic29sdXRlIGluIHdoaWNoIGNhc2UgaXQnZCBnbyB1cCB0aGUgY2hhaW4gdW50aWwgaXQgZmluZHMgaXRzIG9mZnNldFBhcmVudCAoYmFkKS4gcG9zaXRpb246IHN0YXRpYyBwcm90ZWN0cyBhZ2FpbnN0IHRoYXQuCgogICAgcGFyZW50LmFwcGVuZENoaWxkKF90ZW1wRGl2KTsKICAgIHB4ID0gX3RlbXBEaXZbbWVhc3VyZVByb3BlcnR5XTsKICAgIHBhcmVudC5yZW1vdmVDaGlsZChfdGVtcERpdik7CiAgICBzdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CgogICAgaWYgKGhvcml6b250YWwgJiYgdG9QZXJjZW50KSB7CiAgICAgIGNhY2hlID0gX2dldENhY2hlKHBhcmVudCk7CiAgICAgIGNhY2hlLnRpbWUgPSBfdGlja2VyLnRpbWU7CiAgICAgIGNhY2hlLndpZHRoID0gcGFyZW50W21lYXN1cmVQcm9wZXJ0eV07CiAgICB9CiAgfQoKICByZXR1cm4gX3JvdW5kKHRvUGl4ZWxzID8gcHggKiBjdXJWYWx1ZSAvIGFtb3VudCA6IHB4ICYmIGN1clZhbHVlID8gYW1vdW50IC8gcHggKiBjdXJWYWx1ZSA6IDApOwp9LAogICAgX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdW5pdCwgdW5jYWNoZSkgewogIHZhciB2YWx1ZTsKICBfcGx1Z2luSW5pdHRlZCB8fCBfaW5pdENvcmUoKTsKCiAgaWYgKHByb3BlcnR5IGluIF9wcm9wZXJ0eUFsaWFzZXMgJiYgcHJvcGVydHkgIT09ICJ0cmFuc2Zvcm0iKSB7CiAgICBwcm9wZXJ0eSA9IF9wcm9wZXJ0eUFsaWFzZXNbcHJvcGVydHldOwoKICAgIGlmICh+cHJvcGVydHkuaW5kZXhPZigiLCIpKSB7CiAgICAgIHByb3BlcnR5ID0gcHJvcGVydHkuc3BsaXQoIiwiKVswXTsKICAgIH0KICB9CgogIGlmIChfdHJhbnNmb3JtUHJvcHNbcHJvcGVydHldICYmIHByb3BlcnR5ICE9PSAidHJhbnNmb3JtIikgewogICAgdmFsdWUgPSBfcGFyc2VUcmFuc2Zvcm0odGFyZ2V0LCB1bmNhY2hlKTsKICAgIHZhbHVlID0gcHJvcGVydHkgIT09ICJ0cmFuc2Zvcm1PcmlnaW4iID8gdmFsdWVbcHJvcGVydHldIDogdmFsdWUuc3ZnID8gdmFsdWUub3JpZ2luIDogX2ZpcnN0VHdvT25seShfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIF90cmFuc2Zvcm1PcmlnaW5Qcm9wKSkgKyAiICIgKyB2YWx1ZS56T3JpZ2luICsgInB4IjsKICB9IGVsc2UgewogICAgdmFsdWUgPSB0YXJnZXQuc3R5bGVbcHJvcGVydHldOwoKICAgIGlmICghdmFsdWUgfHwgdmFsdWUgPT09ICJhdXRvIiB8fCB1bmNhY2hlIHx8IH4odmFsdWUgKyAiIikuaW5kZXhPZigiY2FsYygiKSkgewogICAgICB2YWx1ZSA9IF9zcGVjaWFsUHJvcHNbcHJvcGVydHldICYmIF9zcGVjaWFsUHJvcHNbcHJvcGVydHldKHRhcmdldCwgcHJvcGVydHksIHVuaXQpIHx8IF9nZXRDb21wdXRlZFByb3BlcnR5KHRhcmdldCwgcHJvcGVydHkpIHx8IF9nZXRQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5KSB8fCAocHJvcGVydHkgPT09ICJvcGFjaXR5IiA/IDEgOiAwKTsgLy8gbm90ZTogc29tZSBicm93c2VycywgbGlrZSBGaXJlZm94LCBkb24ndCByZXBvcnQgYm9yZGVyUmFkaXVzIGNvcnJlY3RseSEgSW5zdGVhZCwgaXQgb25seSByZXBvcnRzIGV2ZXJ5IGNvcm5lciBsaWtlICBib3JkZXJUb3BMZWZ0UmFkaXVzCiAgICB9CiAgfQoKICByZXR1cm4gdW5pdCAmJiAhfih2YWx1ZSArICIiKS50cmltKCkuaW5kZXhPZigiICIpID8gX2NvbnZlcnRUb1VuaXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHVuaXQpICsgdW5pdCA6IHZhbHVlOwp9LAogICAgX3R3ZWVuQ29tcGxleENTU1N0cmluZyA9IGZ1bmN0aW9uIF90d2VlbkNvbXBsZXhDU1NTdHJpbmcodGFyZ2V0LCBwcm9wLCBzdGFydCwgZW5kKSB7CiAgLy9ub3RlOiB3ZSBjYWxsIF90d2VlbkNvbXBsZXhDU1NTdHJpbmcuY2FsbChwbHVnaW5JbnN0YW5jZS4uLikgdG8gZW5zdXJlIHRoYXQgaXQncyBzY29wZWQgcHJvcGVybHkuIFdlIG1heSBjYWxsIGl0IGZyb20gd2l0aGluIGEgcGx1Z2luIHRvbywgdGh1cyAidGhpcyIgd291bGQgcmVmZXIgdG8gdGhlIHBsdWdpbi4KICBpZiAoIXN0YXJ0IHx8IHN0YXJ0ID09PSAibm9uZSIpIHsKICAgIC8vIHNvbWUgYnJvd3NlcnMgbGlrZSBTYWZhcmkgYWN0dWFsbHkgUFJFRkVSIHRoZSBwcmVmaXhlZCBwcm9wZXJ0eSBhbmQgbWlzLXJlcG9ydCB0aGUgdW5wcmVmaXhlZCB2YWx1ZSBsaWtlIGNsaXBQYXRoIChCVUcpLiBJbiBvdGhlciB3b3JkcywgZXZlbiB0aG91Z2ggY2xpcFBhdGggZXhpc3RzIGluIHRoZSBzdHlsZSAoImNsaXBQYXRoIiBpbiB0YXJnZXQuc3R5bGUpIGFuZCBpdCdzIHNldCBpbiB0aGUgQ1NTIHByb3Blcmx5IChhbG9uZyB3aXRoIC13ZWJraXQtY2xpcC1wYXRoKSwgU2FmYXJpIHJlcG9ydHMgY2xpcFBhdGggYXMgIm5vbmUiIHdoZXJlYXMgV2Via2l0Q2xpcFBhdGggcmVwb3J0cyBhY2N1cmF0ZWx5IGxpa2UgImVsbGlwc2UoMTAwJSAwJSBhdCA1MCUgMCUpIiwgc28gaW4gdGhpcyBjYXNlIHdlIG11c3QgU1dJVENIIHRvIHVzaW5nIHRoZSBwcmVmaXhlZCBwcm9wZXJ0eSBpbnN0ZWFkLiBTZWUgaHR0cHM6Ly9ncmVlbnNvY2suY29tL2ZvcnVtcy90b3BpYy8xODMxMC1jbGlwcGF0aC1kb2VzbnQtd29yay1vbi1pb3MvCiAgICB2YXIgcCA9IF9jaGVja1Byb3BQcmVmaXgocHJvcCwgdGFyZ2V0LCAxKSwKICAgICAgICBzID0gcCAmJiBfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsIHAsIDEpOwoKICAgIGlmIChzICYmIHMgIT09IHN0YXJ0KSB7CiAgICAgIHByb3AgPSBwOwogICAgICBzdGFydCA9IHM7CiAgICB9IGVsc2UgaWYgKHByb3AgPT09ICJib3JkZXJDb2xvciIpIHsKICAgICAgc3RhcnQgPSBfZ2V0Q29tcHV0ZWRQcm9wZXJ0eSh0YXJnZXQsICJib3JkZXJUb3BDb2xvciIpOyAvLyBGaXJlZm94IGJ1ZzogYWx3YXlzIHJlcG9ydHMgImJvcmRlckNvbG9yIiBhcyAiIiwgc28gd2UgbXVzdCBmYWxsIGJhY2sgdG8gYm9yZGVyVG9wQ29sb3IuIFNlZSBodHRwczovL2dyZWVuc29jay5jb20vZm9ydW1zL3RvcGljLzI0NTgzLWhvdy10by1yZXR1cm4tY29sb3JzLXRoYXQtaS1oYWQtYWZ0ZXItcmV2ZXJzZS8KICAgIH0KICB9CgogIHZhciBwdCA9IG5ldyBQcm9wVHdlZW4odGhpcy5fcHQsIHRhcmdldC5zdHlsZSwgcHJvcCwgMCwgMSwgX3JlbmRlckNvbXBsZXhTdHJpbmcpLAogICAgICBpbmRleCA9IDAsCiAgICAgIG1hdGNoSW5kZXggPSAwLAogICAgICBhLAogICAgICByZXN1bHQsCiAgICAgIHN0YXJ0VmFsdWVzLAogICAgICBzdGFydE51bSwKICAgICAgY29sb3IsCiAgICAgIHN0YXJ0VmFsdWUsCiAgICAgIGVuZFZhbHVlLAogICAgICBlbmROdW0sCiAgICAgIGNodW5rLAogICAgICBlbmRVbml0LAogICAgICBzdGFydFVuaXQsCiAgICAgIHJlbGF0aXZlLAogICAgICBlbmRWYWx1ZXM7CiAgcHQuYiA9IHN0YXJ0OwogIHB0LmUgPSBlbmQ7CiAgc3RhcnQgKz0gIiI7IC8vZW5zdXJlIHZhbHVlcyBhcmUgc3RyaW5ncwoKICBlbmQgKz0gIiI7CgogIGlmIChlbmQgPT09ICJhdXRvIikgewogICAgdGFyZ2V0LnN0eWxlW3Byb3BdID0gZW5kOwogICAgZW5kID0gX2dldENvbXB1dGVkUHJvcGVydHkodGFyZ2V0LCBwcm9wKSB8fCBlbmQ7CiAgICB0YXJnZXQuc3R5bGVbcHJvcF0gPSBzdGFydDsKICB9CgogIGEgPSBbc3RhcnQsIGVuZF07CgogIF9jb2xvclN0cmluZ0ZpbHRlcihhKTsgLy9wYXNzIGFuIGFycmF5IHdpdGggdGhlIHN0YXJ0aW5nIGFuZCBlbmRpbmcgdmFsdWVzIGFuZCBsZXQgdGhlIGZpbHRlciBkbyB3aGF0ZXZlciBpdCBuZWVkcyB0byB0aGUgdmFsdWVzLiBJZiBjb2xvcnMgYXJlIGZvdW5kLCBpdCByZXR1cm5zIHRydWUgYW5kIHRoZW4gd2UgbXVzdCBtYXRjaCB3aGVyZSB0aGUgY29sb3Igc2hvd3MgdXAgb3JkZXItd2lzZSBiZWNhdXNlIGZvciB0aGluZ3MgbGlrZSBib3hTaGFkb3csIHNvbWV0aW1lcyB0aGUgYnJvd3NlciBwcm92aWRlcyB0aGUgY29tcHV0ZWQgdmFsdWVzIHdpdGggdGhlIGNvbG9yIEZJUlNULCBidXQgdGhlIHVzZXIgcHJvdmlkZXMgaXQgd2l0aCB0aGUgY29sb3IgTEFTVCwgc28gZmxpcCB0aGVtIGlmIG5lY2Vzc2FyeS4gU2FtZSBmb3IgZHJvcC1zaGFkb3coKS4KCgogIHN0YXJ0ID0gYVswXTsKICBlbmQgPSBhWzFdOwogIHN0YXJ0VmFsdWVzID0gc3RhcnQubWF0Y2goX251bVdpdGhVbml0RXhwKSB8fCBbXTsKICBlbmRWYWx1ZXMgPSBlbmQubWF0Y2goX251bVdpdGhVbml0RXhwKSB8fCBbXTsKCiAgaWYgKGVuZFZhbHVlcy5sZW5ndGgpIHsKICAgIHdoaWxlIChyZXN1bHQgPSBfbnVtV2l0aFVuaXRFeHAuZXhlYyhlbmQpKSB7CiAgICAgIGVuZFZhbHVlID0gcmVzdWx0WzBdOwogICAgICBjaHVuayA9IGVuZC5zdWJzdHJpbmcoaW5kZXgsIHJlc3VsdC5pbmRleCk7CgogICAgICBpZiAoY29sb3IpIHsKICAgICAgICBjb2xvciA9IChjb2xvciArIDEpICUgNTsKICAgICAgfSBlbHNlIGlmIChjaHVuay5zdWJzdHIoLTUpID09PSAicmdiYSgiIHx8IGNodW5rLnN1YnN0cigtNSkgPT09ICJoc2xhKCIpIHsKICAgICAgICBjb2xvciA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChlbmRWYWx1ZSAhPT0gKHN0YXJ0VmFsdWUgPSBzdGFydFZhbHVlc1ttYXRjaEluZGV4KytdIHx8ICIiKSkgewogICAgICAgIHN0YXJ0TnVtID0gcGFyc2VGbG9hdChzdGFydFZhbHVlKSB8fCAwOwogICAgICAgIHN0YXJ0VW5pdCA9IHN0YXJ0VmFsdWUuc3Vic3RyKChzdGFydE51bSArICIiKS5sZW5ndGgpOwogICAgICAgIHJlbGF0aXZlID0gZW5kVmFsdWUuY2hhckF0KDEpID09PSAiPSIgPyArKGVuZFZhbHVlLmNoYXJBdCgwKSArICIxIikgOiAwOwoKICAgICAgICBpZiAocmVsYXRpdmUpIHsKICAgICAgICAgIGVuZFZhbHVlID0gZW5kVmFsdWUuc3Vic3RyKDIpOwogICAgICAgIH0KCiAgICAgICAgZW5kTnVtID0gcGFyc2VGbG9hdChlbmRWYWx1ZSk7CiAgICAgICAgZW5kVW5pdCA9IGVuZFZhbHVlLnN1YnN0cigoZW5kTnVtICsgIiIpLmxlbmd0aCk7CiAgICAgICAgaW5kZXggPSBfbnVtV2l0aFVuaXRFeHAubGFzdEluZGV4IC0gZW5kVW5pdC5sZW5ndGg7CgogICAgICAgIGlmICghZW5kVW5pdCkgewogICAgICAgICAgLy9pZiBzb21ldGhpbmcgbGlrZSAicGVyc3BlY3RpdmU6MzAwIiBpcyBwYXNzZWQgaW4gYW5kIHdlIG11c3QgYWRkIGEgdW5pdCB0byB0aGUgZW5kCiAgICAgICAgICBlbmRVbml0ID0gZW5kVW5pdCB8fCBfY29uZmlnLnVuaXRzW3Byb3BdIHx8IHN0YXJ0VW5pdDsKCiAgICAgICAgICBpZiAoaW5kZXggPT09IGVuZC5sZW5ndGgpIHsKICAgICAgICAgICAgZW5kICs9IGVuZFVuaXQ7CiAgICAgICAgICAgIHB0LmUgKz0gZW5kVW5pdDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChzdGFydFVuaXQgIT09IGVuZFVuaXQpIHsKICAgICAgICAgIHN0YXJ0TnVtID0gX2NvbnZlcnRUb1VuaXQodGFyZ2V0LCBwcm9wLCBzdGFydFZhbHVlLCBlbmRVbml0KSB8fCAwOwogICAgICAgIH0gLy90aGVzZSBuZXN0ZWQgUHJvcFR3ZWVucyBhcmUgaGFuZGxlZCBpbiBhIHNwZWNpYWwgd2F5IC0gd2UnbGwgbmV2ZXIgYWN0dWFsbHkgY2FsbCBhIHJlbmRlciBvciBzZXR0ZXIgbWV0aG9kIG9uIHRoZW0uIFdlJ2xsIGp1c3QgbG9vcCB0aHJvdWdoIHRoZW0gaW4gdGhlIHBhcmVudCBjb21wbGV4IHN0cmluZyBQcm9wVHdlZW4ncyByZW5kZXIgbWV0aG9kLgoKCiAgICAgICAgcHQuX3B0ID0gewogICAgICAgICAgX25leHQ6IHB0Ll9wdCwKICAgICAgICAgIHA6IGNodW5rIHx8IG1hdGNoSW5kZXggPT09IDEgPyBjaHVuayA6ICIsIiwKICAgICAgICAgIC8vbm90ZTogU1ZHIHNwZWMgYWxsb3dzIG9taXNzaW9uIG9mIGNvbW1hL3NwYWNlIHdoZW4gYSBuZWdhdGl2ZSBzaWduIGlzIHdlZGdlZCBiZXR3ZWVuIHR3byBudW1iZXJzLCBsaWtlIDIuNS01LjMgaW5zdGVhZCBvZiAyLjUsLTUuMyBidXQgd2hlbiB0d2VlbmluZywgdGhlIG5lZ2F0aXZlIHZhbHVlIG1heSBzd2l0Y2ggdG8gcG9zaXRpdmUsIHNvIHdlIGluc2VydCB0aGUgY29tbWEganVzdCBpbiBjYXNlLgogICAgICAgICAgczogc3RhcnROdW0sCiAgICAgICAgICBjOiByZWxhdGl2ZSA/IHJlbGF0aXZlICogZW5kTnVtIDogZW5kTnVtIC0gc3RhcnROdW0sCiAgICAgICAgICBtOiBjb2xvciAmJiBjb2xvciA8IDQgfHwgcHJvcCA9PT0gInpJbmRleCIgPyBNYXRoLnJvdW5kIDogMAogICAgICAgIH07CiAgICAgIH0KICAgIH0KCiAgICBwdC5jID0gaW5kZXggPCBlbmQubGVuZ3RoID8gZW5kLnN1YnN0cmluZyhpbmRleCwgZW5kLmxlbmd0aCkgOiAiIjsgLy93ZSB1c2UgdGhlICJjIiBvZiB0aGUgUHJvcFR3ZWVuIHRvIHN0b3JlIHRoZSBmaW5hbCBwYXJ0IG9mIHRoZSBzdHJpbmcgKGFmdGVyIHRoZSBsYXN0IG51bWJlcikKICB9IGVsc2UgewogICAgcHQuciA9IHByb3AgPT09ICJkaXNwbGF5IiAmJiBlbmQgPT09ICJub25lIiA/IF9yZW5kZXJOb25Ud2VlbmluZ1ZhbHVlT25seUF0RW5kIDogX3JlbmRlck5vblR3ZWVuaW5nVmFsdWU7CiAgfQoKICBfcmVsRXhwLnRlc3QoZW5kKSAmJiAocHQuZSA9IDApOyAvL2lmIHRoZSBlbmQgc3RyaW5nIGNvbnRhaW5zIHJlbGF0aXZlIHZhbHVlcyBvciBkeW5hbWljIHJhbmRvbSguLi4pIHZhbHVlcywgZGVsZXRlIHRoZSBlbmQgaXQgc28gdGhhdCBvbiB0aGUgZmluYWwgcmVuZGVyIHdlIGRvbid0IGFjdHVhbGx5IHNldCBpdCB0byB0aGUgc3RyaW5nIHdpdGggKz0gb3IgLT0gY2hhcmFjdGVycyAoZm9yY2VzIGl0IHRvIHVzZSB0aGUgY2FsY3VsYXRlZCB2YWx1ZSkuCgogIHRoaXMuX3B0ID0gcHQ7IC8vc3RhcnQgdGhlIGxpbmtlZCBsaXN0IHdpdGggdGhpcyBuZXcgUHJvcFR3ZWVuLiBSZW1lbWJlciwgd2UgY2FsbCBfdHdlZW5Db21wbGV4Q1NTU3RyaW5nLmNhbGwocGx1Z2luSW5zdGFuY2UuLi4pIHRvIGVuc3VyZSB0aGF0IGl0J3Mgc2NvcGVkIHByb3Blcmx5LiBXZSBtYXkgY2FsbCBpdCBmcm9tIHdpdGhpbiBhbm90aGVyIHBsdWdpbiB0b28sIHRodXMgInRoaXMiIHdvdWxkIHJlZmVyIHRvIHRoZSBwbHVnaW4uCgogIHJldHVybiBwdDsKfSwKICAgIF9rZXl3b3JkVG9QZXJjZW50ID0gewogIHRvcDogIjAlIiwKICBib3R0b206ICIxMDAlIiwKICBsZWZ0OiAiMCUiLAogIHJpZ2h0OiAiMTAwJSIsCiAgY2VudGVyOiAiNTAlIgp9LAogICAgX2NvbnZlcnRLZXl3b3Jkc1RvUGVyY2VudGFnZXMgPSBmdW5jdGlvbiBfY29udmVydEtleXdvcmRzVG9QZXJjZW50YWdlcyh2YWx1ZSkgewogIHZhciBzcGxpdCA9IHZhbHVlLnNwbGl0KCIgIiksCiAgICAgIHggPSBzcGxpdFswXSwKICAgICAgeSA9IHNwbGl0WzFdIHx8ICI1MCUiOwoKICBpZiAoeCA9PT0gInRvcCIgfHwgeCA9PT0gImJvdHRvbSIgfHwgeSA9PT0gImxlZnQiIHx8IHkgPT09ICJyaWdodCIpIHsKICAgIC8vdGhlIHVzZXIgcHJvdmlkZWQgdGhlbSBpbiB0aGUgd3Jvbmcgb3JkZXIsIHNvIGZsaXAgdGhlbQogICAgdmFsdWUgPSB4OwogICAgeCA9IHk7CiAgICB5ID0gdmFsdWU7CiAgfQoKICBzcGxpdFswXSA9IF9rZXl3b3JkVG9QZXJjZW50W3hdIHx8IHg7CiAgc3BsaXRbMV0gPSBfa2V5d29yZFRvUGVyY2VudFt5XSB8fCB5OwogIHJldHVybiBzcGxpdC5qb2luKCIgIik7Cn0sCiAgICBfcmVuZGVyQ2xlYXJQcm9wcyA9IGZ1bmN0aW9uIF9yZW5kZXJDbGVhclByb3BzKHJhdGlvLCBkYXRhKSB7CiAgaWYgKGRhdGEudHdlZW4gJiYgZGF0YS50d2Vlbi5fdGltZSA9PT0gZGF0YS50d2Vlbi5fZHVyKSB7CiAgICB2YXIgdGFyZ2V0ID0gZGF0YS50LAogICAgICAgIHN0eWxlID0gdGFyZ2V0LnN0eWxlLAogICAgICAgIHByb3BzID0gZGF0YS51LAogICAgICAgIGNhY2hlID0gdGFyZ2V0Ll9nc2FwLAogICAgICAgIHByb3AsCiAgICAgICAgY2xlYXJUcmFuc2Zvcm1zLAogICAgICAgIGk7CgogICAgaWYgKHByb3BzID09PSAiYWxsIiB8fCBwcm9wcyA9PT0gdHJ1ZSkgewogICAgICBzdHlsZS5jc3NUZXh0ID0gIiI7CiAgICAgIGNsZWFyVHJhbnNmb3JtcyA9IDE7CiAgICB9IGVsc2UgewogICAgICBwcm9wcyA9IHByb3BzLnNwbGl0KCIsIik7CiAgICAgIGkgPSBwcm9wcy5sZW5ndGg7CgogICAgICB3aGlsZSAoLS1pID4gLTEpIHsKICAgICAgICBwcm9wID0gcHJvcHNbaV07CgogICAgICAgIGlmIChfdHJhbnNmb3JtUHJvcHNbcHJvcF0pIHsKICAgICAgICAgIGNsZWFyVHJhbnNmb3JtcyA9IDE7CiAgICAgICAgICBwcm9wID0gcHJvcCA9PT0gInRyYW5zZm9ybU9yaWdpbiIgPyBfdHJhbnNmb3JtT3JpZ2luUHJvcCA6IF90cmFuc2Zvcm1Qcm9wOwogICAgICAgIH0KCiAgICAgICAgX3JlbW92ZVByb3BlcnR5KHRhcmdldCwgcHJvcCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoY2xlYXJUcmFuc2Zvcm1zKSB7CiAgICAgIF9yZW1vdmVQcm9wZXJ0eSh0YXJnZXQsIF90cmFuc2Zvcm1Qcm9wKTsKCiAgICAgIGlmIChjYWNoZSkgewogICAgICAgIGNhY2hlLnN2ZyAmJiB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCJ0cmFuc2Zvcm0iKTsKCiAgICAgICAgX3BhcnNlVHJhbnNmb3JtKHRhcmdldCwgMSk7IC8vIGZvcmNlIGFsbCB0aGUgY2FjaGVkIHZhbHVlcyBiYWNrIHRvICJub3JtYWwiL2lkZW50aXR5LCBvdGhlcndpc2UgaWYgdGhlcmUncyBhbm90aGVyIHR3ZWVuIHRoYXQncyBhbHJlYWR5IHNldCB0byByZW5kZXIgdHJhbnNmb3JtcyBvbiB0aGlzIGVsZW1lbnQsIGl0IGNvdWxkIGRpc3BsYXkgdGhlIHdyb25nIHZhbHVlcy4KCgogICAgICAgIGNhY2hlLnVuY2FjaGUgPSAxOwogICAgICB9CiAgICB9CiAgfQp9LAogICAgLy8gbm90ZTogc3BlY2lhbFByb3BzIHNob3VsZCByZXR1cm4gMSBpZiAoYW5kIG9ubHkgaWYpIHRoZXkgaGF2ZSBhIG5vbi16ZXJvIHByaW9yaXR5LiBJdCBpbmRpY2F0ZXMgd2UgbmVlZCB0byBzb3J0IHRoZSBsaW5rZWQgbGlzdC4KX3NwZWNpYWxQcm9wcyA9IHsKICBjbGVhclByb3BzOiBmdW5jdGlvbiBjbGVhclByb3BzKHBsdWdpbiwgdGFyZ2V0LCBwcm9wZXJ0eSwgZW5kVmFsdWUsIHR3ZWVuKSB7CiAgICBpZiAodHdlZW4uZGF0YSAhPT0gImlzRnJvbVN0YXJ0IikgewogICAgICB2YXIgcHQgPSBwbHVnaW4uX3B0ID0gbmV3IFByb3BUd2VlbihwbHVnaW4uX3B0LCB0YXJnZXQsIHByb3BlcnR5LCAwLCAwLCBfcmVuZGVyQ2xlYXJQcm9wcyk7CiAgICAgIHB0LnUgPSBlbmRWYWx1ZTsKICAgICAgcHQucHIgPSAtMTA7CiAgICAgIHB0LnR3ZWVuID0gdHdlZW47CgogICAgICBwbHVnaW4uX3Byb3BzLnB1c2gocHJvcGVydHkpOwoKICAgICAgcmV0dXJuIDE7CiAgICB9CiAgfQogIC8qIGNsYXNzTmFtZSBmZWF0dXJlIChhYm91dCAwLjRrYiBnemlwcGVkKS4KICAsIGNsYXNzTmFtZShwbHVnaW4sIHRhcmdldCwgcHJvcGVydHksIGVuZFZhbHVlLCB0d2VlbikgewogIAlsZXQgX3JlbmRlckNsYXNzTmFtZSA9IChyYXRpbywgZGF0YSkgPT4gewogIAkJCWRhdGEuY3NzLnJlbmRlcihyYXRpbywgZGF0YS5jc3MpOwogIAkJCWlmICghcmF0aW8gfHwgcmF0aW8gPT09IDEpIHsKICAJCQkJbGV0IGlubGluZSA9IGRhdGEucm12LAogIAkJCQkJdGFyZ2V0ID0gZGF0YS50LAogIAkJCQkJcDsKICAJCQkJdGFyZ2V0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCByYXRpbyA/IGRhdGEuZSA6IGRhdGEuYik7CiAgCQkJCWZvciAocCBpbiBpbmxpbmUpIHsKICAJCQkJCV9yZW1vdmVQcm9wZXJ0eSh0YXJnZXQsIHApOwogIAkJCQl9CiAgCQkJfQogIAkJfSwKICAJCV9nZXRBbGxTdHlsZXMgPSAodGFyZ2V0KSA9PiB7CiAgCQkJbGV0IHN0eWxlcyA9IHt9LAogIAkJCQljb21wdXRlZCA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0KSwKICAJCQkJcDsKICAJCQlmb3IgKHAgaW4gY29tcHV0ZWQpIHsKICAJCQkJaWYgKGlzTmFOKHApICYmIHAgIT09ICJjc3NUZXh0IiAmJiBwICE9PSAibGVuZ3RoIikgewogIAkJCQkJc3R5bGVzW3BdID0gY29tcHV0ZWRbcF07CiAgCQkJCX0KICAJCQl9CiAgCQkJX3NldERlZmF1bHRzKHN0eWxlcywgX3BhcnNlVHJhbnNmb3JtKHRhcmdldCwgMSkpOwogIAkJCXJldHVybiBzdHlsZXM7CiAgCQl9LAogIAkJc3RhcnRDbGFzc0xpc3QgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpLAogIAkJc3R5bGUgPSB0YXJnZXQuc3R5bGUsCiAgCQljc3NUZXh0ID0gc3R5bGUuY3NzVGV4dCwKICAJCWNhY2hlID0gdGFyZ2V0Ll9nc2FwLAogIAkJY2xhc3NQVCA9IGNhY2hlLmNsYXNzUFQsCiAgCQlpbmxpbmVUb1JlbW92ZUF0RW5kID0ge30sCiAgCQlkYXRhID0ge3Q6dGFyZ2V0LCBwbHVnaW46cGx1Z2luLCBybXY6aW5saW5lVG9SZW1vdmVBdEVuZCwgYjpzdGFydENsYXNzTGlzdCwgZTooZW5kVmFsdWUuY2hhckF0KDEpICE9PSAiPSIpID8gZW5kVmFsdWUgOiBzdGFydENsYXNzTGlzdC5yZXBsYWNlKG5ldyBSZWdFeHAoIig/Olxcc3xeKSIgKyBlbmRWYWx1ZS5zdWJzdHIoMikgKyAiKD8hW1xcdy1dKSIpLCAiIikgKyAoKGVuZFZhbHVlLmNoYXJBdCgwKSA9PT0gIisiKSA/ICIgIiArIGVuZFZhbHVlLnN1YnN0cigyKSA6ICIiKX0sCiAgCQljaGFuZ2luZ1ZhcnMgPSB7fSwKICAJCXN0YXJ0VmFycyA9IF9nZXRBbGxTdHlsZXModGFyZ2V0KSwKICAJCXRyYW5zZm9ybVJlbGF0ZWQgPSAvKHRyYW5zZm9ybXxwZXJzcGVjdGl2ZSkvaSwKICAJCWVuZFZhcnMsIHA7CiAgCWlmIChjbGFzc1BUKSB7CiAgCQljbGFzc1BULnIoMSwgY2xhc3NQVC5kKTsKICAJCV9yZW1vdmVMaW5rZWRMaXN0SXRlbShjbGFzc1BULmQucGx1Z2luLCBjbGFzc1BULCAiX3B0Iik7CiAgCX0KICAJdGFyZ2V0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBkYXRhLmUpOwogIAllbmRWYXJzID0gX2dldEFsbFN0eWxlcyh0YXJnZXQsIHRydWUpOwogIAl0YXJnZXQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIHN0YXJ0Q2xhc3NMaXN0KTsKICAJZm9yIChwIGluIGVuZFZhcnMpIHsKICAJCWlmIChlbmRWYXJzW3BdICE9PSBzdGFydFZhcnNbcF0gJiYgIXRyYW5zZm9ybVJlbGF0ZWQudGVzdChwKSkgewogIAkJCWNoYW5naW5nVmFyc1twXSA9IGVuZFZhcnNbcF07CiAgCQkJaWYgKCFzdHlsZVtwXSAmJiBzdHlsZVtwXSAhPT0gIjAiKSB7CiAgCQkJCWlubGluZVRvUmVtb3ZlQXRFbmRbcF0gPSAxOwogIAkJCX0KICAJCX0KICAJfQogIAljYWNoZS5jbGFzc1BUID0gcGx1Z2luLl9wdCA9IG5ldyBQcm9wVHdlZW4ocGx1Z2luLl9wdCwgdGFyZ2V0LCAiY2xhc3NOYW1lIiwgMCwgMCwgX3JlbmRlckNsYXNzTmFtZSwgZGF0YSwgMCwgLTExKTsKICAJaWYgKHN0eWxlLmNzc1RleHQgIT09IGNzc1RleHQpIHsgLy9vbmx5IGFwcGx5IGlmIHRoaW5ncyBjaGFuZ2UuIE90aGVyd2lzZSwgaW4gY2FzZXMgbGlrZSBhIGJhY2tncm91bmQtaW1hZ2UgdGhhdCdzIHB1bGxlZCBkeW5hbWljYWxseSwgaXQgY291bGQgY2F1c2UgYSByZWZyZXNoLiBTZWUgaHR0cHM6Ly9ncmVlbnNvY2suY29tL2ZvcnVtcy90b3BpYy8yMDM2OC1wb3NzaWJsZS1nc2FwLWJ1Zy1zd2l0Y2hpbmctY2xhc3NuYW1lcy1pbi1jaHJvbWUvLgogIAkJc3R5bGUuY3NzVGV4dCA9IGNzc1RleHQ7IC8vd2UgcmVjb3JkZWQgY3NzVGV4dCBiZWZvcmUgd2Ugc3dhcHBlZCBjbGFzc2VzIGFuZCByYW4gX2dldEFsbFN0eWxlcygpIGJlY2F1c2UgaW4gY2FzZXMgd2hlbiBhIGNsYXNzTmFtZSB0d2VlbiBpcyBvdmVyd3JpdHRlbiwgd2UgcmVtb3ZlIGFsbCB0aGUgcmVsYXRlZCB0d2VlbmluZyBwcm9wZXJ0aWVzIGZyb20gdGhhdCBjbGFzcyBjaGFuZ2UgKG90aGVyd2lzZSBjbGFzcy1zcGVjaWZpYyBzdHVmZiBjYW4ndCBvdmVycmlkZSBwcm9wZXJ0aWVzIHdlJ3ZlIGRpcmVjdGx5IHNldCBvbiB0aGUgdGFyZ2V0J3Mgc3R5bGUgb2JqZWN0IGR1ZSB0byBzcGVjaWZpY2l0eSkuCiAgCX0KICAJX3BhcnNlVHJhbnNmb3JtKHRhcmdldCwgdHJ1ZSk7IC8vdG8gY2xlYXIgdGhlIGNhY2hpbmcgb2YgdHJhbnNmb3JtcwogIAlkYXRhLmNzcyA9IG5ldyBnc2FwLnBsdWdpbnMuY3NzKCk7CiAgCWRhdGEuY3NzLmluaXQodGFyZ2V0LCBjaGFuZ2luZ1ZhcnMsIHR3ZWVuKTsKICAJcGx1Z2luLl9wcm9wcy5wdXNoKC4uLmRhdGEuY3NzLl9wcm9wcyk7CiAgCXJldHVybiAxOwogIH0KICAqLwoKfSwKCi8qCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAqIFRSQU5TRk9STVMKICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICovCl9pZGVudGl0eTJETWF0cml4ID0gWzEsIDAsIDAsIDEsIDAsIDBdLAogICAgX3JvdGF0aW9uYWxQcm9wZXJ0aWVzID0ge30sCiAgICBfaXNOdWxsVHJhbnNmb3JtID0gZnVuY3Rpb24gX2lzTnVsbFRyYW5zZm9ybSh2YWx1ZSkgewogIHJldHVybiB2YWx1ZSA9PT0gIm1hdHJpeCgxLCAwLCAwLCAxLCAwLCAwKSIgfHwgdmFsdWUgPT09ICJub25lIiB8fCAhdmFsdWU7Cn0sCiAgICBfZ2V0Q29tcHV0ZWRUcmFuc2Zvcm1NYXRyaXhBc0FycmF5ID0gZnVuY3Rpb24gX2dldENvbXB1dGVkVHJhbnNmb3JtTWF0cml4QXNBcnJheSh0YXJnZXQpIHsKICB2YXIgbWF0cml4U3RyaW5nID0gX2dldENvbXB1dGVkUHJvcGVydHkodGFyZ2V0LCBfdHJhbnNmb3JtUHJvcCk7CgogIHJldHVybiBfaXNOdWxsVHJhbnNmb3JtKG1hdHJpeFN0cmluZykgPyBfaWRlbnRpdHkyRE1hdHJpeCA6IG1hdHJpeFN0cmluZy5zdWJzdHIoNykubWF0Y2goX251bUV4cCkubWFwKF9yb3VuZCk7Cn0sCiAgICBfZ2V0TWF0cml4ID0gZnVuY3Rpb24gX2dldE1hdHJpeCh0YXJnZXQsIGZvcmNlMkQpIHsKICB2YXIgY2FjaGUgPSB0YXJnZXQuX2dzYXAgfHwgX2dldENhY2hlKHRhcmdldCksCiAgICAgIHN0eWxlID0gdGFyZ2V0LnN0eWxlLAogICAgICBtYXRyaXggPSBfZ2V0Q29tcHV0ZWRUcmFuc2Zvcm1NYXRyaXhBc0FycmF5KHRhcmdldCksCiAgICAgIHBhcmVudCwKICAgICAgbmV4dFNpYmxpbmcsCiAgICAgIHRlbXAsCiAgICAgIGFkZGVkVG9ET007CgogIGlmIChjYWNoZS5zdmcgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZSgidHJhbnNmb3JtIikpIHsKICAgIHRlbXAgPSB0YXJnZXQudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKS5tYXRyaXg7IC8vZW5zdXJlcyB0aGF0IGV2ZW4gY29tcGxleCB2YWx1ZXMgbGlrZSAidHJhbnNsYXRlKDUwLDYwKSByb3RhdGUoMTM1LDAsMCkiIGFyZSBwYXJzZWQgYmVjYXVzZSBpdCBtYXNoZXMgaXQgaW50byBhIG1hdHJpeC4KCiAgICBtYXRyaXggPSBbdGVtcC5hLCB0ZW1wLmIsIHRlbXAuYywgdGVtcC5kLCB0ZW1wLmUsIHRlbXAuZl07CiAgICByZXR1cm4gbWF0cml4LmpvaW4oIiwiKSA9PT0gIjEsMCwwLDEsMCwwIiA/IF9pZGVudGl0eTJETWF0cml4IDogbWF0cml4OwogIH0gZWxzZSBpZiAobWF0cml4ID09PSBfaWRlbnRpdHkyRE1hdHJpeCAmJiAhdGFyZ2V0Lm9mZnNldFBhcmVudCAmJiB0YXJnZXQgIT09IF9kb2NFbGVtZW50ICYmICFjYWNoZS5zdmcpIHsKICAgIC8vbm90ZTogaWYgb2Zmc2V0UGFyZW50IGlzIG51bGwsIHRoYXQgbWVhbnMgdGhlIGVsZW1lbnQgaXNuJ3QgaW4gdGhlIG5vcm1hbCBkb2N1bWVudCBmbG93LCBsaWtlIGlmIGl0IGhhcyBkaXNwbGF5Om5vbmUgb3Igb25lIG9mIGl0cyBhbmNlc3RvcnMgaGFzIGRpc3BsYXk6bm9uZSkuIEZpcmVmb3ggcmV0dXJucyBudWxsIGZvciBnZXRDb21wdXRlZFN0eWxlKCkgaWYgdGhlIGVsZW1lbnQgaXMgaW4gYW4gaWZyYW1lIHRoYXQgaGFzIGRpc3BsYXk6bm9uZS4gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTQ4Mzk3CiAgICAvL2Jyb3dzZXJzIGRvbid0IHJlcG9ydCB0cmFuc2Zvcm1zIGFjY3VyYXRlbHkgdW5sZXNzIHRoZSBlbGVtZW50IGlzIGluIHRoZSBET00gYW5kIGhhcyBhIGRpc3BsYXkgdmFsdWUgdGhhdCdzIG5vdCAibm9uZSIuIEZpcmVmb3ggYW5kIE1pY3Jvc29mdCBicm93c2VycyBoYXZlIGEgcGFydGlhbCBidWcgd2hlcmUgdGhleSdsbCByZXBvcnQgdHJhbnNmb3JtcyBldmVuIGlmIGRpc3BsYXk6bm9uZSBCVVQgbm90IGFueSBwZXJjZW50YWdlLWJhc2VkIHZhbHVlcyBsaWtlIHRyYW5zbGF0ZSgtNTAlLCA4cHgpIHdpbGwgYmUgcmVwb3J0ZWQgYXMgaWYgaXQncyB0cmFuc2xhdGUoMCwgOHB4KS4KICAgIHRlbXAgPSBzdHlsZS5kaXNwbGF5OwogICAgc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICBwYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZTsKCiAgICBpZiAoIXBhcmVudCB8fCAhdGFyZ2V0Lm9mZnNldFBhcmVudCkgewogICAgICAvLyBub3RlOiBpbiAzLjMuMCB3ZSBzd2l0Y2hlZCB0YXJnZXQub2Zmc2V0UGFyZW50IHRvIF9kb2MuYm9keS5jb250YWlucyh0YXJnZXQpIHRvIGF2b2lkIFtzb21ldGltZXMgdW5uZWNlc3NhcnldIE11dGF0aW9uT2JzZXJ2ZXIgY2FsbHMgYnV0IHRoYXQgd2Fzbid0IGFkZXF1YXRlIGJlY2F1c2UgdGhlcmUgYXJlIGVkZ2UgY2FzZXMgd2hlcmUgbmVzdGVkIHBvc2l0aW9uOiBmaXhlZCBlbGVtZW50cyBuZWVkIHRvIGdldCByZXBhcmVudGVkIHRvIGFjY3VyYXRlbHkgc2Vuc2UgdHJhbnNmb3Jtcy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmVlbnNvY2svR1NBUC9pc3N1ZXMvMzg4IGFuZCBodHRwczovL2dpdGh1Yi5jb20vZ3JlZW5zb2NrL0dTQVAvaXNzdWVzLzM3NQogICAgICBhZGRlZFRvRE9NID0gMTsgLy9mbGFnCgogICAgICBuZXh0U2libGluZyA9IHRhcmdldC5uZXh0U2libGluZzsKCiAgICAgIF9kb2NFbGVtZW50LmFwcGVuZENoaWxkKHRhcmdldCk7IC8vd2UgbXVzdCBhZGQgaXQgdG8gdGhlIERPTSBpbiBvcmRlciB0byBnZXQgdmFsdWVzIHByb3Blcmx5CgogICAgfQoKICAgIG1hdHJpeCA9IF9nZXRDb21wdXRlZFRyYW5zZm9ybU1hdHJpeEFzQXJyYXkodGFyZ2V0KTsKICAgIHRlbXAgPyBzdHlsZS5kaXNwbGF5ID0gdGVtcCA6IF9yZW1vdmVQcm9wZXJ0eSh0YXJnZXQsICJkaXNwbGF5Iik7CgogICAgaWYgKGFkZGVkVG9ET00pIHsKICAgICAgbmV4dFNpYmxpbmcgPyBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRhcmdldCwgbmV4dFNpYmxpbmcpIDogcGFyZW50ID8gcGFyZW50LmFwcGVuZENoaWxkKHRhcmdldCkgOiBfZG9jRWxlbWVudC5yZW1vdmVDaGlsZCh0YXJnZXQpOwogICAgfQogIH0KCiAgcmV0dXJuIGZvcmNlMkQgJiYgbWF0cml4Lmxlbmd0aCA+IDYgPyBbbWF0cml4WzBdLCBtYXRyaXhbMV0sIG1hdHJpeFs0XSwgbWF0cml4WzVdLCBtYXRyaXhbMTJdLCBtYXRyaXhbMTNdXSA6IG1hdHJpeDsKfSwKICAgIF9hcHBseVNWR09yaWdpbiA9IGZ1bmN0aW9uIF9hcHBseVNWR09yaWdpbih0YXJnZXQsIG9yaWdpbiwgb3JpZ2luSXNBYnNvbHV0ZSwgc21vb3RoLCBtYXRyaXhBcnJheSwgcGx1Z2luVG9BZGRQcm9wVHdlZW5zVG8pIHsKICB2YXIgY2FjaGUgPSB0YXJnZXQuX2dzYXAsCiAgICAgIG1hdHJpeCA9IG1hdHJpeEFycmF5IHx8IF9nZXRNYXRyaXgodGFyZ2V0LCB0cnVlKSwKICAgICAgeE9yaWdpbk9sZCA9IGNhY2hlLnhPcmlnaW4gfHwgMCwKICAgICAgeU9yaWdpbk9sZCA9IGNhY2hlLnlPcmlnaW4gfHwgMCwKICAgICAgeE9mZnNldE9sZCA9IGNhY2hlLnhPZmZzZXQgfHwgMCwKICAgICAgeU9mZnNldE9sZCA9IGNhY2hlLnlPZmZzZXQgfHwgMCwKICAgICAgYSA9IG1hdHJpeFswXSwKICAgICAgYiA9IG1hdHJpeFsxXSwKICAgICAgYyA9IG1hdHJpeFsyXSwKICAgICAgZCA9IG1hdHJpeFszXSwKICAgICAgdHggPSBtYXRyaXhbNF0sCiAgICAgIHR5ID0gbWF0cml4WzVdLAogICAgICBvcmlnaW5TcGxpdCA9IG9yaWdpbi5zcGxpdCgiICIpLAogICAgICB4T3JpZ2luID0gcGFyc2VGbG9hdChvcmlnaW5TcGxpdFswXSkgfHwgMCwKICAgICAgeU9yaWdpbiA9IHBhcnNlRmxvYXQob3JpZ2luU3BsaXRbMV0pIHx8IDAsCiAgICAgIGJvdW5kcywKICAgICAgZGV0ZXJtaW5hbnQsCiAgICAgIHgsCiAgICAgIHk7CgogIGlmICghb3JpZ2luSXNBYnNvbHV0ZSkgewogICAgYm91bmRzID0gX2dldEJCb3godGFyZ2V0KTsKICAgIHhPcmlnaW4gPSBib3VuZHMueCArICh+b3JpZ2luU3BsaXRbMF0uaW5kZXhPZigiJSIpID8geE9yaWdpbiAvIDEwMCAqIGJvdW5kcy53aWR0aCA6IHhPcmlnaW4pOwogICAgeU9yaWdpbiA9IGJvdW5kcy55ICsgKH4ob3JpZ2luU3BsaXRbMV0gfHwgb3JpZ2luU3BsaXRbMF0pLmluZGV4T2YoIiUiKSA/IHlPcmlnaW4gLyAxMDAgKiBib3VuZHMuaGVpZ2h0IDogeU9yaWdpbik7CiAgfSBlbHNlIGlmIChtYXRyaXggIT09IF9pZGVudGl0eTJETWF0cml4ICYmIChkZXRlcm1pbmFudCA9IGEgKiBkIC0gYiAqIGMpKSB7CiAgICAvL2lmIGl0J3MgemVybyAobGlrZSBpZiBzY2FsZVggYW5kIHNjYWxlWSBhcmUgemVybyksIHNraXAgaXQgdG8gYXZvaWQgZXJyb3JzIHdpdGggZGl2aWRpbmcgYnkgemVyby4KICAgIHggPSB4T3JpZ2luICogKGQgLyBkZXRlcm1pbmFudCkgKyB5T3JpZ2luICogKC1jIC8gZGV0ZXJtaW5hbnQpICsgKGMgKiB0eSAtIGQgKiB0eCkgLyBkZXRlcm1pbmFudDsKICAgIHkgPSB4T3JpZ2luICogKC1iIC8gZGV0ZXJtaW5hbnQpICsgeU9yaWdpbiAqIChhIC8gZGV0ZXJtaW5hbnQpIC0gKGEgKiB0eSAtIGIgKiB0eCkgLyBkZXRlcm1pbmFudDsKICAgIHhPcmlnaW4gPSB4OwogICAgeU9yaWdpbiA9IHk7CiAgfQoKICBpZiAoc21vb3RoIHx8IHNtb290aCAhPT0gZmFsc2UgJiYgY2FjaGUuc21vb3RoKSB7CiAgICB0eCA9IHhPcmlnaW4gLSB4T3JpZ2luT2xkOwogICAgdHkgPSB5T3JpZ2luIC0geU9yaWdpbk9sZDsKICAgIGNhY2hlLnhPZmZzZXQgPSB4T2Zmc2V0T2xkICsgKHR4ICogYSArIHR5ICogYykgLSB0eDsKICAgIGNhY2hlLnlPZmZzZXQgPSB5T2Zmc2V0T2xkICsgKHR4ICogYiArIHR5ICogZCkgLSB0eTsKICB9IGVsc2UgewogICAgY2FjaGUueE9mZnNldCA9IGNhY2hlLnlPZmZzZXQgPSAwOwogIH0KCiAgY2FjaGUueE9yaWdpbiA9IHhPcmlnaW47CiAgY2FjaGUueU9yaWdpbiA9IHlPcmlnaW47CiAgY2FjaGUuc21vb3RoID0gISFzbW9vdGg7CiAgY2FjaGUub3JpZ2luID0gb3JpZ2luOwogIGNhY2hlLm9yaWdpbklzQWJzb2x1dGUgPSAhIW9yaWdpbklzQWJzb2x1dGU7CiAgdGFyZ2V0LnN0eWxlW190cmFuc2Zvcm1PcmlnaW5Qcm9wXSA9ICIwcHggMHB4IjsgLy9vdGhlcndpc2UsIGlmIHNvbWVvbmUgc2V0cyAgYW4gb3JpZ2luIHZpYSBDU1MsIGl0IHdpbGwgbGlrZWx5IGludGVyZmVyZSB3aXRoIHRoZSBTVkcgdHJhbnNmb3JtIGF0dHJpYnV0ZSBvbmVzIChiZWNhdXNlIHJlbWVtYmVyLCB3ZSdyZSBiYWtpbmcgdGhlIG9yaWdpbiBpbnRvIHRoZSBtYXRyaXgoKSB2YWx1ZSkuCgogIGlmIChwbHVnaW5Ub0FkZFByb3BUd2VlbnNUbykgewogICAgX2FkZE5vblR3ZWVuaW5nUFQocGx1Z2luVG9BZGRQcm9wVHdlZW5zVG8sIGNhY2hlLCAieE9yaWdpbiIsIHhPcmlnaW5PbGQsIHhPcmlnaW4pOwoKICAgIF9hZGROb25Ud2VlbmluZ1BUKHBsdWdpblRvQWRkUHJvcFR3ZWVuc1RvLCBjYWNoZSwgInlPcmlnaW4iLCB5T3JpZ2luT2xkLCB5T3JpZ2luKTsKCiAgICBfYWRkTm9uVHdlZW5pbmdQVChwbHVnaW5Ub0FkZFByb3BUd2VlbnNUbywgY2FjaGUsICJ4T2Zmc2V0IiwgeE9mZnNldE9sZCwgY2FjaGUueE9mZnNldCk7CgogICAgX2FkZE5vblR3ZWVuaW5nUFQocGx1Z2luVG9BZGRQcm9wVHdlZW5zVG8sIGNhY2hlLCAieU9mZnNldCIsIHlPZmZzZXRPbGQsIGNhY2hlLnlPZmZzZXQpOwogIH0KCiAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgiZGF0YS1zdmctb3JpZ2luIiwgeE9yaWdpbiArICIgIiArIHlPcmlnaW4pOwp9LAogICAgX3BhcnNlVHJhbnNmb3JtID0gZnVuY3Rpb24gX3BhcnNlVHJhbnNmb3JtKHRhcmdldCwgdW5jYWNoZSkgewogIHZhciBjYWNoZSA9IHRhcmdldC5fZ3NhcCB8fCBuZXcgR1NDYWNoZSh0YXJnZXQpOwoKICBpZiAoIngiIGluIGNhY2hlICYmICF1bmNhY2hlICYmICFjYWNoZS51bmNhY2hlKSB7CiAgICByZXR1cm4gY2FjaGU7CiAgfQoKICB2YXIgc3R5bGUgPSB0YXJnZXQuc3R5bGUsCiAgICAgIGludmVydGVkU2NhbGVYID0gY2FjaGUuc2NhbGVYIDwgMCwKICAgICAgcHggPSAicHgiLAogICAgICBkZWcgPSAiZGVnIiwKICAgICAgb3JpZ2luID0gX2dldENvbXB1dGVkUHJvcGVydHkodGFyZ2V0LCBfdHJhbnNmb3JtT3JpZ2luUHJvcCkgfHwgIjAiLAogICAgICB4LAogICAgICB5LAogICAgICB6LAogICAgICBzY2FsZVgsCiAgICAgIHNjYWxlWSwKICAgICAgcm90YXRpb24sCiAgICAgIHJvdGF0aW9uWCwKICAgICAgcm90YXRpb25ZLAogICAgICBza2V3WCwKICAgICAgc2tld1ksCiAgICAgIHBlcnNwZWN0aXZlLAogICAgICB4T3JpZ2luLAogICAgICB5T3JpZ2luLAogICAgICBtYXRyaXgsCiAgICAgIGFuZ2xlLAogICAgICBjb3MsCiAgICAgIHNpbiwKICAgICAgYSwKICAgICAgYiwKICAgICAgYywKICAgICAgZCwKICAgICAgYTEyLAogICAgICBhMjIsCiAgICAgIHQxLAogICAgICB0MiwKICAgICAgdDMsCiAgICAgIGExMywKICAgICAgYTIzLAogICAgICBhMzMsCiAgICAgIGE0MiwKICAgICAgYTQzLAogICAgICBhMzI7CiAgeCA9IHkgPSB6ID0gcm90YXRpb24gPSByb3RhdGlvblggPSByb3RhdGlvblkgPSBza2V3WCA9IHNrZXdZID0gcGVyc3BlY3RpdmUgPSAwOwogIHNjYWxlWCA9IHNjYWxlWSA9IDE7CiAgY2FjaGUuc3ZnID0gISEodGFyZ2V0LmdldENUTSAmJiBfaXNTVkcodGFyZ2V0KSk7CiAgbWF0cml4ID0gX2dldE1hdHJpeCh0YXJnZXQsIGNhY2hlLnN2Zyk7CgogIGlmIChjYWNoZS5zdmcpIHsKICAgIHQxID0gKCFjYWNoZS51bmNhY2hlIHx8IG9yaWdpbiA9PT0gIjBweCAwcHgiKSAmJiAhdW5jYWNoZSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKCJkYXRhLXN2Zy1vcmlnaW4iKTsgLy8gaWYgb3JpZ2luIGlzIDAsMCBhbmQgY2FjaGUudW5jYWNoZSBpcyB0cnVlLCBsZXQgdGhlIHJlY29yZGVkIGRhdGEtc3ZnLW9yaWdpbiBzdGF5LiBPdGhlcndpc2UsIHdoZW5ldmVyIHdlIHNldCBjYWNoZS51bmNhY2hlIHRvIHRydWUsIHdlJ2QgbmVlZCB0byBzZXQgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSAoY2FjaGUueE9yaWdpbiAtIGJib3gueCkgKyAicHggIiArIChjYWNoZS55T3JpZ2luIC0gYmJveC55KSArICJweCIuIFJlbWVtYmVyLCB0byB3b3JrIGFyb3VuZCBicm93c2VyIGluY29uc2lzdGVuY2llcyB3ZSBhbHdheXMgZm9yY2UgU1ZHIGVsZW1lbnRzJyB0cmFuc2Zvcm1PcmlnaW4gdG8gMCwwIGFuZCBvZmZzZXQgdGhlIHRyYW5zbGF0aW9uIGFjY29yZGluZ2x5LgoKICAgIF9hcHBseVNWR09yaWdpbih0YXJnZXQsIHQxIHx8IG9yaWdpbiwgISF0MSB8fCBjYWNoZS5vcmlnaW5Jc0Fic29sdXRlLCBjYWNoZS5zbW9vdGggIT09IGZhbHNlLCBtYXRyaXgpOwogIH0KCiAgeE9yaWdpbiA9IGNhY2hlLnhPcmlnaW4gfHwgMDsKICB5T3JpZ2luID0gY2FjaGUueU9yaWdpbiB8fCAwOwoKICBpZiAobWF0cml4ICE9PSBfaWRlbnRpdHkyRE1hdHJpeCkgewogICAgYSA9IG1hdHJpeFswXTsgLy9hMTEKCiAgICBiID0gbWF0cml4WzFdOyAvL2EyMQoKICAgIGMgPSBtYXRyaXhbMl07IC8vYTMxCgogICAgZCA9IG1hdHJpeFszXTsgLy9hNDEKCiAgICB4ID0gYTEyID0gbWF0cml4WzRdOwogICAgeSA9IGEyMiA9IG1hdHJpeFs1XTsgLy8yRCBtYXRyaXgKCiAgICBpZiAobWF0cml4Lmxlbmd0aCA9PT0gNikgewogICAgICBzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYik7CiAgICAgIHNjYWxlWSA9IE1hdGguc3FydChkICogZCArIGMgKiBjKTsKICAgICAgcm90YXRpb24gPSBhIHx8IGIgPyBfYXRhbjIoYiwgYSkgKiBfUkFEMkRFRyA6IDA7IC8vbm90ZTogaWYgc2NhbGVYIGlzIDAsIHdlIGNhbm5vdCBhY2N1cmF0ZWx5IG1lYXN1cmUgcm90YXRpb24uIFNhbWUgZm9yIHNrZXdYIHdpdGggYSBzY2FsZVkgb2YgMC4gVGhlcmVmb3JlLCB3ZSBkZWZhdWx0IHRvIHRoZSBwcmV2aW91c2x5IHJlY29yZGVkIHZhbHVlIChvciB6ZXJvIGlmIHRoYXQgZG9lc24ndCBleGlzdCkuCgogICAgICBza2V3WCA9IGMgfHwgZCA/IF9hdGFuMihjLCBkKSAqIF9SQUQyREVHICsgcm90YXRpb24gOiAwOwogICAgICBza2V3WCAmJiAoc2NhbGVZICo9IE1hdGguYWJzKE1hdGguY29zKHNrZXdYICogX0RFRzJSQUQpKSk7CgogICAgICBpZiAoY2FjaGUuc3ZnKSB7CiAgICAgICAgeCAtPSB4T3JpZ2luIC0gKHhPcmlnaW4gKiBhICsgeU9yaWdpbiAqIGMpOwogICAgICAgIHkgLT0geU9yaWdpbiAtICh4T3JpZ2luICogYiArIHlPcmlnaW4gKiBkKTsKICAgICAgfSAvLzNEIG1hdHJpeAoKICAgIH0gZWxzZSB7CiAgICAgIGEzMiA9IG1hdHJpeFs2XTsKICAgICAgYTQyID0gbWF0cml4WzddOwogICAgICBhMTMgPSBtYXRyaXhbOF07CiAgICAgIGEyMyA9IG1hdHJpeFs5XTsKICAgICAgYTMzID0gbWF0cml4WzEwXTsKICAgICAgYTQzID0gbWF0cml4WzExXTsKICAgICAgeCA9IG1hdHJpeFsxMl07CiAgICAgIHkgPSBtYXRyaXhbMTNdOwogICAgICB6ID0gbWF0cml4WzE0XTsKICAgICAgYW5nbGUgPSBfYXRhbjIoYTMyLCBhMzMpOwogICAgICByb3RhdGlvblggPSBhbmdsZSAqIF9SQUQyREVHOyAvL3JvdGF0aW9uWAoKICAgICAgaWYgKGFuZ2xlKSB7CiAgICAgICAgY29zID0gTWF0aC5jb3MoLWFuZ2xlKTsKICAgICAgICBzaW4gPSBNYXRoLnNpbigtYW5nbGUpOwogICAgICAgIHQxID0gYTEyICogY29zICsgYTEzICogc2luOwogICAgICAgIHQyID0gYTIyICogY29zICsgYTIzICogc2luOwogICAgICAgIHQzID0gYTMyICogY29zICsgYTMzICogc2luOwogICAgICAgIGExMyA9IGExMiAqIC1zaW4gKyBhMTMgKiBjb3M7CiAgICAgICAgYTIzID0gYTIyICogLXNpbiArIGEyMyAqIGNvczsKICAgICAgICBhMzMgPSBhMzIgKiAtc2luICsgYTMzICogY29zOwogICAgICAgIGE0MyA9IGE0MiAqIC1zaW4gKyBhNDMgKiBjb3M7CiAgICAgICAgYTEyID0gdDE7CiAgICAgICAgYTIyID0gdDI7CiAgICAgICAgYTMyID0gdDM7CiAgICAgIH0gLy9yb3RhdGlvblkKCgogICAgICBhbmdsZSA9IF9hdGFuMigtYywgYTMzKTsKICAgICAgcm90YXRpb25ZID0gYW5nbGUgKiBfUkFEMkRFRzsKCiAgICAgIGlmIChhbmdsZSkgewogICAgICAgIGNvcyA9IE1hdGguY29zKC1hbmdsZSk7CiAgICAgICAgc2luID0gTWF0aC5zaW4oLWFuZ2xlKTsKICAgICAgICB0MSA9IGEgKiBjb3MgLSBhMTMgKiBzaW47CiAgICAgICAgdDIgPSBiICogY29zIC0gYTIzICogc2luOwogICAgICAgIHQzID0gYyAqIGNvcyAtIGEzMyAqIHNpbjsKICAgICAgICBhNDMgPSBkICogc2luICsgYTQzICogY29zOwogICAgICAgIGEgPSB0MTsKICAgICAgICBiID0gdDI7CiAgICAgICAgYyA9IHQzOwogICAgICB9IC8vcm90YXRpb25aCgoKICAgICAgYW5nbGUgPSBfYXRhbjIoYiwgYSk7CiAgICAgIHJvdGF0aW9uID0gYW5nbGUgKiBfUkFEMkRFRzsKCiAgICAgIGlmIChhbmdsZSkgewogICAgICAgIGNvcyA9IE1hdGguY29zKGFuZ2xlKTsKICAgICAgICBzaW4gPSBNYXRoLnNpbihhbmdsZSk7CiAgICAgICAgdDEgPSBhICogY29zICsgYiAqIHNpbjsKICAgICAgICB0MiA9IGExMiAqIGNvcyArIGEyMiAqIHNpbjsKICAgICAgICBiID0gYiAqIGNvcyAtIGEgKiBzaW47CiAgICAgICAgYTIyID0gYTIyICogY29zIC0gYTEyICogc2luOwogICAgICAgIGEgPSB0MTsKICAgICAgICBhMTIgPSB0MjsKICAgICAgfQoKICAgICAgaWYgKHJvdGF0aW9uWCAmJiBNYXRoLmFicyhyb3RhdGlvblgpICsgTWF0aC5hYnMocm90YXRpb24pID4gMzU5LjkpIHsKICAgICAgICAvL3doZW4gcm90YXRpb25ZIGlzIHNldCwgaXQgd2lsbCBvZnRlbiBiZSBwYXJzZWQgYXMgMTgwIGRlZ3JlZXMgZGlmZmVyZW50IHRoYW4gaXQgc2hvdWxkIGJlLCBhbmQgcm90YXRpb25YIGFuZCByb3RhdGlvbiBib3RoIGJlaW5nIDE4MCAoaXQgbG9va3MgdGhlIHNhbWUpLCBzbyB3ZSBhZGp1c3QgZm9yIHRoYXQgaGVyZS4KICAgICAgICByb3RhdGlvblggPSByb3RhdGlvbiA9IDA7CiAgICAgICAgcm90YXRpb25ZID0gMTgwIC0gcm90YXRpb25ZOwogICAgICB9CgogICAgICBzY2FsZVggPSBfcm91bmQoTWF0aC5zcXJ0KGEgKiBhICsgYiAqIGIgKyBjICogYykpOwogICAgICBzY2FsZVkgPSBfcm91bmQoTWF0aC5zcXJ0KGEyMiAqIGEyMiArIGEzMiAqIGEzMikpOwogICAgICBhbmdsZSA9IF9hdGFuMihhMTIsIGEyMik7CiAgICAgIHNrZXdYID0gTWF0aC5hYnMoYW5nbGUpID4gMC4wMDAyID8gYW5nbGUgKiBfUkFEMkRFRyA6IDA7CiAgICAgIHBlcnNwZWN0aXZlID0gYTQzID8gMSAvIChhNDMgPCAwID8gLWE0MyA6IGE0MykgOiAwOwogICAgfQoKICAgIGlmIChjYWNoZS5zdmcpIHsKICAgICAgLy9zZW5zZSBpZiB0aGVyZSBhcmUgQ1NTIHRyYW5zZm9ybXMgYXBwbGllZCBvbiBhbiBTVkcgZWxlbWVudCBpbiB3aGljaCBjYXNlIHdlIG11c3Qgb3ZlcndyaXRlIHRoZW0gd2hlbiByZW5kZXJpbmcuIFRoZSB0cmFuc2Zvcm0gYXR0cmlidXRlIGlzIG1vcmUgcmVsaWFibGUgY3Jvc3MtYnJvd3NlciwgYnV0IHdlIGNhbid0IGp1c3QgcmVtb3ZlIHRoZSBDU1Mgb25lcyBiZWNhdXNlIHRoZXkgbWF5IGJlIGFwcGxpZWQgaW4gYSBDU1MgcnVsZSBzb21ld2hlcmUgKG5vdCBqdXN0IGlubGluZSkuCiAgICAgIHQxID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgidHJhbnNmb3JtIik7CiAgICAgIGNhY2hlLmZvcmNlQ1NTID0gdGFyZ2V0LnNldEF0dHJpYnV0ZSgidHJhbnNmb3JtIiwgIiIpIHx8ICFfaXNOdWxsVHJhbnNmb3JtKF9nZXRDb21wdXRlZFByb3BlcnR5KHRhcmdldCwgX3RyYW5zZm9ybVByb3ApKTsKICAgICAgdDEgJiYgdGFyZ2V0LnNldEF0dHJpYnV0ZSgidHJhbnNmb3JtIiwgdDEpOwogICAgfQogIH0KCiAgaWYgKE1hdGguYWJzKHNrZXdYKSA+IDkwICYmIE1hdGguYWJzKHNrZXdYKSA8IDI3MCkgewogICAgaWYgKGludmVydGVkU2NhbGVYKSB7CiAgICAgIHNjYWxlWCAqPSAtMTsKICAgICAgc2tld1ggKz0gcm90YXRpb24gPD0gMCA/IDE4MCA6IC0xODA7CiAgICAgIHJvdGF0aW9uICs9IHJvdGF0aW9uIDw9IDAgPyAxODAgOiAtMTgwOwogICAgfSBlbHNlIHsKICAgICAgc2NhbGVZICo9IC0xOwogICAgICBza2V3WCArPSBza2V3WCA8PSAwID8gMTgwIDogLTE4MDsKICAgIH0KICB9CgogIGNhY2hlLnggPSB4IC0gKChjYWNoZS54UGVyY2VudCA9IHggJiYgKGNhY2hlLnhQZXJjZW50IHx8IChNYXRoLnJvdW5kKHRhcmdldC5vZmZzZXRXaWR0aCAvIDIpID09PSBNYXRoLnJvdW5kKC14KSA/IC01MCA6IDApKSkgPyB0YXJnZXQub2Zmc2V0V2lkdGggKiBjYWNoZS54UGVyY2VudCAvIDEwMCA6IDApICsgcHg7CiAgY2FjaGUueSA9IHkgLSAoKGNhY2hlLnlQZXJjZW50ID0geSAmJiAoY2FjaGUueVBlcmNlbnQgfHwgKE1hdGgucm91bmQodGFyZ2V0Lm9mZnNldEhlaWdodCAvIDIpID09PSBNYXRoLnJvdW5kKC15KSA/IC01MCA6IDApKSkgPyB0YXJnZXQub2Zmc2V0SGVpZ2h0ICogY2FjaGUueVBlcmNlbnQgLyAxMDAgOiAwKSArIHB4OwogIGNhY2hlLnogPSB6ICsgcHg7CiAgY2FjaGUuc2NhbGVYID0gX3JvdW5kKHNjYWxlWCk7CiAgY2FjaGUuc2NhbGVZID0gX3JvdW5kKHNjYWxlWSk7CiAgY2FjaGUucm90YXRpb24gPSBfcm91bmQocm90YXRpb24pICsgZGVnOwogIGNhY2hlLnJvdGF0aW9uWCA9IF9yb3VuZChyb3RhdGlvblgpICsgZGVnOwogIGNhY2hlLnJvdGF0aW9uWSA9IF9yb3VuZChyb3RhdGlvblkpICsgZGVnOwogIGNhY2hlLnNrZXdYID0gc2tld1ggKyBkZWc7CiAgY2FjaGUuc2tld1kgPSBza2V3WSArIGRlZzsKICBjYWNoZS50cmFuc2Zvcm1QZXJzcGVjdGl2ZSA9IHBlcnNwZWN0aXZlICsgcHg7CgogIGlmIChjYWNoZS56T3JpZ2luID0gcGFyc2VGbG9hdChvcmlnaW4uc3BsaXQoIiAiKVsyXSkgfHwgMCkgewogICAgc3R5bGVbX3RyYW5zZm9ybU9yaWdpblByb3BdID0gX2ZpcnN0VHdvT25seShvcmlnaW4pOwogIH0KCiAgY2FjaGUueE9mZnNldCA9IGNhY2hlLnlPZmZzZXQgPSAwOwogIGNhY2hlLmZvcmNlM0QgPSBfY29uZmlnLmZvcmNlM0Q7CiAgY2FjaGUucmVuZGVyVHJhbnNmb3JtID0gY2FjaGUuc3ZnID8gX3JlbmRlclNWR1RyYW5zZm9ybXMgOiBfc3VwcG9ydHMzRCA/IF9yZW5kZXJDU1NUcmFuc2Zvcm1zIDogX3JlbmRlck5vbjNEVHJhbnNmb3JtczsKICBjYWNoZS51bmNhY2hlID0gMDsKICByZXR1cm4gY2FjaGU7Cn0sCiAgICBfZmlyc3RUd29Pbmx5ID0gZnVuY3Rpb24gX2ZpcnN0VHdvT25seSh2YWx1ZSkgewogIHJldHVybiAodmFsdWUgPSB2YWx1ZS5zcGxpdCgiICIpKVswXSArICIgIiArIHZhbHVlWzFdOwp9LAogICAgLy9mb3IgaGFuZGxpbmcgdHJhbnNmb3JtT3JpZ2luIHZhbHVlcywgc3RyaXBwaW5nIG91dCB0aGUgM3JkIGRpbWVuc2lvbgpfYWRkUHhUcmFuc2xhdGUgPSBmdW5jdGlvbiBfYWRkUHhUcmFuc2xhdGUodGFyZ2V0LCBzdGFydCwgdmFsdWUpIHsKICB2YXIgdW5pdCA9IGdldFVuaXQoc3RhcnQpOwogIHJldHVybiBfcm91bmQocGFyc2VGbG9hdChzdGFydCkgKyBwYXJzZUZsb2F0KF9jb252ZXJ0VG9Vbml0KHRhcmdldCwgIngiLCB2YWx1ZSArICJweCIsIHVuaXQpKSkgKyB1bml0Owp9LAogICAgX3JlbmRlck5vbjNEVHJhbnNmb3JtcyA9IGZ1bmN0aW9uIF9yZW5kZXJOb24zRFRyYW5zZm9ybXMocmF0aW8sIGNhY2hlKSB7CiAgY2FjaGUueiA9ICIwcHgiOwogIGNhY2hlLnJvdGF0aW9uWSA9IGNhY2hlLnJvdGF0aW9uWCA9ICIwZGVnIjsKICBjYWNoZS5mb3JjZTNEID0gMDsKCiAgX3JlbmRlckNTU1RyYW5zZm9ybXMocmF0aW8sIGNhY2hlKTsKfSwKICAgIF96ZXJvRGVnID0gIjBkZWciLAogICAgX3plcm9QeCA9ICIwcHgiLAogICAgX2VuZFBhcmVudGhlc2lzID0gIikgIiwKICAgIF9yZW5kZXJDU1NUcmFuc2Zvcm1zID0gZnVuY3Rpb24gX3JlbmRlckNTU1RyYW5zZm9ybXMocmF0aW8sIGNhY2hlKSB7CiAgdmFyIF9yZWYgPSBjYWNoZSB8fCB0aGlzLAogICAgICB4UGVyY2VudCA9IF9yZWYueFBlcmNlbnQsCiAgICAgIHlQZXJjZW50ID0gX3JlZi55UGVyY2VudCwKICAgICAgeCA9IF9yZWYueCwKICAgICAgeSA9IF9yZWYueSwKICAgICAgeiA9IF9yZWYueiwKICAgICAgcm90YXRpb24gPSBfcmVmLnJvdGF0aW9uLAogICAgICByb3RhdGlvblkgPSBfcmVmLnJvdGF0aW9uWSwKICAgICAgcm90YXRpb25YID0gX3JlZi5yb3RhdGlvblgsCiAgICAgIHNrZXdYID0gX3JlZi5za2V3WCwKICAgICAgc2tld1kgPSBfcmVmLnNrZXdZLAogICAgICBzY2FsZVggPSBfcmVmLnNjYWxlWCwKICAgICAgc2NhbGVZID0gX3JlZi5zY2FsZVksCiAgICAgIHRyYW5zZm9ybVBlcnNwZWN0aXZlID0gX3JlZi50cmFuc2Zvcm1QZXJzcGVjdGl2ZSwKICAgICAgZm9yY2UzRCA9IF9yZWYuZm9yY2UzRCwKICAgICAgdGFyZ2V0ID0gX3JlZi50YXJnZXQsCiAgICAgIHpPcmlnaW4gPSBfcmVmLnpPcmlnaW4sCiAgICAgIHRyYW5zZm9ybXMgPSAiIiwKICAgICAgdXNlM0QgPSBmb3JjZTNEID09PSAiYXV0byIgJiYgcmF0aW8gJiYgcmF0aW8gIT09IDEgfHwgZm9yY2UzRCA9PT0gdHJ1ZTsgLy8gU2FmYXJpIGhhcyBhIGJ1ZyB0aGF0IGNhdXNlcyBpdCBub3QgdG8gcmVuZGVyIDNEIHRyYW5zZm9ybS1vcmlnaW4gdmFsdWVzIHByb3Blcmx5LCBzbyB3ZSBmb3JjZSB0aGUgeiBvcmlnaW4gdG8gMCwgcmVjb3JkIGl0IGluIHRoZSBjYWNoZSwgYW5kIHRoZW4gZG8gdGhlIG1hdGggaGVyZSB0byBvZmZzZXQgdGhlIHRyYW5zbGF0ZSB2YWx1ZXMgYWNjb3JkaW5nbHkgKGJhc2ljYWxseSBkbyB0aGUgM0QgdHJhbnNmb3JtLW9yaWdpbiBwYXJ0IG1hbnVhbGx5KQoKCiAgaWYgKHpPcmlnaW4gJiYgKHJvdGF0aW9uWCAhPT0gX3plcm9EZWcgfHwgcm90YXRpb25ZICE9PSBfemVyb0RlZykpIHsKICAgIHZhciBhbmdsZSA9IHBhcnNlRmxvYXQocm90YXRpb25ZKSAqIF9ERUcyUkFELAogICAgICAgIGExMyA9IE1hdGguc2luKGFuZ2xlKSwKICAgICAgICBhMzMgPSBNYXRoLmNvcyhhbmdsZSksCiAgICAgICAgY29zOwoKICAgIGFuZ2xlID0gcGFyc2VGbG9hdChyb3RhdGlvblgpICogX0RFRzJSQUQ7CiAgICBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7CiAgICB4ID0gX2FkZFB4VHJhbnNsYXRlKHRhcmdldCwgeCwgYTEzICogY29zICogLXpPcmlnaW4pOwogICAgeSA9IF9hZGRQeFRyYW5zbGF0ZSh0YXJnZXQsIHksIC1NYXRoLnNpbihhbmdsZSkgKiAtek9yaWdpbik7CiAgICB6ID0gX2FkZFB4VHJhbnNsYXRlKHRhcmdldCwgeiwgYTMzICogY29zICogLXpPcmlnaW4gKyB6T3JpZ2luKTsKICB9CgogIGlmICh0cmFuc2Zvcm1QZXJzcGVjdGl2ZSAhPT0gX3plcm9QeCkgewogICAgdHJhbnNmb3JtcyArPSAicGVyc3BlY3RpdmUoIiArIHRyYW5zZm9ybVBlcnNwZWN0aXZlICsgX2VuZFBhcmVudGhlc2lzOwogIH0KCiAgaWYgKHhQZXJjZW50IHx8IHlQZXJjZW50KSB7CiAgICB0cmFuc2Zvcm1zICs9ICJ0cmFuc2xhdGUoIiArIHhQZXJjZW50ICsgIiUsICIgKyB5UGVyY2VudCArICIlKSAiOwogIH0KCiAgaWYgKHVzZTNEIHx8IHggIT09IF96ZXJvUHggfHwgeSAhPT0gX3plcm9QeCB8fCB6ICE9PSBfemVyb1B4KSB7CiAgICB0cmFuc2Zvcm1zICs9IHogIT09IF96ZXJvUHggfHwgdXNlM0QgPyAidHJhbnNsYXRlM2QoIiArIHggKyAiLCAiICsgeSArICIsICIgKyB6ICsgIikgIiA6ICJ0cmFuc2xhdGUoIiArIHggKyAiLCAiICsgeSArIF9lbmRQYXJlbnRoZXNpczsKICB9CgogIGlmIChyb3RhdGlvbiAhPT0gX3plcm9EZWcpIHsKICAgIHRyYW5zZm9ybXMgKz0gInJvdGF0ZSgiICsgcm90YXRpb24gKyBfZW5kUGFyZW50aGVzaXM7CiAgfQoKICBpZiAocm90YXRpb25ZICE9PSBfemVyb0RlZykgewogICAgdHJhbnNmb3JtcyArPSAicm90YXRlWSgiICsgcm90YXRpb25ZICsgX2VuZFBhcmVudGhlc2lzOwogIH0KCiAgaWYgKHJvdGF0aW9uWCAhPT0gX3plcm9EZWcpIHsKICAgIHRyYW5zZm9ybXMgKz0gInJvdGF0ZVgoIiArIHJvdGF0aW9uWCArIF9lbmRQYXJlbnRoZXNpczsKICB9CgogIGlmIChza2V3WCAhPT0gX3plcm9EZWcgfHwgc2tld1kgIT09IF96ZXJvRGVnKSB7CiAgICB0cmFuc2Zvcm1zICs9ICJza2V3KCIgKyBza2V3WCArICIsICIgKyBza2V3WSArIF9lbmRQYXJlbnRoZXNpczsKICB9CgogIGlmIChzY2FsZVggIT09IDEgfHwgc2NhbGVZICE9PSAxKSB7CiAgICB0cmFuc2Zvcm1zICs9ICJzY2FsZSgiICsgc2NhbGVYICsgIiwgIiArIHNjYWxlWSArIF9lbmRQYXJlbnRoZXNpczsKICB9CgogIHRhcmdldC5zdHlsZVtfdHJhbnNmb3JtUHJvcF0gPSB0cmFuc2Zvcm1zIHx8ICJ0cmFuc2xhdGUoMCwgMCkiOwp9LAogICAgX3JlbmRlclNWR1RyYW5zZm9ybXMgPSBmdW5jdGlvbiBfcmVuZGVyU1ZHVHJhbnNmb3JtcyhyYXRpbywgY2FjaGUpIHsKICB2YXIgX3JlZjIgPSBjYWNoZSB8fCB0aGlzLAogICAgICB4UGVyY2VudCA9IF9yZWYyLnhQZXJjZW50LAogICAgICB5UGVyY2VudCA9IF9yZWYyLnlQZXJjZW50LAogICAgICB4ID0gX3JlZjIueCwKICAgICAgeSA9IF9yZWYyLnksCiAgICAgIHJvdGF0aW9uID0gX3JlZjIucm90YXRpb24sCiAgICAgIHNrZXdYID0gX3JlZjIuc2tld1gsCiAgICAgIHNrZXdZID0gX3JlZjIuc2tld1ksCiAgICAgIHNjYWxlWCA9IF9yZWYyLnNjYWxlWCwKICAgICAgc2NhbGVZID0gX3JlZjIuc2NhbGVZLAogICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQsCiAgICAgIHhPcmlnaW4gPSBfcmVmMi54T3JpZ2luLAogICAgICB5T3JpZ2luID0gX3JlZjIueU9yaWdpbiwKICAgICAgeE9mZnNldCA9IF9yZWYyLnhPZmZzZXQsCiAgICAgIHlPZmZzZXQgPSBfcmVmMi55T2Zmc2V0LAogICAgICBmb3JjZUNTUyA9IF9yZWYyLmZvcmNlQ1NTLAogICAgICB0eCA9IHBhcnNlRmxvYXQoeCksCiAgICAgIHR5ID0gcGFyc2VGbG9hdCh5KSwKICAgICAgYTExLAogICAgICBhMjEsCiAgICAgIGExMiwKICAgICAgYTIyLAogICAgICB0ZW1wOwoKICByb3RhdGlvbiA9IHBhcnNlRmxvYXQocm90YXRpb24pOwogIHNrZXdYID0gcGFyc2VGbG9hdChza2V3WCk7CiAgc2tld1kgPSBwYXJzZUZsb2F0KHNrZXdZKTsKCiAgaWYgKHNrZXdZKSB7CiAgICAvL2ZvciBwZXJmb3JtYW5jZSByZWFzb25zLCB3ZSBjb21iaW5lIGFsbCBza2V3aW5nIGludG8gdGhlIHNrZXdYIGFuZCByb3RhdGlvbiB2YWx1ZXMuIFJlbWVtYmVyLCBhIHNrZXdZIG9mIDEwIGRlZ3JlZXMgbG9va3MgdGhlIHNhbWUgYXMgYSByb3RhdGlvbiBvZiAxMCBkZWdyZWVzIHBsdXMgYSBza2V3WCBvZiAxMCBkZWdyZWVzLgogICAgc2tld1kgPSBwYXJzZUZsb2F0KHNrZXdZKTsKICAgIHNrZXdYICs9IHNrZXdZOwogICAgcm90YXRpb24gKz0gc2tld1k7CiAgfQoKICBpZiAocm90YXRpb24gfHwgc2tld1gpIHsKICAgIHJvdGF0aW9uICo9IF9ERUcyUkFEOwogICAgc2tld1ggKj0gX0RFRzJSQUQ7CiAgICBhMTEgPSBNYXRoLmNvcyhyb3RhdGlvbikgKiBzY2FsZVg7CiAgICBhMjEgPSBNYXRoLnNpbihyb3RhdGlvbikgKiBzY2FsZVg7CiAgICBhMTIgPSBNYXRoLnNpbihyb3RhdGlvbiAtIHNrZXdYKSAqIC1zY2FsZVk7CiAgICBhMjIgPSBNYXRoLmNvcyhyb3RhdGlvbiAtIHNrZXdYKSAqIHNjYWxlWTsKCiAgICBpZiAoc2tld1gpIHsKICAgICAgc2tld1kgKj0gX0RFRzJSQUQ7CiAgICAgIHRlbXAgPSBNYXRoLnRhbihza2V3WCAtIHNrZXdZKTsKICAgICAgdGVtcCA9IE1hdGguc3FydCgxICsgdGVtcCAqIHRlbXApOwogICAgICBhMTIgKj0gdGVtcDsKICAgICAgYTIyICo9IHRlbXA7CgogICAgICBpZiAoc2tld1kpIHsKICAgICAgICB0ZW1wID0gTWF0aC50YW4oc2tld1kpOwogICAgICAgIHRlbXAgPSBNYXRoLnNxcnQoMSArIHRlbXAgKiB0ZW1wKTsKICAgICAgICBhMTEgKj0gdGVtcDsKICAgICAgICBhMjEgKj0gdGVtcDsKICAgICAgfQogICAgfQoKICAgIGExMSA9IF9yb3VuZChhMTEpOwogICAgYTIxID0gX3JvdW5kKGEyMSk7CiAgICBhMTIgPSBfcm91bmQoYTEyKTsKICAgIGEyMiA9IF9yb3VuZChhMjIpOwogIH0gZWxzZSB7CiAgICBhMTEgPSBzY2FsZVg7CiAgICBhMjIgPSBzY2FsZVk7CiAgICBhMjEgPSBhMTIgPSAwOwogIH0KCiAgaWYgKHR4ICYmICF+KHggKyAiIikuaW5kZXhPZigicHgiKSB8fCB0eSAmJiAhfih5ICsgIiIpLmluZGV4T2YoInB4IikpIHsKICAgIHR4ID0gX2NvbnZlcnRUb1VuaXQodGFyZ2V0LCAieCIsIHgsICJweCIpOwogICAgdHkgPSBfY29udmVydFRvVW5pdCh0YXJnZXQsICJ5IiwgeSwgInB4Iik7CiAgfQoKICBpZiAoeE9yaWdpbiB8fCB5T3JpZ2luIHx8IHhPZmZzZXQgfHwgeU9mZnNldCkgewogICAgdHggPSBfcm91bmQodHggKyB4T3JpZ2luIC0gKHhPcmlnaW4gKiBhMTEgKyB5T3JpZ2luICogYTEyKSArIHhPZmZzZXQpOwogICAgdHkgPSBfcm91bmQodHkgKyB5T3JpZ2luIC0gKHhPcmlnaW4gKiBhMjEgKyB5T3JpZ2luICogYTIyKSArIHlPZmZzZXQpOwogIH0KCiAgaWYgKHhQZXJjZW50IHx8IHlQZXJjZW50KSB7CiAgICAvL1RoZSBTVkcgc3BlYyBkb2Vzbid0IHN1cHBvcnQgcGVyY2VudGFnZS1iYXNlZCB0cmFuc2xhdGlvbiBpbiB0aGUgInRyYW5zZm9ybSIgYXR0cmlidXRlLCBzbyB3ZSBtZXJnZSBpdCBpbnRvIHRoZSB0cmFuc2xhdGlvbiB0byBzaW11bGF0ZSBpdC4KICAgIHRlbXAgPSB0YXJnZXQuZ2V0QkJveCgpOwogICAgdHggPSBfcm91bmQodHggKyB4UGVyY2VudCAvIDEwMCAqIHRlbXAud2lkdGgpOwogICAgdHkgPSBfcm91bmQodHkgKyB5UGVyY2VudCAvIDEwMCAqIHRlbXAuaGVpZ2h0KTsKICB9CgogIHRlbXAgPSAibWF0cml4KCIgKyBhMTEgKyAiLCIgKyBhMjEgKyAiLCIgKyBhMTIgKyAiLCIgKyBhMjIgKyAiLCIgKyB0eCArICIsIiArIHR5ICsgIikiOwogIHRhcmdldC5zZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIsIHRlbXApOwogIGZvcmNlQ1NTICYmICh0YXJnZXQuc3R5bGVbX3RyYW5zZm9ybVByb3BdID0gdGVtcCk7IC8vc29tZSBicm93c2VycyBwcmlvcml0aXplIENTUyB0cmFuc2Zvcm1zIG92ZXIgdGhlIHRyYW5zZm9ybSBhdHRyaWJ1dGUuIFdoZW4gd2Ugc2Vuc2UgdGhhdCB0aGUgdXNlciBoYXMgQ1NTIHRyYW5zZm9ybXMgYXBwbGllZCwgd2UgbXVzdCBvdmVyd3JpdGUgdGhlbSB0aGlzIHdheSAob3RoZXJ3aXNlIHNvbWUgYnJvd3NlciBzaW1wbHkgd29uJ3QgcmVuZGVyIHRoZSAgdHJhbnNmb3JtIGF0dHJpYnV0ZSBjaGFuZ2VzISkKfSwKICAgIF9hZGRSb3RhdGlvbmFsUHJvcFR3ZWVuID0gZnVuY3Rpb24gX2FkZFJvdGF0aW9uYWxQcm9wVHdlZW4ocGx1Z2luLCB0YXJnZXQsIHByb3BlcnR5LCBzdGFydE51bSwgZW5kVmFsdWUsIHJlbGF0aXZlKSB7CiAgdmFyIGNhcCA9IDM2MCwKICAgICAgaXNTdHJpbmcgPSBfaXNTdHJpbmcoZW5kVmFsdWUpLAogICAgICBlbmROdW0gPSBwYXJzZUZsb2F0KGVuZFZhbHVlKSAqIChpc1N0cmluZyAmJiB+ZW5kVmFsdWUuaW5kZXhPZigicmFkIikgPyBfUkFEMkRFRyA6IDEpLAogICAgICBjaGFuZ2UgPSByZWxhdGl2ZSA/IGVuZE51bSAqIHJlbGF0aXZlIDogZW5kTnVtIC0gc3RhcnROdW0sCiAgICAgIGZpbmFsVmFsdWUgPSBzdGFydE51bSArIGNoYW5nZSArICJkZWciLAogICAgICBkaXJlY3Rpb24sCiAgICAgIHB0OwoKICBpZiAoaXNTdHJpbmcpIHsKICAgIGRpcmVjdGlvbiA9IGVuZFZhbHVlLnNwbGl0KCJfIilbMV07CgogICAgaWYgKGRpcmVjdGlvbiA9PT0gInNob3J0IikgewogICAgICBjaGFuZ2UgJT0gY2FwOwoKICAgICAgaWYgKGNoYW5nZSAhPT0gY2hhbmdlICUgKGNhcCAvIDIpKSB7CiAgICAgICAgY2hhbmdlICs9IGNoYW5nZSA8IDAgPyBjYXAgOiAtY2FwOwogICAgICB9CiAgICB9CgogICAgaWYgKGRpcmVjdGlvbiA9PT0gImN3IiAmJiBjaGFuZ2UgPCAwKSB7CiAgICAgIGNoYW5nZSA9IChjaGFuZ2UgKyBjYXAgKiBfYmlnTnVtKSAlIGNhcCAtIH5+KGNoYW5nZSAvIGNhcCkgKiBjYXA7CiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gImNjdyIgJiYgY2hhbmdlID4gMCkgewogICAgICBjaGFuZ2UgPSAoY2hhbmdlIC0gY2FwICogX2JpZ051bSkgJSBjYXAgLSB+fihjaGFuZ2UgLyBjYXApICogY2FwOwogICAgfQogIH0KCiAgcGx1Z2luLl9wdCA9IHB0ID0gbmV3IFByb3BUd2VlbihwbHVnaW4uX3B0LCB0YXJnZXQsIHByb3BlcnR5LCBzdGFydE51bSwgY2hhbmdlLCBfcmVuZGVyUHJvcFdpdGhFbmQpOwogIHB0LmUgPSBmaW5hbFZhbHVlOwogIHB0LnUgPSAiZGVnIjsKCiAgcGx1Z2luLl9wcm9wcy5wdXNoKHByb3BlcnR5KTsKCiAgcmV0dXJuIHB0Owp9LAogICAgX2Fzc2lnbiA9IGZ1bmN0aW9uIF9hc3NpZ24odGFyZ2V0LCBzb3VyY2UpIHsKICAvLyBJbnRlcm5ldCBFeHBsb3JlciBkb2Vzbid0IGhhdmUgT2JqZWN0LmFzc2lnbigpLCBzbyB3ZSByZWNyZWF0ZSBpdCBoZXJlLgogIGZvciAodmFyIHAgaW4gc291cmNlKSB7CiAgICB0YXJnZXRbcF0gPSBzb3VyY2VbcF07CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9LAogICAgX2FkZFJhd1RyYW5zZm9ybVBUcyA9IGZ1bmN0aW9uIF9hZGRSYXdUcmFuc2Zvcm1QVHMocGx1Z2luLCB0cmFuc2Zvcm1zLCB0YXJnZXQpIHsKICAvL2ZvciBoYW5kbGluZyBjYXNlcyB3aGVyZSBzb21lb25lIHBhc3NlcyBpbiBhIHdob2xlIHRyYW5zZm9ybSBzdHJpbmcsIGxpa2UgdHJhbnNmb3JtOiAic2NhbGUoMiwgMykgcm90YXRlKDIwZGVnKSB0cmFuc2xhdGVZKDMwZW0pIgogIHZhciBzdGFydENhY2hlID0gX2Fzc2lnbih7fSwgdGFyZ2V0Ll9nc2FwKSwKICAgICAgZXhjbHVkZSA9ICJwZXJzcGVjdGl2ZSxmb3JjZTNELHRyYW5zZm9ybU9yaWdpbixzdmdPcmlnaW4iLAogICAgICBzdHlsZSA9IHRhcmdldC5zdHlsZSwKICAgICAgZW5kQ2FjaGUsCiAgICAgIHAsCiAgICAgIHN0YXJ0VmFsdWUsCiAgICAgIGVuZFZhbHVlLAogICAgICBzdGFydE51bSwKICAgICAgZW5kTnVtLAogICAgICBzdGFydFVuaXQsCiAgICAgIGVuZFVuaXQ7CgogIGlmIChzdGFydENhY2hlLnN2ZykgewogICAgc3RhcnRWYWx1ZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIpOwogICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgidHJhbnNmb3JtIiwgIiIpOwogICAgc3R5bGVbX3RyYW5zZm9ybVByb3BdID0gdHJhbnNmb3JtczsKICAgIGVuZENhY2hlID0gX3BhcnNlVHJhbnNmb3JtKHRhcmdldCwgMSk7CgogICAgX3JlbW92ZVByb3BlcnR5KHRhcmdldCwgX3RyYW5zZm9ybVByb3ApOwoKICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIsIHN0YXJ0VmFsdWUpOwogIH0gZWxzZSB7CiAgICBzdGFydFZhbHVlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpW190cmFuc2Zvcm1Qcm9wXTsKICAgIHN0eWxlW190cmFuc2Zvcm1Qcm9wXSA9IHRyYW5zZm9ybXM7CiAgICBlbmRDYWNoZSA9IF9wYXJzZVRyYW5zZm9ybSh0YXJnZXQsIDEpOwogICAgc3R5bGVbX3RyYW5zZm9ybVByb3BdID0gc3RhcnRWYWx1ZTsKICB9CgogIGZvciAocCBpbiBfdHJhbnNmb3JtUHJvcHMpIHsKICAgIHN0YXJ0VmFsdWUgPSBzdGFydENhY2hlW3BdOwogICAgZW5kVmFsdWUgPSBlbmRDYWNoZVtwXTsKCiAgICBpZiAoc3RhcnRWYWx1ZSAhPT0gZW5kVmFsdWUgJiYgZXhjbHVkZS5pbmRleE9mKHApIDwgMCkgewogICAgICAvL3R3ZWVuaW5nIHRvIG5vIHBlcnNwZWN0aXZlIGdpdmVzIHZlcnkgdW5pbnR1aXRpdmUgcmVzdWx0cyAtIGp1c3Qga2VlcCB0aGUgc2FtZSBwZXJzcGVjdGl2ZSBpbiB0aGF0IGNhc2UuCiAgICAgIHN0YXJ0VW5pdCA9IGdldFVuaXQoc3RhcnRWYWx1ZSk7CiAgICAgIGVuZFVuaXQgPSBnZXRVbml0KGVuZFZhbHVlKTsKICAgICAgc3RhcnROdW0gPSBzdGFydFVuaXQgIT09IGVuZFVuaXQgPyBfY29udmVydFRvVW5pdCh0YXJnZXQsIHAsIHN0YXJ0VmFsdWUsIGVuZFVuaXQpIDogcGFyc2VGbG9hdChzdGFydFZhbHVlKTsKICAgICAgZW5kTnVtID0gcGFyc2VGbG9hdChlbmRWYWx1ZSk7CiAgICAgIHBsdWdpbi5fcHQgPSBuZXcgUHJvcFR3ZWVuKHBsdWdpbi5fcHQsIGVuZENhY2hlLCBwLCBzdGFydE51bSwgZW5kTnVtIC0gc3RhcnROdW0sIF9yZW5kZXJDU1NQcm9wKTsKICAgICAgcGx1Z2luLl9wdC51ID0gZW5kVW5pdCB8fCAwOwoKICAgICAgcGx1Z2luLl9wcm9wcy5wdXNoKHApOwogICAgfQogIH0KCiAgX2Fzc2lnbihlbmRDYWNoZSwgc3RhcnRDYWNoZSk7Cn07IC8vIGhhbmRsZSBzcGxpdHRpbmcgYXBhcnQgcGFkZGluZywgbWFyZ2luLCBib3JkZXJXaWR0aCwgYW5kIGJvcmRlclJhZGl1cyBpbnRvIHRoZWlyIDQgY29tcG9uZW50cy4gRmlyZWZveCwgZm9yIGV4YW1wbGUsIHdvbid0IHJlcG9ydCBib3JkZXJSYWRpdXMgY29ycmVjdGx5IC0gaXQgd2lsbCBvbmx5IGRvIGJvcmRlclRvcExlZnRSYWRpdXMgYW5kIHRoZSBvdGhlciBjb3JuZXJzLiBXZSBhbHNvIHdhbnQgdG8gaGFuZGxlIHBhZGRpbmdUb3AsIG1hcmdpbkxlZnQsIGJvcmRlclJpZ2h0V2lkdGgsIGV0Yy4KCgpfZm9yRWFjaE5hbWUoInBhZGRpbmcsbWFyZ2luLFdpZHRoLFJhZGl1cyIsIGZ1bmN0aW9uIChuYW1lLCBpbmRleCkgewogIHZhciB0ID0gIlRvcCIsCiAgICAgIHIgPSAiUmlnaHQiLAogICAgICBiID0gIkJvdHRvbSIsCiAgICAgIGwgPSAiTGVmdCIsCiAgICAgIHByb3BzID0gKGluZGV4IDwgMyA/IFt0LCByLCBiLCBsXSA6IFt0ICsgbCwgdCArIHIsIGIgKyByLCBiICsgbF0pLm1hcChmdW5jdGlvbiAoc2lkZSkgewogICAgcmV0dXJuIGluZGV4IDwgMiA/IG5hbWUgKyBzaWRlIDogImJvcmRlciIgKyBzaWRlICsgbmFtZTsKICB9KTsKCiAgX3NwZWNpYWxQcm9wc1tpbmRleCA+IDEgPyAiYm9yZGVyIiArIG5hbWUgOiBuYW1lXSA9IGZ1bmN0aW9uIChwbHVnaW4sIHRhcmdldCwgcHJvcGVydHksIGVuZFZhbHVlLCB0d2VlbikgewogICAgdmFyIGEsIHZhcnM7CgogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCA0KSB7CiAgICAgIC8vIGdldHRlciwgcGFzc2VkIHRhcmdldCwgcHJvcGVydHksIGFuZCB1bml0IChmcm9tIF9nZXQoKSkKICAgICAgYSA9IHByb3BzLm1hcChmdW5jdGlvbiAocHJvcCkgewogICAgICAgIHJldHVybiBfZ2V0KHBsdWdpbiwgcHJvcCwgcHJvcGVydHkpOwogICAgICB9KTsKICAgICAgdmFycyA9IGEuam9pbigiICIpOwogICAgICByZXR1cm4gdmFycy5zcGxpdChhWzBdKS5sZW5ndGggPT09IDUgPyBhWzBdIDogdmFyczsKICAgIH0KCiAgICBhID0gKGVuZFZhbHVlICsgIiIpLnNwbGl0KCIgIik7CiAgICB2YXJzID0ge307CiAgICBwcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wLCBpKSB7CiAgICAgIHJldHVybiB2YXJzW3Byb3BdID0gYVtpXSA9IGFbaV0gfHwgYVsoaSAtIDEpIC8gMiB8IDBdOwogICAgfSk7CiAgICBwbHVnaW4uaW5pdCh0YXJnZXQsIHZhcnMsIHR3ZWVuKTsKICB9Owp9KTsKCmV4cG9ydCB2YXIgQ1NTUGx1Z2luID0gewogIG5hbWU6ICJjc3MiLAogIHJlZ2lzdGVyOiBfaW5pdENvcmUsCiAgdGFyZ2V0VGVzdDogZnVuY3Rpb24gdGFyZ2V0VGVzdCh0YXJnZXQpIHsKICAgIHJldHVybiB0YXJnZXQuc3R5bGUgJiYgdGFyZ2V0Lm5vZGVUeXBlOwogIH0sCiAgaW5pdDogZnVuY3Rpb24gaW5pdCh0YXJnZXQsIHZhcnMsIHR3ZWVuLCBpbmRleCwgdGFyZ2V0cykgewogICAgdmFyIHByb3BzID0gdGhpcy5fcHJvcHMsCiAgICAgICAgc3R5bGUgPSB0YXJnZXQuc3R5bGUsCiAgICAgICAgc3RhcnRBdCA9IHR3ZWVuLnZhcnMuc3RhcnRBdCwKICAgICAgICBzdGFydFZhbHVlLAogICAgICAgIGVuZFZhbHVlLAogICAgICAgIGVuZE51bSwKICAgICAgICBzdGFydE51bSwKICAgICAgICB0eXBlLAogICAgICAgIHNwZWNpYWxQcm9wLAogICAgICAgIHAsCiAgICAgICAgc3RhcnRVbml0LAogICAgICAgIGVuZFVuaXQsCiAgICAgICAgcmVsYXRpdmUsCiAgICAgICAgaXNUcmFuc2Zvcm1SZWxhdGVkLAogICAgICAgIHRyYW5zZm9ybVByb3BUd2VlbiwKICAgICAgICBjYWNoZSwKICAgICAgICBzbW9vdGgsCiAgICAgICAgaGFzUHJpb3JpdHk7CiAgICBfcGx1Z2luSW5pdHRlZCB8fCBfaW5pdENvcmUoKTsKCiAgICBmb3IgKHAgaW4gdmFycykgewogICAgICBpZiAocCA9PT0gImF1dG9Sb3VuZCIpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgZW5kVmFsdWUgPSB2YXJzW3BdOwoKICAgICAgaWYgKF9wbHVnaW5zW3BdICYmIF9jaGVja1BsdWdpbihwLCB2YXJzLCB0d2VlbiwgaW5kZXgsIHRhcmdldCwgdGFyZ2V0cykpIHsKICAgICAgICAvLyBwbHVnaW5zCiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHR5cGUgPSB0eXBlb2YgZW5kVmFsdWU7CiAgICAgIHNwZWNpYWxQcm9wID0gX3NwZWNpYWxQcm9wc1twXTsKCiAgICAgIGlmICh0eXBlID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgZW5kVmFsdWUgPSBlbmRWYWx1ZS5jYWxsKHR3ZWVuLCBpbmRleCwgdGFyZ2V0LCB0YXJnZXRzKTsKICAgICAgICB0eXBlID0gdHlwZW9mIGVuZFZhbHVlOwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gInN0cmluZyIgJiYgfmVuZFZhbHVlLmluZGV4T2YoInJhbmRvbSgiKSkgewogICAgICAgIGVuZFZhbHVlID0gX3JlcGxhY2VSYW5kb20oZW5kVmFsdWUpOwogICAgICB9CgogICAgICBpZiAoc3BlY2lhbFByb3ApIHsKICAgICAgICBzcGVjaWFsUHJvcCh0aGlzLCB0YXJnZXQsIHAsIGVuZFZhbHVlLCB0d2VlbikgJiYgKGhhc1ByaW9yaXR5ID0gMSk7CiAgICAgIH0gZWxzZSBpZiAocC5zdWJzdHIoMCwgMikgPT09ICItLSIpIHsKICAgICAgICAvL0NTUyB2YXJpYWJsZQogICAgICAgIHN0YXJ0VmFsdWUgPSAoZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmdldFByb3BlcnR5VmFsdWUocCkgKyAiIikudHJpbSgpOwogICAgICAgIGVuZFZhbHVlICs9ICIiOwogICAgICAgIF9jb2xvckV4cC5sYXN0SW5kZXggPSAwOwoKICAgICAgICBpZiAoIV9jb2xvckV4cC50ZXN0KHN0YXJ0VmFsdWUpKSB7CiAgICAgICAgICAvLyBjb2xvcnMgZG9uJ3QgaGF2ZSB1bml0cwogICAgICAgICAgc3RhcnRVbml0ID0gZ2V0VW5pdChzdGFydFZhbHVlKTsKICAgICAgICAgIGVuZFVuaXQgPSBnZXRVbml0KGVuZFZhbHVlKTsKICAgICAgICB9CgogICAgICAgIGVuZFVuaXQgPyBzdGFydFVuaXQgIT09IGVuZFVuaXQgJiYgKHN0YXJ0VmFsdWUgPSBfY29udmVydFRvVW5pdCh0YXJnZXQsIHAsIHN0YXJ0VmFsdWUsIGVuZFVuaXQpICsgZW5kVW5pdCkgOiBzdGFydFVuaXQgJiYgKGVuZFZhbHVlICs9IHN0YXJ0VW5pdCk7CiAgICAgICAgdGhpcy5hZGQoc3R5bGUsICJzZXRQcm9wZXJ0eSIsIHN0YXJ0VmFsdWUsIGVuZFZhbHVlLCBpbmRleCwgdGFyZ2V0cywgMCwgMCwgcCk7CiAgICAgICAgcHJvcHMucHVzaChwKTsKICAgICAgfSBlbHNlIGlmICh0eXBlICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIGlmIChzdGFydEF0ICYmIHAgaW4gc3RhcnRBdCkgewogICAgICAgICAgLy8gaW4gY2FzZSBzb21lb25lIGhhcmQtY29kZXMgYSBjb21wbGV4IHZhbHVlIGFzIHRoZSBzdGFydCwgbGlrZSB0b3A6ICJjYWxjKDJ2aCAvIDIpIi4gV2l0aG91dCB0aGlzLCBpdCdkIHVzZSB0aGUgY29tcHV0ZWQgdmFsdWUgKGFsd2F5cyBpbiBweCkKICAgICAgICAgIHN0YXJ0VmFsdWUgPSB0eXBlb2Ygc3RhcnRBdFtwXSA9PT0gImZ1bmN0aW9uIiA/IHN0YXJ0QXRbcF0uY2FsbCh0d2VlbiwgaW5kZXgsIHRhcmdldCwgdGFyZ2V0cykgOiBzdGFydEF0W3BdOwogICAgICAgICAgX2lzU3RyaW5nKHN0YXJ0VmFsdWUpICYmIH5zdGFydFZhbHVlLmluZGV4T2YoInJhbmRvbSgiKSAmJiAoc3RhcnRWYWx1ZSA9IF9yZXBsYWNlUmFuZG9tKHN0YXJ0VmFsdWUpKTsKICAgICAgICAgIGdldFVuaXQoc3RhcnRWYWx1ZSArICIiKSB8fCAoc3RhcnRWYWx1ZSArPSBfY29uZmlnLnVuaXRzW3BdIHx8IGdldFVuaXQoX2dldCh0YXJnZXQsIHApKSB8fCAiIik7IC8vIGZvciBjYXNlcyB3aGVuIHNvbWVvbmUgcGFzc2VzIGluIGEgdW5pdGxlc3MgdmFsdWUgbGlrZSB7eDogMTAwfTsgaWYgd2UgdHJ5IHNldHRpbmcgdHJhbnNsYXRlKDEwMCwgMHB4KSBpdCB3b24ndCB3b3JrLgoKICAgICAgICAgIChzdGFydFZhbHVlICsgIiIpLmNoYXJBdCgxKSA9PT0gIj0iICYmIChzdGFydFZhbHVlID0gX2dldCh0YXJnZXQsIHApKTsgLy8gY2FuJ3Qgd29yayB3aXRoIHJlbGF0aXZlIHZhbHVlcwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGFydFZhbHVlID0gX2dldCh0YXJnZXQsIHApOwogICAgICAgIH0KCiAgICAgICAgc3RhcnROdW0gPSBwYXJzZUZsb2F0KHN0YXJ0VmFsdWUpOwogICAgICAgIHJlbGF0aXZlID0gdHlwZSA9PT0gInN0cmluZyIgJiYgZW5kVmFsdWUuY2hhckF0KDEpID09PSAiPSIgPyArKGVuZFZhbHVlLmNoYXJBdCgwKSArICIxIikgOiAwOwogICAgICAgIHJlbGF0aXZlICYmIChlbmRWYWx1ZSA9IGVuZFZhbHVlLnN1YnN0cigyKSk7CiAgICAgICAgZW5kTnVtID0gcGFyc2VGbG9hdChlbmRWYWx1ZSk7CgogICAgICAgIGlmIChwIGluIF9wcm9wZXJ0eUFsaWFzZXMpIHsKICAgICAgICAgIGlmIChwID09PSAiYXV0b0FscGhhIikgewogICAgICAgICAgICAvL3NwZWNpYWwgY2FzZSB3aGVyZSB3ZSBjb250cm9sIHRoZSB2aXNpYmlsaXR5IGFsb25nIHdpdGggb3BhY2l0eS4gV2Ugc3RpbGwgYWxsb3cgdGhlIG9wYWNpdHkgdmFsdWUgdG8gcGFzcyB0aHJvdWdoIGFuZCBnZXQgdHdlZW5lZC4KICAgICAgICAgICAgaWYgKHN0YXJ0TnVtID09PSAxICYmIF9nZXQodGFyZ2V0LCAidmlzaWJpbGl0eSIpID09PSAiaGlkZGVuIiAmJiBlbmROdW0pIHsKICAgICAgICAgICAgICAvL2lmIHZpc2liaWxpdHkgaXMgaW5pdGlhbGx5IHNldCB0byAiaGlkZGVuIiwgd2Ugc2hvdWxkIGludGVycHJldCB0aGF0IGFzIGludGVudCB0byBtYWtlIG9wYWNpdHkgMCAoYSBjb252ZW5pZW5jZSkKICAgICAgICAgICAgICBzdGFydE51bSA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9hZGROb25Ud2VlbmluZ1BUKHRoaXMsIHN0eWxlLCAidmlzaWJpbGl0eSIsIHN0YXJ0TnVtID8gImluaGVyaXQiIDogImhpZGRlbiIsIGVuZE51bSA/ICJpbmhlcml0IiA6ICJoaWRkZW4iLCAhZW5kTnVtKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocCAhPT0gInNjYWxlIiAmJiBwICE9PSAidHJhbnNmb3JtIikgewogICAgICAgICAgICBwID0gX3Byb3BlcnR5QWxpYXNlc1twXTsKICAgICAgICAgICAgfnAuaW5kZXhPZigiLCIpICYmIChwID0gcC5zcGxpdCgiLCIpWzBdKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlzVHJhbnNmb3JtUmVsYXRlZCA9IHAgaW4gX3RyYW5zZm9ybVByb3BzOyAvLy0tLSBUUkFOU0ZPUk0tUkVMQVRFRCAtLS0KCiAgICAgICAgaWYgKGlzVHJhbnNmb3JtUmVsYXRlZCkgewogICAgICAgICAgaWYgKCF0cmFuc2Zvcm1Qcm9wVHdlZW4pIHsKICAgICAgICAgICAgY2FjaGUgPSB0YXJnZXQuX2dzYXA7CiAgICAgICAgICAgIGNhY2hlLnJlbmRlclRyYW5zZm9ybSAmJiAhdmFycy5wYXJzZVRyYW5zZm9ybSB8fCBfcGFyc2VUcmFuc2Zvcm0odGFyZ2V0LCB2YXJzLnBhcnNlVHJhbnNmb3JtKTsgLy8gaWYsIGZvciBleGFtcGxlLCBnc2FwLnNldCguLi4ge3RyYW5zZm9ybToidHJhbnNsYXRlWCg1MHZ3KSJ9KSwgdGhlIF9nZXQoKSBjYWxsIGRvZXNuJ3QgcGFyc2UgdGhlIHRyYW5zZm9ybSwgdGh1cyBjYWNoZS5yZW5kZXJUcmFuc2Zvcm0gd29uJ3QgYmUgc2V0IHlldCBzbyBmb3JjZSB0aGUgcGFyc2luZyBvZiB0aGUgdHJhbnNmb3JtIGhlcmUuCgogICAgICAgICAgICBzbW9vdGggPSB2YXJzLnNtb290aE9yaWdpbiAhPT0gZmFsc2UgJiYgY2FjaGUuc21vb3RoOwogICAgICAgICAgICB0cmFuc2Zvcm1Qcm9wVHdlZW4gPSB0aGlzLl9wdCA9IG5ldyBQcm9wVHdlZW4odGhpcy5fcHQsIHN0eWxlLCBfdHJhbnNmb3JtUHJvcCwgMCwgMSwgY2FjaGUucmVuZGVyVHJhbnNmb3JtLCBjYWNoZSwgMCwgLTEpOyAvL3RoZSBmaXJzdCB0aW1lIHRocm91Z2gsIGNyZWF0ZSB0aGUgcmVuZGVyaW5nIFByb3BUd2VlbiBzbyB0aGF0IGl0IHJ1bnMgTEFTVCAoaW4gdGhlIGxpbmtlZCBsaXN0LCB3ZSBrZWVwIGFkZGluZyB0byB0aGUgYmVnaW5uaW5nKQoKICAgICAgICAgICAgdHJhbnNmb3JtUHJvcFR3ZWVuLmRlcCA9IDE7IC8vZmxhZyBpdCBhcyBkZXBlbmRlbnQgc28gdGhhdCBpZiB0aGluZ3MgZ2V0IGtpbGxlZC9vdmVyd3JpdHRlbiBhbmQgdGhpcyBpcyB0aGUgb25seSBQcm9wVHdlZW4gbGVmdCwgd2UgY2FuIHNhZmVseSBraWxsIHRoZSB3aG9sZSB0d2Vlbi4KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocCA9PT0gInNjYWxlIikgewogICAgICAgICAgICB0aGlzLl9wdCA9IG5ldyBQcm9wVHdlZW4odGhpcy5fcHQsIGNhY2hlLCAic2NhbGVZIiwgY2FjaGUuc2NhbGVZLCAocmVsYXRpdmUgPyByZWxhdGl2ZSAqIGVuZE51bSA6IGVuZE51bSAtIGNhY2hlLnNjYWxlWSkgfHwgMCk7CiAgICAgICAgICAgIHByb3BzLnB1c2goInNjYWxlWSIsIHApOwogICAgICAgICAgICBwICs9ICJYIjsKICAgICAgICAgIH0gZWxzZSBpZiAocCA9PT0gInRyYW5zZm9ybU9yaWdpbiIpIHsKICAgICAgICAgICAgZW5kVmFsdWUgPSBfY29udmVydEtleXdvcmRzVG9QZXJjZW50YWdlcyhlbmRWYWx1ZSk7IC8vaW4gY2FzZSBzb21ldGhpbmcgbGlrZSAibGVmdCB0b3AiIG9yICJib3R0b20gcmlnaHQiIGlzIHBhc3NlZCBpbi4gQ29udmVydCB0byBwZXJjZW50YWdlcy4KCiAgICAgICAgICAgIGlmIChjYWNoZS5zdmcpIHsKICAgICAgICAgICAgICBfYXBwbHlTVkdPcmlnaW4odGFyZ2V0LCBlbmRWYWx1ZSwgMCwgc21vb3RoLCAwLCB0aGlzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBlbmRVbml0ID0gcGFyc2VGbG9hdChlbmRWYWx1ZS5zcGxpdCgiICIpWzJdKSB8fCAwOyAvL2hhbmRsZSB0aGUgek9yaWdpbiBzZXBhcmF0ZWx5IQoKICAgICAgICAgICAgICBlbmRVbml0ICE9PSBjYWNoZS56T3JpZ2luICYmIF9hZGROb25Ud2VlbmluZ1BUKHRoaXMsIGNhY2hlLCAiek9yaWdpbiIsIGNhY2hlLnpPcmlnaW4sIGVuZFVuaXQpOwoKICAgICAgICAgICAgICBfYWRkTm9uVHdlZW5pbmdQVCh0aGlzLCBzdHlsZSwgcCwgX2ZpcnN0VHdvT25seShzdGFydFZhbHVlKSwgX2ZpcnN0VHdvT25seShlbmRWYWx1ZSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gZWxzZSBpZiAocCA9PT0gInN2Z09yaWdpbiIpIHsKICAgICAgICAgICAgX2FwcGx5U1ZHT3JpZ2luKHRhcmdldCwgZW5kVmFsdWUsIDEsIHNtb290aCwgMCwgdGhpcyk7CgogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gZWxzZSBpZiAocCBpbiBfcm90YXRpb25hbFByb3BlcnRpZXMpIHsKICAgICAgICAgICAgX2FkZFJvdGF0aW9uYWxQcm9wVHdlZW4odGhpcywgY2FjaGUsIHAsIHN0YXJ0TnVtLCBlbmRWYWx1ZSwgcmVsYXRpdmUpOwoKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9IGVsc2UgaWYgKHAgPT09ICJzbW9vdGhPcmlnaW4iKSB7CiAgICAgICAgICAgIF9hZGROb25Ud2VlbmluZ1BUKHRoaXMsIGNhY2hlLCAic21vb3RoIiwgY2FjaGUuc21vb3RoLCBlbmRWYWx1ZSk7CgogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gZWxzZSBpZiAocCA9PT0gImZvcmNlM0QiKSB7CiAgICAgICAgICAgIGNhY2hlW3BdID0gZW5kVmFsdWU7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfSBlbHNlIGlmIChwID09PSAidHJhbnNmb3JtIikgewogICAgICAgICAgICBfYWRkUmF3VHJhbnNmb3JtUFRzKHRoaXMsIGVuZFZhbHVlLCB0YXJnZXQpOwoKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICghKHAgaW4gc3R5bGUpKSB7CiAgICAgICAgICBwID0gX2NoZWNrUHJvcFByZWZpeChwKSB8fCBwOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzVHJhbnNmb3JtUmVsYXRlZCB8fCAoZW5kTnVtIHx8IGVuZE51bSA9PT0gMCkgJiYgKHN0YXJ0TnVtIHx8IHN0YXJ0TnVtID09PSAwKSAmJiAhX2NvbXBsZXhFeHAudGVzdChlbmRWYWx1ZSkgJiYgcCBpbiBzdHlsZSkgewogICAgICAgICAgc3RhcnRVbml0ID0gKHN0YXJ0VmFsdWUgKyAiIikuc3Vic3RyKChzdGFydE51bSArICIiKS5sZW5ndGgpOwogICAgICAgICAgZW5kTnVtIHx8IChlbmROdW0gPSAwKTsgLy8gcHJvdGVjdCBhZ2FpbnN0IE5hTgoKICAgICAgICAgIGVuZFVuaXQgPSBnZXRVbml0KGVuZFZhbHVlKSB8fCAocCBpbiBfY29uZmlnLnVuaXRzID8gX2NvbmZpZy51bml0c1twXSA6IHN0YXJ0VW5pdCk7CiAgICAgICAgICBzdGFydFVuaXQgIT09IGVuZFVuaXQgJiYgKHN0YXJ0TnVtID0gX2NvbnZlcnRUb1VuaXQodGFyZ2V0LCBwLCBzdGFydFZhbHVlLCBlbmRVbml0KSk7CiAgICAgICAgICB0aGlzLl9wdCA9IG5ldyBQcm9wVHdlZW4odGhpcy5fcHQsIGlzVHJhbnNmb3JtUmVsYXRlZCA/IGNhY2hlIDogc3R5bGUsIHAsIHN0YXJ0TnVtLCByZWxhdGl2ZSA/IHJlbGF0aXZlICogZW5kTnVtIDogZW5kTnVtIC0gc3RhcnROdW0sICFpc1RyYW5zZm9ybVJlbGF0ZWQgJiYgKGVuZFVuaXQgPT09ICJweCIgfHwgcCA9PT0gInpJbmRleCIpICYmIHZhcnMuYXV0b1JvdW5kICE9PSBmYWxzZSA/IF9yZW5kZXJSb3VuZGVkQ1NTUHJvcCA6IF9yZW5kZXJDU1NQcm9wKTsKICAgICAgICAgIHRoaXMuX3B0LnUgPSBlbmRVbml0IHx8IDA7CgogICAgICAgICAgaWYgKHN0YXJ0VW5pdCAhPT0gZW5kVW5pdCAmJiBlbmRVbml0ICE9PSAiJSIpIHsKICAgICAgICAgICAgLy93aGVuIHRoZSB0d2VlbiBnb2VzIGFsbCB0aGUgd2F5IGJhY2sgdG8gdGhlIGJlZ2lubmluZywgd2UgbmVlZCB0byByZXZlcnQgaXQgdG8gdGhlIE9MRC9PUklHSU5BTCB2YWx1ZSAod2l0aCB0aG9zZSB1bml0cykuIFdlIHJlY29yZCB0aGF0IGFzIGEgImIiIChiZWdpbm5pbmcpIHByb3BlcnR5IGFuZCBwb2ludCB0byBhIHJlbmRlciBtZXRob2QgdGhhdCBoYW5kbGVzIHRoYXQuIChwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24pCiAgICAgICAgICAgIHRoaXMuX3B0LmIgPSBzdGFydFZhbHVlOwogICAgICAgICAgICB0aGlzLl9wdC5yID0gX3JlbmRlckNTU1Byb3BXaXRoQmVnaW5uaW5nOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoIShwIGluIHN0eWxlKSkgewogICAgICAgICAgaWYgKHAgaW4gdGFyZ2V0KSB7CiAgICAgICAgICAgIC8vbWF5YmUgaXQncyBub3QgYSBzdHlsZSAtIGl0IGNvdWxkIGJlIGEgcHJvcGVydHkgYWRkZWQgZGlyZWN0bHkgdG8gYW4gZWxlbWVudCBpbiB3aGljaCBjYXNlIHdlJ2xsIHRyeSB0byBhbmltYXRlIHRoYXQuCiAgICAgICAgICAgIHRoaXMuYWRkKHRhcmdldCwgcCwgc3RhcnRWYWx1ZSB8fCB0YXJnZXRbcF0sIGVuZFZhbHVlLCBpbmRleCwgdGFyZ2V0cyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfbWlzc2luZ1BsdWdpbihwLCBlbmRWYWx1ZSk7CgogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3R3ZWVuQ29tcGxleENTU1N0cmluZy5jYWxsKHRoaXMsIHRhcmdldCwgcCwgc3RhcnRWYWx1ZSwgZW5kVmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgcHJvcHMucHVzaChwKTsKICAgICAgfQogICAgfQoKICAgIGhhc1ByaW9yaXR5ICYmIF9zb3J0UHJvcFR3ZWVuc0J5UHJpb3JpdHkodGhpcyk7CiAgfSwKICBnZXQ6IF9nZXQsCiAgYWxpYXNlczogX3Byb3BlcnR5QWxpYXNlcywKICBnZXRTZXR0ZXI6IGZ1bmN0aW9uIGdldFNldHRlcih0YXJnZXQsIHByb3BlcnR5LCBwbHVnaW4pIHsKICAgIC8vcmV0dXJucyBhIHNldHRlciBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUgYW5kIGFwcGxpZXMgaXQgYWNjb3JkaW5nbHkuIFJlbWVtYmVyLCBwcm9wZXJ0aWVzIGxpa2UgIngiIGFyZW4ndCBhcyBzaW1wbGUgYXMgdGFyZ2V0LnN0eWxlLnByb3BlcnR5ID0gdmFsdWUgYmVjYXVzZSB0aGV5J3ZlIGdvdCB0byBiZSBhcHBsaWVkIHRvIGEgcHJveHkgb2JqZWN0IGFuZCB0aGVuIG1lcmdlZCBpbnRvIGEgdHJhbnNmb3JtIHN0cmluZyBpbiBhIHJlbmRlcmVyLgogICAgdmFyIHAgPSBfcHJvcGVydHlBbGlhc2VzW3Byb3BlcnR5XTsKICAgIHAgJiYgcC5pbmRleE9mKCIsIikgPCAwICYmIChwcm9wZXJ0eSA9IHApOwogICAgcmV0dXJuIHByb3BlcnR5IGluIF90cmFuc2Zvcm1Qcm9wcyAmJiBwcm9wZXJ0eSAhPT0gX3RyYW5zZm9ybU9yaWdpblByb3AgJiYgKHRhcmdldC5fZ3NhcC54IHx8IF9nZXQodGFyZ2V0LCAieCIpKSA/IHBsdWdpbiAmJiBfcmVjZW50U2V0dGVyUGx1Z2luID09PSBwbHVnaW4gPyBwcm9wZXJ0eSA9PT0gInNjYWxlIiA/IF9zZXR0ZXJTY2FsZSA6IF9zZXR0ZXJUcmFuc2Zvcm0gOiAoX3JlY2VudFNldHRlclBsdWdpbiA9IHBsdWdpbiB8fCB7fSkgJiYgKHByb3BlcnR5ID09PSAic2NhbGUiID8gX3NldHRlclNjYWxlV2l0aFJlbmRlciA6IF9zZXR0ZXJUcmFuc2Zvcm1XaXRoUmVuZGVyKSA6IHRhcmdldC5zdHlsZSAmJiAhX2lzVW5kZWZpbmVkKHRhcmdldC5zdHlsZVtwcm9wZXJ0eV0pID8gX3NldHRlckNTU1N0eWxlIDogfnByb3BlcnR5LmluZGV4T2YoIi0iKSA/IF9zZXR0ZXJDU1NQcm9wIDogX2dldFNldHRlcih0YXJnZXQsIHByb3BlcnR5KTsKICB9LAogIGNvcmU6IHsKICAgIF9yZW1vdmVQcm9wZXJ0eTogX3JlbW92ZVByb3BlcnR5LAogICAgX2dldE1hdHJpeDogX2dldE1hdHJpeAogIH0KfTsKZ3NhcC51dGlscy5jaGVja1ByZWZpeCA9IF9jaGVja1Byb3BQcmVmaXg7CgooZnVuY3Rpb24gKHBvc2l0aW9uQW5kU2NhbGUsIHJvdGF0aW9uLCBvdGhlcnMsIGFsaWFzZXMpIHsKICB2YXIgYWxsID0gX2ZvckVhY2hOYW1lKHBvc2l0aW9uQW5kU2NhbGUgKyAiLCIgKyByb3RhdGlvbiArICIsIiArIG90aGVycywgZnVuY3Rpb24gKG5hbWUpIHsKICAgIF90cmFuc2Zvcm1Qcm9wc1tuYW1lXSA9IDE7CiAgfSk7CgogIF9mb3JFYWNoTmFtZShyb3RhdGlvbiwgZnVuY3Rpb24gKG5hbWUpIHsKICAgIF9jb25maWcudW5pdHNbbmFtZV0gPSAiZGVnIjsKICAgIF9yb3RhdGlvbmFsUHJvcGVydGllc1tuYW1lXSA9IDE7CiAgfSk7CgogIF9wcm9wZXJ0eUFsaWFzZXNbYWxsWzEzXV0gPSBwb3NpdGlvbkFuZFNjYWxlICsgIiwiICsgcm90YXRpb247CgogIF9mb3JFYWNoTmFtZShhbGlhc2VzLCBmdW5jdGlvbiAobmFtZSkgewogICAgdmFyIHNwbGl0ID0gbmFtZS5zcGxpdCgiOiIpOwogICAgX3Byb3BlcnR5QWxpYXNlc1tzcGxpdFsxXV0gPSBhbGxbc3BsaXRbMF1dOwogIH0pOwp9KSgieCx5LHosc2NhbGUsc2NhbGVYLHNjYWxlWSx4UGVyY2VudCx5UGVyY2VudCIsICJyb3RhdGlvbixyb3RhdGlvblgscm90YXRpb25ZLHNrZXdYLHNrZXdZIiwgInRyYW5zZm9ybSx0cmFuc2Zvcm1PcmlnaW4sc3ZnT3JpZ2luLGZvcmNlM0Qsc21vb3RoT3JpZ2luLHRyYW5zZm9ybVBlcnNwZWN0aXZlIiwgIjA6dHJhbnNsYXRlWCwxOnRyYW5zbGF0ZVksMjp0cmFuc2xhdGVaLDg6cm90YXRlLDg6cm90YXRpb25aLDg6cm90YXRlWiw5OnJvdGF0ZVgsMTA6cm90YXRlWSIpOwoKX2ZvckVhY2hOYW1lKCJ4LHkseix0b3AscmlnaHQsYm90dG9tLGxlZnQsd2lkdGgsaGVpZ2h0LGZvbnRTaXplLHBhZGRpbmcsbWFyZ2luLHBlcnNwZWN0aXZlIiwgZnVuY3Rpb24gKG5hbWUpIHsKICBfY29uZmlnLnVuaXRzW25hbWVdID0gInB4IjsKfSk7Cgpnc2FwLnJlZ2lzdGVyUGx1Z2luKENTU1BsdWdpbik7CmV4cG9ydCB7IENTU1BsdWdpbiBhcyBkZWZhdWx0LCBfZ2V0QkJveCwgX2NyZWF0ZUVsZW1lbnQsIF9jaGVja1Byb3BQcmVmaXggYXMgY2hlY2tQcmVmaXggfTs="},{"version":3,"sources":["/app/app/src/js/gsapPackage/CSSPlugin.js"],"names":["gsap","_getProperty","_numExp","_numWithUnitExp","getUnit","_isString","_isUndefined","_renderComplexString","_relExp","_forEachName","_sortPropTweensByPriority","_colorStringFilter","_checkPlugin","_replaceRandom","_plugins","GSCache","PropTween","_config","_ticker","_round","_missingPlugin","_getSetter","_getCache","_colorExp","_setDefaults","_removeLinkedListItem","_win","_doc","_docElement","_pluginInitted","_tempDiv","_tempDivStyler","_recentSetterPlugin","_windowExists","window","_transformProps","_RAD2DEG","Math","PI","_DEG2RAD","_atan2","atan2","_bigNum","_capsExp","_horizontalExp","_complexExp","_propertyAliases","autoAlpha","scale","alpha","_renderCSSProp","ratio","data","set","t","p","round","s","c","u","_renderPropWithEnd","e","_renderCSSPropWithBeginning","b","_renderRoundedCSSProp","value","_renderNonTweeningValue","_renderNonTweeningValueOnlyAtEnd","_setterCSSStyle","target","property","style","_setterCSSProp","setProperty","_setterTransform","_gsap","_setterScale","scaleX","scaleY","_setterScaleWithRender","cache","renderTransform","_setterTransformWithRender","_transformProp","_transformOriginProp","_supports3D","_createElement","type","ns","createElementNS","replace","createElement","_getComputedProperty","skipPrefixFallback","cs","getComputedStyle","getPropertyValue","toLowerCase","_checkPropPrefix","_prefixes","split","element","preferPrefix","i","charAt","toUpperCase","substr","_initCore","document","documentElement","cssText","_getBBoxHack","swapIfPossible","svg","ownerSVGElement","getAttribute","oldParent","parentNode","oldSibling","nextSibling","oldCSS","bbox","appendChild","display","getBBox","_gsapBBox","insertBefore","removeChild","_getAttributeFallbacks","attributesArray","length","hasAttribute","_getBBox","bounds","error","call","width","height","x","y","_isSVG","getCTM","_removeProperty","removeProperty","removeAttribute","_addNonTweeningPT","plugin","beginning","end","onlySetAtEnd","pt","_pt","_props","push","_nonConvertibleUnits","deg","rad","turn","_convertToUnit","unit","curValue","parseFloat","curUnit","trim","horizontal","test","isRootSVG","tagName","measureProperty","amount","toPixels","toPercent","px","parent","isSVG","indexOf","body","time","position","_get","uncache","_parseTransform","origin","_firstTwoOnly","zOrigin","_specialProps","_tweenComplexCSSString","prop","start","index","matchIndex","a","result","startValues","startNum","color","startValue","endValue","endNum","chunk","endUnit","startUnit","relative","endValues","match","exec","substring","lastIndex","units","_next","m","r","_keywordToPercent","top","bottom","left","right","center","_convertKeywordsToPercentages","join","_renderClearProps","tween","_time","_dur","props","clearTransforms","clearProps","pr","_identity2DMatrix","_rotationalProperties","_isNullTransform","_getComputedTransformMatrixAsArray","matrixString","map","_getMatrix","force2D","matrix","temp","addedToDOM","transform","baseVal","consolidate","d","f","offsetParent","_applySVGOrigin","originIsAbsolute","smooth","matrixArray","pluginToAddPropTweensTo","xOriginOld","xOrigin","yOriginOld","yOrigin","xOffsetOld","xOffset","yOffsetOld","yOffset","tx","ty","originSplit","determinant","setAttribute","invertedScaleX","z","rotation","rotationX","rotationY","skewX","skewY","perspective","angle","cos","sin","a12","a22","t1","t2","t3","a13","a23","a33","a42","a43","a32","sqrt","abs","forceCSS","xPercent","offsetWidth","yPercent","offsetHeight","transformPerspective","force3D","_renderSVGTransforms","_renderCSSTransforms","_renderNon3DTransforms","_addPxTranslate","_zeroDeg","_zeroPx","_endParenthesis","_ref","transforms","use3D","_ref2","a11","a21","tan","_addRotationalPropTween","cap","isString","change","finalValue","direction","_assign","source","_addRawTransformPTs","startCache","exclude","endCache","name","l","side","vars","arguments","forEach","init","CSSPlugin","register","targetTest","nodeType","targets","startAt","specialProp","isTransformRelated","transformPropTween","hasPriority","add","parseTransform","smoothOrigin","dep","autoRound","get","aliases","getSetter","core","utils","checkPrefix","positionAndScale","others","all","registerPlugin","default"],"mappings":"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","sourcesContent":["/*!\n * CSSPlugin 3.9.1\n * https://greensock.com\n *\n * Copyright 2008-2021, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nimport { gsap, _getProperty, _numExp, _numWithUnitExp, getUnit, _isString, _isUndefined, _renderComplexString, _relExp, _forEachName, _sortPropTweensByPriority, _colorStringFilter, _checkPlugin, _replaceRandom, _plugins, GSCache, PropTween, _config, _ticker, _round, _missingPlugin, _getSetter, _getCache, _colorExp, _setDefaults, _removeLinkedListItem //for the commented-out className feature.\n} from \"./gsap-core.js\";\n\nvar _win,\n    _doc,\n    _docElement,\n    _pluginInitted,\n    _tempDiv,\n    _tempDivStyler,\n    _recentSetterPlugin,\n    _windowExists = function _windowExists() {\n  return typeof window !== \"undefined\";\n},\n    _transformProps = {},\n    _RAD2DEG = 180 / Math.PI,\n    _DEG2RAD = Math.PI / 180,\n    _atan2 = Math.atan2,\n    _bigNum = 1e8,\n    _capsExp = /([A-Z])/g,\n    _horizontalExp = /(?:left|right|width|margin|padding|x)/i,\n    _complexExp = /[\\s,\\(]\\S/,\n    _propertyAliases = {\n  autoAlpha: \"opacity,visibility\",\n  scale: \"scaleX,scaleY\",\n  alpha: \"opacity\"\n},\n    _renderCSSProp = function _renderCSSProp(ratio, data) {\n  return data.set(data.t, data.p, Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u, data);\n},\n    _renderPropWithEnd = function _renderPropWithEnd(ratio, data) {\n  return data.set(data.t, data.p, ratio === 1 ? data.e : Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u, data);\n},\n    _renderCSSPropWithBeginning = function _renderCSSPropWithBeginning(ratio, data) {\n  return data.set(data.t, data.p, ratio ? Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u : data.b, data);\n},\n    //if units change, we need a way to render the original unit/value when the tween goes all the way back to the beginning (ratio:0)\n_renderRoundedCSSProp = function _renderRoundedCSSProp(ratio, data) {\n  var value = data.s + data.c * ratio;\n  data.set(data.t, data.p, ~~(value + (value < 0 ? -.5 : .5)) + data.u, data);\n},\n    _renderNonTweeningValue = function _renderNonTweeningValue(ratio, data) {\n  return data.set(data.t, data.p, ratio ? data.e : data.b, data);\n},\n    _renderNonTweeningValueOnlyAtEnd = function _renderNonTweeningValueOnlyAtEnd(ratio, data) {\n  return data.set(data.t, data.p, ratio !== 1 ? data.b : data.e, data);\n},\n    _setterCSSStyle = function _setterCSSStyle(target, property, value) {\n  return target.style[property] = value;\n},\n    _setterCSSProp = function _setterCSSProp(target, property, value) {\n  return target.style.setProperty(property, value);\n},\n    _setterTransform = function _setterTransform(target, property, value) {\n  return target._gsap[property] = value;\n},\n    _setterScale = function _setterScale(target, property, value) {\n  return target._gsap.scaleX = target._gsap.scaleY = value;\n},\n    _setterScaleWithRender = function _setterScaleWithRender(target, property, value, data, ratio) {\n  var cache = target._gsap;\n  cache.scaleX = cache.scaleY = value;\n  cache.renderTransform(ratio, cache);\n},\n    _setterTransformWithRender = function _setterTransformWithRender(target, property, value, data, ratio) {\n  var cache = target._gsap;\n  cache[property] = value;\n  cache.renderTransform(ratio, cache);\n},\n    _transformProp = \"transform\",\n    _transformOriginProp = _transformProp + \"Origin\",\n    _supports3D,\n    _createElement = function _createElement(type, ns) {\n  var e = _doc.createElementNS ? _doc.createElementNS((ns || \"http://www.w3.org/1999/xhtml\").replace(/^https/, \"http\"), type) : _doc.createElement(type); //some servers swap in https for http in the namespace which can break things, making \"style\" inaccessible.\n\n  return e.style ? e : _doc.createElement(type); //some environments won't allow access to the element's style when created with a namespace in which case we default to the standard createElement() to work around the issue. Also note that when GSAP is embedded directly inside an SVG file, createElement() won't allow access to the style object in Firefox (see https://greensock.com/forums/topic/20215-problem-using-tweenmax-in-standalone-self-containing-svg-file-err-cannot-set-property-csstext-of-undefined/).\n},\n    _getComputedProperty = function _getComputedProperty(target, property, skipPrefixFallback) {\n  var cs = getComputedStyle(target);\n  return cs[property] || cs.getPropertyValue(property.replace(_capsExp, \"-$1\").toLowerCase()) || cs.getPropertyValue(property) || !skipPrefixFallback && _getComputedProperty(target, _checkPropPrefix(property) || property, 1) || \"\"; //css variables may not need caps swapped out for dashes and lowercase.\n},\n    _prefixes = \"O,Moz,ms,Ms,Webkit\".split(\",\"),\n    _checkPropPrefix = function _checkPropPrefix(property, element, preferPrefix) {\n  var e = element || _tempDiv,\n      s = e.style,\n      i = 5;\n\n  if (property in s && !preferPrefix) {\n    return property;\n  }\n\n  property = property.charAt(0).toUpperCase() + property.substr(1);\n\n  while (i-- && !(_prefixes[i] + property in s)) {}\n\n  return i < 0 ? null : (i === 3 ? \"ms\" : i >= 0 ? _prefixes[i] : \"\") + property;\n},\n    _initCore = function _initCore() {\n  if (_windowExists() && window.document) {\n    _win = window;\n    _doc = _win.document;\n    _docElement = _doc.documentElement;\n    _tempDiv = _createElement(\"div\") || {\n      style: {}\n    };\n    _tempDivStyler = _createElement(\"div\");\n    _transformProp = _checkPropPrefix(_transformProp);\n    _transformOriginProp = _transformProp + \"Origin\";\n    _tempDiv.style.cssText = \"border-width:0;line-height:0;position:absolute;padding:0\"; //make sure to override certain properties that may contaminate measurements, in case the user has overreaching style sheets.\n\n    _supports3D = !!_checkPropPrefix(\"perspective\");\n    _pluginInitted = 1;\n  }\n},\n    _getBBoxHack = function _getBBoxHack(swapIfPossible) {\n  //works around issues in some browsers (like Firefox) that don't correctly report getBBox() on SVG elements inside a <defs> element and/or <mask>. We try creating an SVG, adding it to the documentElement and toss the element in there so that it's definitely part of the rendering tree, then grab the bbox and if it works, we actually swap out the original getBBox() method for our own that does these extra steps whenever getBBox is needed. This helps ensure that performance is optimal (only do all these extra steps when absolutely necessary...most elements don't need it).\n  var svg = _createElement(\"svg\", this.ownerSVGElement && this.ownerSVGElement.getAttribute(\"xmlns\") || \"http://www.w3.org/2000/svg\"),\n      oldParent = this.parentNode,\n      oldSibling = this.nextSibling,\n      oldCSS = this.style.cssText,\n      bbox;\n\n  _docElement.appendChild(svg);\n\n  svg.appendChild(this);\n  this.style.display = \"block\";\n\n  if (swapIfPossible) {\n    try {\n      bbox = this.getBBox();\n      this._gsapBBox = this.getBBox; //store the original\n\n      this.getBBox = _getBBoxHack;\n    } catch (e) {}\n  } else if (this._gsapBBox) {\n    bbox = this._gsapBBox();\n  }\n\n  if (oldParent) {\n    if (oldSibling) {\n      oldParent.insertBefore(this, oldSibling);\n    } else {\n      oldParent.appendChild(this);\n    }\n  }\n\n  _docElement.removeChild(svg);\n\n  this.style.cssText = oldCSS;\n  return bbox;\n},\n    _getAttributeFallbacks = function _getAttributeFallbacks(target, attributesArray) {\n  var i = attributesArray.length;\n\n  while (i--) {\n    if (target.hasAttribute(attributesArray[i])) {\n      return target.getAttribute(attributesArray[i]);\n    }\n  }\n},\n    _getBBox = function _getBBox(target) {\n  var bounds;\n\n  try {\n    bounds = target.getBBox(); //Firefox throws errors if you try calling getBBox() on an SVG element that's not rendered (like in a <symbol> or <defs>). https://bugzilla.mozilla.org/show_bug.cgi?id=612118\n  } catch (error) {\n    bounds = _getBBoxHack.call(target, true);\n  }\n\n  bounds && (bounds.width || bounds.height) || target.getBBox === _getBBoxHack || (bounds = _getBBoxHack.call(target, true)); //some browsers (like Firefox) misreport the bounds if the element has zero width and height (it just assumes it's at x:0, y:0), thus we need to manually grab the position in that case.\n\n  return bounds && !bounds.width && !bounds.x && !bounds.y ? {\n    x: +_getAttributeFallbacks(target, [\"x\", \"cx\", \"x1\"]) || 0,\n    y: +_getAttributeFallbacks(target, [\"y\", \"cy\", \"y1\"]) || 0,\n    width: 0,\n    height: 0\n  } : bounds;\n},\n    _isSVG = function _isSVG(e) {\n  return !!(e.getCTM && (!e.parentNode || e.ownerSVGElement) && _getBBox(e));\n},\n    //reports if the element is an SVG on which getBBox() actually works\n_removeProperty = function _removeProperty(target, property) {\n  if (property) {\n    var style = target.style;\n\n    if (property in _transformProps && property !== _transformOriginProp) {\n      property = _transformProp;\n    }\n\n    if (style.removeProperty) {\n      if (property.substr(0, 2) === \"ms\" || property.substr(0, 6) === \"webkit\") {\n        //Microsoft and some Webkit browsers don't conform to the standard of capitalizing the first prefix character, so we adjust so that when we prefix the caps with a dash, it's correct (otherwise it'd be \"ms-transform\" instead of \"-ms-transform\" for IE9, for example)\n        property = \"-\" + property;\n      }\n\n      style.removeProperty(property.replace(_capsExp, \"-$1\").toLowerCase());\n    } else {\n      //note: old versions of IE use \"removeAttribute()\" instead of \"removeProperty()\"\n      style.removeAttribute(property);\n    }\n  }\n},\n    _addNonTweeningPT = function _addNonTweeningPT(plugin, target, property, beginning, end, onlySetAtEnd) {\n  var pt = new PropTween(plugin._pt, target, property, 0, 1, onlySetAtEnd ? _renderNonTweeningValueOnlyAtEnd : _renderNonTweeningValue);\n  plugin._pt = pt;\n  pt.b = beginning;\n  pt.e = end;\n\n  plugin._props.push(property);\n\n  return pt;\n},\n    _nonConvertibleUnits = {\n  deg: 1,\n  rad: 1,\n  turn: 1\n},\n    //takes a single value like 20px and converts it to the unit specified, like \"%\", returning only the numeric amount.\n_convertToUnit = function _convertToUnit(target, property, value, unit) {\n  var curValue = parseFloat(value) || 0,\n      curUnit = (value + \"\").trim().substr((curValue + \"\").length) || \"px\",\n      // some browsers leave extra whitespace at the beginning of CSS variables, hence the need to trim()\n  style = _tempDiv.style,\n      horizontal = _horizontalExp.test(property),\n      isRootSVG = target.tagName.toLowerCase() === \"svg\",\n      measureProperty = (isRootSVG ? \"client\" : \"offset\") + (horizontal ? \"Width\" : \"Height\"),\n      amount = 100,\n      toPixels = unit === \"px\",\n      toPercent = unit === \"%\",\n      px,\n      parent,\n      cache,\n      isSVG;\n\n  if (unit === curUnit || !curValue || _nonConvertibleUnits[unit] || _nonConvertibleUnits[curUnit]) {\n    return curValue;\n  }\n\n  curUnit !== \"px\" && !toPixels && (curValue = _convertToUnit(target, property, value, \"px\"));\n  isSVG = target.getCTM && _isSVG(target);\n\n  if ((toPercent || curUnit === \"%\") && (_transformProps[property] || ~property.indexOf(\"adius\"))) {\n    px = isSVG ? target.getBBox()[horizontal ? \"width\" : \"height\"] : target[measureProperty];\n    return _round(toPercent ? curValue / px * amount : curValue / 100 * px);\n  }\n\n  style[horizontal ? \"width\" : \"height\"] = amount + (toPixels ? curUnit : unit);\n  parent = ~property.indexOf(\"adius\") || unit === \"em\" && target.appendChild && !isRootSVG ? target : target.parentNode;\n\n  if (isSVG) {\n    parent = (target.ownerSVGElement || {}).parentNode;\n  }\n\n  if (!parent || parent === _doc || !parent.appendChild) {\n    parent = _doc.body;\n  }\n\n  cache = parent._gsap;\n\n  if (cache && toPercent && cache.width && horizontal && cache.time === _ticker.time) {\n    return _round(curValue / cache.width * amount);\n  } else {\n    (toPercent || curUnit === \"%\") && (style.position = _getComputedProperty(target, \"position\"));\n    parent === target && (style.position = \"static\"); // like for borderRadius, if it's a % we must have it relative to the target itself but that may not have position: relative or position: absolute in which case it'd go up the chain until it finds its offsetParent (bad). position: static protects against that.\n\n    parent.appendChild(_tempDiv);\n    px = _tempDiv[measureProperty];\n    parent.removeChild(_tempDiv);\n    style.position = \"absolute\";\n\n    if (horizontal && toPercent) {\n      cache = _getCache(parent);\n      cache.time = _ticker.time;\n      cache.width = parent[measureProperty];\n    }\n  }\n\n  return _round(toPixels ? px * curValue / amount : px && curValue ? amount / px * curValue : 0);\n},\n    _get = function _get(target, property, unit, uncache) {\n  var value;\n  _pluginInitted || _initCore();\n\n  if (property in _propertyAliases && property !== \"transform\") {\n    property = _propertyAliases[property];\n\n    if (~property.indexOf(\",\")) {\n      property = property.split(\",\")[0];\n    }\n  }\n\n  if (_transformProps[property] && property !== \"transform\") {\n    value = _parseTransform(target, uncache);\n    value = property !== \"transformOrigin\" ? value[property] : value.svg ? value.origin : _firstTwoOnly(_getComputedProperty(target, _transformOriginProp)) + \" \" + value.zOrigin + \"px\";\n  } else {\n    value = target.style[property];\n\n    if (!value || value === \"auto\" || uncache || ~(value + \"\").indexOf(\"calc(\")) {\n      value = _specialProps[property] && _specialProps[property](target, property, unit) || _getComputedProperty(target, property) || _getProperty(target, property) || (property === \"opacity\" ? 1 : 0); // note: some browsers, like Firefox, don't report borderRadius correctly! Instead, it only reports every corner like  borderTopLeftRadius\n    }\n  }\n\n  return unit && !~(value + \"\").trim().indexOf(\" \") ? _convertToUnit(target, property, value, unit) + unit : value;\n},\n    _tweenComplexCSSString = function _tweenComplexCSSString(target, prop, start, end) {\n  //note: we call _tweenComplexCSSString.call(pluginInstance...) to ensure that it's scoped properly. We may call it from within a plugin too, thus \"this\" would refer to the plugin.\n  if (!start || start === \"none\") {\n    // some browsers like Safari actually PREFER the prefixed property and mis-report the unprefixed value like clipPath (BUG). In other words, even though clipPath exists in the style (\"clipPath\" in target.style) and it's set in the CSS properly (along with -webkit-clip-path), Safari reports clipPath as \"none\" whereas WebkitClipPath reports accurately like \"ellipse(100% 0% at 50% 0%)\", so in this case we must SWITCH to using the prefixed property instead. See https://greensock.com/forums/topic/18310-clippath-doesnt-work-on-ios/\n    var p = _checkPropPrefix(prop, target, 1),\n        s = p && _getComputedProperty(target, p, 1);\n\n    if (s && s !== start) {\n      prop = p;\n      start = s;\n    } else if (prop === \"borderColor\") {\n      start = _getComputedProperty(target, \"borderTopColor\"); // Firefox bug: always reports \"borderColor\" as \"\", so we must fall back to borderTopColor. See https://greensock.com/forums/topic/24583-how-to-return-colors-that-i-had-after-reverse/\n    }\n  }\n\n  var pt = new PropTween(this._pt, target.style, prop, 0, 1, _renderComplexString),\n      index = 0,\n      matchIndex = 0,\n      a,\n      result,\n      startValues,\n      startNum,\n      color,\n      startValue,\n      endValue,\n      endNum,\n      chunk,\n      endUnit,\n      startUnit,\n      relative,\n      endValues;\n  pt.b = start;\n  pt.e = end;\n  start += \"\"; //ensure values are strings\n\n  end += \"\";\n\n  if (end === \"auto\") {\n    target.style[prop] = end;\n    end = _getComputedProperty(target, prop) || end;\n    target.style[prop] = start;\n  }\n\n  a = [start, end];\n\n  _colorStringFilter(a); //pass an array with the starting and ending values and let the filter do whatever it needs to the values. If colors are found, it returns true and then we must match where the color shows up order-wise because for things like boxShadow, sometimes the browser provides the computed values with the color FIRST, but the user provides it with the color LAST, so flip them if necessary. Same for drop-shadow().\n\n\n  start = a[0];\n  end = a[1];\n  startValues = start.match(_numWithUnitExp) || [];\n  endValues = end.match(_numWithUnitExp) || [];\n\n  if (endValues.length) {\n    while (result = _numWithUnitExp.exec(end)) {\n      endValue = result[0];\n      chunk = end.substring(index, result.index);\n\n      if (color) {\n        color = (color + 1) % 5;\n      } else if (chunk.substr(-5) === \"rgba(\" || chunk.substr(-5) === \"hsla(\") {\n        color = 1;\n      }\n\n      if (endValue !== (startValue = startValues[matchIndex++] || \"\")) {\n        startNum = parseFloat(startValue) || 0;\n        startUnit = startValue.substr((startNum + \"\").length);\n        relative = endValue.charAt(1) === \"=\" ? +(endValue.charAt(0) + \"1\") : 0;\n\n        if (relative) {\n          endValue = endValue.substr(2);\n        }\n\n        endNum = parseFloat(endValue);\n        endUnit = endValue.substr((endNum + \"\").length);\n        index = _numWithUnitExp.lastIndex - endUnit.length;\n\n        if (!endUnit) {\n          //if something like \"perspective:300\" is passed in and we must add a unit to the end\n          endUnit = endUnit || _config.units[prop] || startUnit;\n\n          if (index === end.length) {\n            end += endUnit;\n            pt.e += endUnit;\n          }\n        }\n\n        if (startUnit !== endUnit) {\n          startNum = _convertToUnit(target, prop, startValue, endUnit) || 0;\n        } //these nested PropTweens are handled in a special way - we'll never actually call a render or setter method on them. We'll just loop through them in the parent complex string PropTween's render method.\n\n\n        pt._pt = {\n          _next: pt._pt,\n          p: chunk || matchIndex === 1 ? chunk : \",\",\n          //note: SVG spec allows omission of comma/space when a negative sign is wedged between two numbers, like 2.5-5.3 instead of 2.5,-5.3 but when tweening, the negative value may switch to positive, so we insert the comma just in case.\n          s: startNum,\n          c: relative ? relative * endNum : endNum - startNum,\n          m: color && color < 4 || prop === \"zIndex\" ? Math.round : 0\n        };\n      }\n    }\n\n    pt.c = index < end.length ? end.substring(index, end.length) : \"\"; //we use the \"c\" of the PropTween to store the final part of the string (after the last number)\n  } else {\n    pt.r = prop === \"display\" && end === \"none\" ? _renderNonTweeningValueOnlyAtEnd : _renderNonTweeningValue;\n  }\n\n  _relExp.test(end) && (pt.e = 0); //if the end string contains relative values or dynamic random(...) values, delete the end it so that on the final render we don't actually set it to the string with += or -= characters (forces it to use the calculated value).\n\n  this._pt = pt; //start the linked list with this new PropTween. Remember, we call _tweenComplexCSSString.call(pluginInstance...) to ensure that it's scoped properly. We may call it from within another plugin too, thus \"this\" would refer to the plugin.\n\n  return pt;\n},\n    _keywordToPercent = {\n  top: \"0%\",\n  bottom: \"100%\",\n  left: \"0%\",\n  right: \"100%\",\n  center: \"50%\"\n},\n    _convertKeywordsToPercentages = function _convertKeywordsToPercentages(value) {\n  var split = value.split(\" \"),\n      x = split[0],\n      y = split[1] || \"50%\";\n\n  if (x === \"top\" || x === \"bottom\" || y === \"left\" || y === \"right\") {\n    //the user provided them in the wrong order, so flip them\n    value = x;\n    x = y;\n    y = value;\n  }\n\n  split[0] = _keywordToPercent[x] || x;\n  split[1] = _keywordToPercent[y] || y;\n  return split.join(\" \");\n},\n    _renderClearProps = function _renderClearProps(ratio, data) {\n  if (data.tween && data.tween._time === data.tween._dur) {\n    var target = data.t,\n        style = target.style,\n        props = data.u,\n        cache = target._gsap,\n        prop,\n        clearTransforms,\n        i;\n\n    if (props === \"all\" || props === true) {\n      style.cssText = \"\";\n      clearTransforms = 1;\n    } else {\n      props = props.split(\",\");\n      i = props.length;\n\n      while (--i > -1) {\n        prop = props[i];\n\n        if (_transformProps[prop]) {\n          clearTransforms = 1;\n          prop = prop === \"transformOrigin\" ? _transformOriginProp : _transformProp;\n        }\n\n        _removeProperty(target, prop);\n      }\n    }\n\n    if (clearTransforms) {\n      _removeProperty(target, _transformProp);\n\n      if (cache) {\n        cache.svg && target.removeAttribute(\"transform\");\n\n        _parseTransform(target, 1); // force all the cached values back to \"normal\"/identity, otherwise if there's another tween that's already set to render transforms on this element, it could display the wrong values.\n\n\n        cache.uncache = 1;\n      }\n    }\n  }\n},\n    // note: specialProps should return 1 if (and only if) they have a non-zero priority. It indicates we need to sort the linked list.\n_specialProps = {\n  clearProps: function clearProps(plugin, target, property, endValue, tween) {\n    if (tween.data !== \"isFromStart\") {\n      var pt = plugin._pt = new PropTween(plugin._pt, target, property, 0, 0, _renderClearProps);\n      pt.u = endValue;\n      pt.pr = -10;\n      pt.tween = tween;\n\n      plugin._props.push(property);\n\n      return 1;\n    }\n  }\n  /* className feature (about 0.4kb gzipped).\n  , className(plugin, target, property, endValue, tween) {\n  \tlet _renderClassName = (ratio, data) => {\n  \t\t\tdata.css.render(ratio, data.css);\n  \t\t\tif (!ratio || ratio === 1) {\n  \t\t\t\tlet inline = data.rmv,\n  \t\t\t\t\ttarget = data.t,\n  \t\t\t\t\tp;\n  \t\t\t\ttarget.setAttribute(\"class\", ratio ? data.e : data.b);\n  \t\t\t\tfor (p in inline) {\n  \t\t\t\t\t_removeProperty(target, p);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t},\n  \t\t_getAllStyles = (target) => {\n  \t\t\tlet styles = {},\n  \t\t\t\tcomputed = getComputedStyle(target),\n  \t\t\t\tp;\n  \t\t\tfor (p in computed) {\n  \t\t\t\tif (isNaN(p) && p !== \"cssText\" && p !== \"length\") {\n  \t\t\t\t\tstyles[p] = computed[p];\n  \t\t\t\t}\n  \t\t\t}\n  \t\t\t_setDefaults(styles, _parseTransform(target, 1));\n  \t\t\treturn styles;\n  \t\t},\n  \t\tstartClassList = target.getAttribute(\"class\"),\n  \t\tstyle = target.style,\n  \t\tcssText = style.cssText,\n  \t\tcache = target._gsap,\n  \t\tclassPT = cache.classPT,\n  \t\tinlineToRemoveAtEnd = {},\n  \t\tdata = {t:target, plugin:plugin, rmv:inlineToRemoveAtEnd, b:startClassList, e:(endValue.charAt(1) !== \"=\") ? endValue : startClassList.replace(new RegExp(\"(?:\\\\s|^)\" + endValue.substr(2) + \"(?![\\\\w-])\"), \"\") + ((endValue.charAt(0) === \"+\") ? \" \" + endValue.substr(2) : \"\")},\n  \t\tchangingVars = {},\n  \t\tstartVars = _getAllStyles(target),\n  \t\ttransformRelated = /(transform|perspective)/i,\n  \t\tendVars, p;\n  \tif (classPT) {\n  \t\tclassPT.r(1, classPT.d);\n  \t\t_removeLinkedListItem(classPT.d.plugin, classPT, \"_pt\");\n  \t}\n  \ttarget.setAttribute(\"class\", data.e);\n  \tendVars = _getAllStyles(target, true);\n  \ttarget.setAttribute(\"class\", startClassList);\n  \tfor (p in endVars) {\n  \t\tif (endVars[p] !== startVars[p] && !transformRelated.test(p)) {\n  \t\t\tchangingVars[p] = endVars[p];\n  \t\t\tif (!style[p] && style[p] !== \"0\") {\n  \t\t\t\tinlineToRemoveAtEnd[p] = 1;\n  \t\t\t}\n  \t\t}\n  \t}\n  \tcache.classPT = plugin._pt = new PropTween(plugin._pt, target, \"className\", 0, 0, _renderClassName, data, 0, -11);\n  \tif (style.cssText !== cssText) { //only apply if things change. Otherwise, in cases like a background-image that's pulled dynamically, it could cause a refresh. See https://greensock.com/forums/topic/20368-possible-gsap-bug-switching-classnames-in-chrome/.\n  \t\tstyle.cssText = cssText; //we recorded cssText before we swapped classes and ran _getAllStyles() because in cases when a className tween is overwritten, we remove all the related tweening properties from that class change (otherwise class-specific stuff can't override properties we've directly set on the target's style object due to specificity).\n  \t}\n  \t_parseTransform(target, true); //to clear the caching of transforms\n  \tdata.css = new gsap.plugins.css();\n  \tdata.css.init(target, changingVars, tween);\n  \tplugin._props.push(...data.css._props);\n  \treturn 1;\n  }\n  */\n\n},\n\n/*\n * --------------------------------------------------------------------------------------\n * TRANSFORMS\n * --------------------------------------------------------------------------------------\n */\n_identity2DMatrix = [1, 0, 0, 1, 0, 0],\n    _rotationalProperties = {},\n    _isNullTransform = function _isNullTransform(value) {\n  return value === \"matrix(1, 0, 0, 1, 0, 0)\" || value === \"none\" || !value;\n},\n    _getComputedTransformMatrixAsArray = function _getComputedTransformMatrixAsArray(target) {\n  var matrixString = _getComputedProperty(target, _transformProp);\n\n  return _isNullTransform(matrixString) ? _identity2DMatrix : matrixString.substr(7).match(_numExp).map(_round);\n},\n    _getMatrix = function _getMatrix(target, force2D) {\n  var cache = target._gsap || _getCache(target),\n      style = target.style,\n      matrix = _getComputedTransformMatrixAsArray(target),\n      parent,\n      nextSibling,\n      temp,\n      addedToDOM;\n\n  if (cache.svg && target.getAttribute(\"transform\")) {\n    temp = target.transform.baseVal.consolidate().matrix; //ensures that even complex values like \"translate(50,60) rotate(135,0,0)\" are parsed because it mashes it into a matrix.\n\n    matrix = [temp.a, temp.b, temp.c, temp.d, temp.e, temp.f];\n    return matrix.join(\",\") === \"1,0,0,1,0,0\" ? _identity2DMatrix : matrix;\n  } else if (matrix === _identity2DMatrix && !target.offsetParent && target !== _docElement && !cache.svg) {\n    //note: if offsetParent is null, that means the element isn't in the normal document flow, like if it has display:none or one of its ancestors has display:none). Firefox returns null for getComputedStyle() if the element is in an iframe that has display:none. https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n    //browsers don't report transforms accurately unless the element is in the DOM and has a display value that's not \"none\". Firefox and Microsoft browsers have a partial bug where they'll report transforms even if display:none BUT not any percentage-based values like translate(-50%, 8px) will be reported as if it's translate(0, 8px).\n    temp = style.display;\n    style.display = \"block\";\n    parent = target.parentNode;\n\n    if (!parent || !target.offsetParent) {\n      // note: in 3.3.0 we switched target.offsetParent to _doc.body.contains(target) to avoid [sometimes unnecessary] MutationObserver calls but that wasn't adequate because there are edge cases where nested position: fixed elements need to get reparented to accurately sense transforms. See https://github.com/greensock/GSAP/issues/388 and https://github.com/greensock/GSAP/issues/375\n      addedToDOM = 1; //flag\n\n      nextSibling = target.nextSibling;\n\n      _docElement.appendChild(target); //we must add it to the DOM in order to get values properly\n\n    }\n\n    matrix = _getComputedTransformMatrixAsArray(target);\n    temp ? style.display = temp : _removeProperty(target, \"display\");\n\n    if (addedToDOM) {\n      nextSibling ? parent.insertBefore(target, nextSibling) : parent ? parent.appendChild(target) : _docElement.removeChild(target);\n    }\n  }\n\n  return force2D && matrix.length > 6 ? [matrix[0], matrix[1], matrix[4], matrix[5], matrix[12], matrix[13]] : matrix;\n},\n    _applySVGOrigin = function _applySVGOrigin(target, origin, originIsAbsolute, smooth, matrixArray, pluginToAddPropTweensTo) {\n  var cache = target._gsap,\n      matrix = matrixArray || _getMatrix(target, true),\n      xOriginOld = cache.xOrigin || 0,\n      yOriginOld = cache.yOrigin || 0,\n      xOffsetOld = cache.xOffset || 0,\n      yOffsetOld = cache.yOffset || 0,\n      a = matrix[0],\n      b = matrix[1],\n      c = matrix[2],\n      d = matrix[3],\n      tx = matrix[4],\n      ty = matrix[5],\n      originSplit = origin.split(\" \"),\n      xOrigin = parseFloat(originSplit[0]) || 0,\n      yOrigin = parseFloat(originSplit[1]) || 0,\n      bounds,\n      determinant,\n      x,\n      y;\n\n  if (!originIsAbsolute) {\n    bounds = _getBBox(target);\n    xOrigin = bounds.x + (~originSplit[0].indexOf(\"%\") ? xOrigin / 100 * bounds.width : xOrigin);\n    yOrigin = bounds.y + (~(originSplit[1] || originSplit[0]).indexOf(\"%\") ? yOrigin / 100 * bounds.height : yOrigin);\n  } else if (matrix !== _identity2DMatrix && (determinant = a * d - b * c)) {\n    //if it's zero (like if scaleX and scaleY are zero), skip it to avoid errors with dividing by zero.\n    x = xOrigin * (d / determinant) + yOrigin * (-c / determinant) + (c * ty - d * tx) / determinant;\n    y = xOrigin * (-b / determinant) + yOrigin * (a / determinant) - (a * ty - b * tx) / determinant;\n    xOrigin = x;\n    yOrigin = y;\n  }\n\n  if (smooth || smooth !== false && cache.smooth) {\n    tx = xOrigin - xOriginOld;\n    ty = yOrigin - yOriginOld;\n    cache.xOffset = xOffsetOld + (tx * a + ty * c) - tx;\n    cache.yOffset = yOffsetOld + (tx * b + ty * d) - ty;\n  } else {\n    cache.xOffset = cache.yOffset = 0;\n  }\n\n  cache.xOrigin = xOrigin;\n  cache.yOrigin = yOrigin;\n  cache.smooth = !!smooth;\n  cache.origin = origin;\n  cache.originIsAbsolute = !!originIsAbsolute;\n  target.style[_transformOriginProp] = \"0px 0px\"; //otherwise, if someone sets  an origin via CSS, it will likely interfere with the SVG transform attribute ones (because remember, we're baking the origin into the matrix() value).\n\n  if (pluginToAddPropTweensTo) {\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"xOrigin\", xOriginOld, xOrigin);\n\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"yOrigin\", yOriginOld, yOrigin);\n\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"xOffset\", xOffsetOld, cache.xOffset);\n\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"yOffset\", yOffsetOld, cache.yOffset);\n  }\n\n  target.setAttribute(\"data-svg-origin\", xOrigin + \" \" + yOrigin);\n},\n    _parseTransform = function _parseTransform(target, uncache) {\n  var cache = target._gsap || new GSCache(target);\n\n  if (\"x\" in cache && !uncache && !cache.uncache) {\n    return cache;\n  }\n\n  var style = target.style,\n      invertedScaleX = cache.scaleX < 0,\n      px = \"px\",\n      deg = \"deg\",\n      origin = _getComputedProperty(target, _transformOriginProp) || \"0\",\n      x,\n      y,\n      z,\n      scaleX,\n      scaleY,\n      rotation,\n      rotationX,\n      rotationY,\n      skewX,\n      skewY,\n      perspective,\n      xOrigin,\n      yOrigin,\n      matrix,\n      angle,\n      cos,\n      sin,\n      a,\n      b,\n      c,\n      d,\n      a12,\n      a22,\n      t1,\n      t2,\n      t3,\n      a13,\n      a23,\n      a33,\n      a42,\n      a43,\n      a32;\n  x = y = z = rotation = rotationX = rotationY = skewX = skewY = perspective = 0;\n  scaleX = scaleY = 1;\n  cache.svg = !!(target.getCTM && _isSVG(target));\n  matrix = _getMatrix(target, cache.svg);\n\n  if (cache.svg) {\n    t1 = (!cache.uncache || origin === \"0px 0px\") && !uncache && target.getAttribute(\"data-svg-origin\"); // if origin is 0,0 and cache.uncache is true, let the recorded data-svg-origin stay. Otherwise, whenever we set cache.uncache to true, we'd need to set element.style.transformOrigin = (cache.xOrigin - bbox.x) + \"px \" + (cache.yOrigin - bbox.y) + \"px\". Remember, to work around browser inconsistencies we always force SVG elements' transformOrigin to 0,0 and offset the translation accordingly.\n\n    _applySVGOrigin(target, t1 || origin, !!t1 || cache.originIsAbsolute, cache.smooth !== false, matrix);\n  }\n\n  xOrigin = cache.xOrigin || 0;\n  yOrigin = cache.yOrigin || 0;\n\n  if (matrix !== _identity2DMatrix) {\n    a = matrix[0]; //a11\n\n    b = matrix[1]; //a21\n\n    c = matrix[2]; //a31\n\n    d = matrix[3]; //a41\n\n    x = a12 = matrix[4];\n    y = a22 = matrix[5]; //2D matrix\n\n    if (matrix.length === 6) {\n      scaleX = Math.sqrt(a * a + b * b);\n      scaleY = Math.sqrt(d * d + c * c);\n      rotation = a || b ? _atan2(b, a) * _RAD2DEG : 0; //note: if scaleX is 0, we cannot accurately measure rotation. Same for skewX with a scaleY of 0. Therefore, we default to the previously recorded value (or zero if that doesn't exist).\n\n      skewX = c || d ? _atan2(c, d) * _RAD2DEG + rotation : 0;\n      skewX && (scaleY *= Math.abs(Math.cos(skewX * _DEG2RAD)));\n\n      if (cache.svg) {\n        x -= xOrigin - (xOrigin * a + yOrigin * c);\n        y -= yOrigin - (xOrigin * b + yOrigin * d);\n      } //3D matrix\n\n    } else {\n      a32 = matrix[6];\n      a42 = matrix[7];\n      a13 = matrix[8];\n      a23 = matrix[9];\n      a33 = matrix[10];\n      a43 = matrix[11];\n      x = matrix[12];\n      y = matrix[13];\n      z = matrix[14];\n      angle = _atan2(a32, a33);\n      rotationX = angle * _RAD2DEG; //rotationX\n\n      if (angle) {\n        cos = Math.cos(-angle);\n        sin = Math.sin(-angle);\n        t1 = a12 * cos + a13 * sin;\n        t2 = a22 * cos + a23 * sin;\n        t3 = a32 * cos + a33 * sin;\n        a13 = a12 * -sin + a13 * cos;\n        a23 = a22 * -sin + a23 * cos;\n        a33 = a32 * -sin + a33 * cos;\n        a43 = a42 * -sin + a43 * cos;\n        a12 = t1;\n        a22 = t2;\n        a32 = t3;\n      } //rotationY\n\n\n      angle = _atan2(-c, a33);\n      rotationY = angle * _RAD2DEG;\n\n      if (angle) {\n        cos = Math.cos(-angle);\n        sin = Math.sin(-angle);\n        t1 = a * cos - a13 * sin;\n        t2 = b * cos - a23 * sin;\n        t3 = c * cos - a33 * sin;\n        a43 = d * sin + a43 * cos;\n        a = t1;\n        b = t2;\n        c = t3;\n      } //rotationZ\n\n\n      angle = _atan2(b, a);\n      rotation = angle * _RAD2DEG;\n\n      if (angle) {\n        cos = Math.cos(angle);\n        sin = Math.sin(angle);\n        t1 = a * cos + b * sin;\n        t2 = a12 * cos + a22 * sin;\n        b = b * cos - a * sin;\n        a22 = a22 * cos - a12 * sin;\n        a = t1;\n        a12 = t2;\n      }\n\n      if (rotationX && Math.abs(rotationX) + Math.abs(rotation) > 359.9) {\n        //when rotationY is set, it will often be parsed as 180 degrees different than it should be, and rotationX and rotation both being 180 (it looks the same), so we adjust for that here.\n        rotationX = rotation = 0;\n        rotationY = 180 - rotationY;\n      }\n\n      scaleX = _round(Math.sqrt(a * a + b * b + c * c));\n      scaleY = _round(Math.sqrt(a22 * a22 + a32 * a32));\n      angle = _atan2(a12, a22);\n      skewX = Math.abs(angle) > 0.0002 ? angle * _RAD2DEG : 0;\n      perspective = a43 ? 1 / (a43 < 0 ? -a43 : a43) : 0;\n    }\n\n    if (cache.svg) {\n      //sense if there are CSS transforms applied on an SVG element in which case we must overwrite them when rendering. The transform attribute is more reliable cross-browser, but we can't just remove the CSS ones because they may be applied in a CSS rule somewhere (not just inline).\n      t1 = target.getAttribute(\"transform\");\n      cache.forceCSS = target.setAttribute(\"transform\", \"\") || !_isNullTransform(_getComputedProperty(target, _transformProp));\n      t1 && target.setAttribute(\"transform\", t1);\n    }\n  }\n\n  if (Math.abs(skewX) > 90 && Math.abs(skewX) < 270) {\n    if (invertedScaleX) {\n      scaleX *= -1;\n      skewX += rotation <= 0 ? 180 : -180;\n      rotation += rotation <= 0 ? 180 : -180;\n    } else {\n      scaleY *= -1;\n      skewX += skewX <= 0 ? 180 : -180;\n    }\n  }\n\n  cache.x = x - ((cache.xPercent = x && (cache.xPercent || (Math.round(target.offsetWidth / 2) === Math.round(-x) ? -50 : 0))) ? target.offsetWidth * cache.xPercent / 100 : 0) + px;\n  cache.y = y - ((cache.yPercent = y && (cache.yPercent || (Math.round(target.offsetHeight / 2) === Math.round(-y) ? -50 : 0))) ? target.offsetHeight * cache.yPercent / 100 : 0) + px;\n  cache.z = z + px;\n  cache.scaleX = _round(scaleX);\n  cache.scaleY = _round(scaleY);\n  cache.rotation = _round(rotation) + deg;\n  cache.rotationX = _round(rotationX) + deg;\n  cache.rotationY = _round(rotationY) + deg;\n  cache.skewX = skewX + deg;\n  cache.skewY = skewY + deg;\n  cache.transformPerspective = perspective + px;\n\n  if (cache.zOrigin = parseFloat(origin.split(\" \")[2]) || 0) {\n    style[_transformOriginProp] = _firstTwoOnly(origin);\n  }\n\n  cache.xOffset = cache.yOffset = 0;\n  cache.force3D = _config.force3D;\n  cache.renderTransform = cache.svg ? _renderSVGTransforms : _supports3D ? _renderCSSTransforms : _renderNon3DTransforms;\n  cache.uncache = 0;\n  return cache;\n},\n    _firstTwoOnly = function _firstTwoOnly(value) {\n  return (value = value.split(\" \"))[0] + \" \" + value[1];\n},\n    //for handling transformOrigin values, stripping out the 3rd dimension\n_addPxTranslate = function _addPxTranslate(target, start, value) {\n  var unit = getUnit(start);\n  return _round(parseFloat(start) + parseFloat(_convertToUnit(target, \"x\", value + \"px\", unit))) + unit;\n},\n    _renderNon3DTransforms = function _renderNon3DTransforms(ratio, cache) {\n  cache.z = \"0px\";\n  cache.rotationY = cache.rotationX = \"0deg\";\n  cache.force3D = 0;\n\n  _renderCSSTransforms(ratio, cache);\n},\n    _zeroDeg = \"0deg\",\n    _zeroPx = \"0px\",\n    _endParenthesis = \") \",\n    _renderCSSTransforms = function _renderCSSTransforms(ratio, cache) {\n  var _ref = cache || this,\n      xPercent = _ref.xPercent,\n      yPercent = _ref.yPercent,\n      x = _ref.x,\n      y = _ref.y,\n      z = _ref.z,\n      rotation = _ref.rotation,\n      rotationY = _ref.rotationY,\n      rotationX = _ref.rotationX,\n      skewX = _ref.skewX,\n      skewY = _ref.skewY,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      transformPerspective = _ref.transformPerspective,\n      force3D = _ref.force3D,\n      target = _ref.target,\n      zOrigin = _ref.zOrigin,\n      transforms = \"\",\n      use3D = force3D === \"auto\" && ratio && ratio !== 1 || force3D === true; // Safari has a bug that causes it not to render 3D transform-origin values properly, so we force the z origin to 0, record it in the cache, and then do the math here to offset the translate values accordingly (basically do the 3D transform-origin part manually)\n\n\n  if (zOrigin && (rotationX !== _zeroDeg || rotationY !== _zeroDeg)) {\n    var angle = parseFloat(rotationY) * _DEG2RAD,\n        a13 = Math.sin(angle),\n        a33 = Math.cos(angle),\n        cos;\n\n    angle = parseFloat(rotationX) * _DEG2RAD;\n    cos = Math.cos(angle);\n    x = _addPxTranslate(target, x, a13 * cos * -zOrigin);\n    y = _addPxTranslate(target, y, -Math.sin(angle) * -zOrigin);\n    z = _addPxTranslate(target, z, a33 * cos * -zOrigin + zOrigin);\n  }\n\n  if (transformPerspective !== _zeroPx) {\n    transforms += \"perspective(\" + transformPerspective + _endParenthesis;\n  }\n\n  if (xPercent || yPercent) {\n    transforms += \"translate(\" + xPercent + \"%, \" + yPercent + \"%) \";\n  }\n\n  if (use3D || x !== _zeroPx || y !== _zeroPx || z !== _zeroPx) {\n    transforms += z !== _zeroPx || use3D ? \"translate3d(\" + x + \", \" + y + \", \" + z + \") \" : \"translate(\" + x + \", \" + y + _endParenthesis;\n  }\n\n  if (rotation !== _zeroDeg) {\n    transforms += \"rotate(\" + rotation + _endParenthesis;\n  }\n\n  if (rotationY !== _zeroDeg) {\n    transforms += \"rotateY(\" + rotationY + _endParenthesis;\n  }\n\n  if (rotationX !== _zeroDeg) {\n    transforms += \"rotateX(\" + rotationX + _endParenthesis;\n  }\n\n  if (skewX !== _zeroDeg || skewY !== _zeroDeg) {\n    transforms += \"skew(\" + skewX + \", \" + skewY + _endParenthesis;\n  }\n\n  if (scaleX !== 1 || scaleY !== 1) {\n    transforms += \"scale(\" + scaleX + \", \" + scaleY + _endParenthesis;\n  }\n\n  target.style[_transformProp] = transforms || \"translate(0, 0)\";\n},\n    _renderSVGTransforms = function _renderSVGTransforms(ratio, cache) {\n  var _ref2 = cache || this,\n      xPercent = _ref2.xPercent,\n      yPercent = _ref2.yPercent,\n      x = _ref2.x,\n      y = _ref2.y,\n      rotation = _ref2.rotation,\n      skewX = _ref2.skewX,\n      skewY = _ref2.skewY,\n      scaleX = _ref2.scaleX,\n      scaleY = _ref2.scaleY,\n      target = _ref2.target,\n      xOrigin = _ref2.xOrigin,\n      yOrigin = _ref2.yOrigin,\n      xOffset = _ref2.xOffset,\n      yOffset = _ref2.yOffset,\n      forceCSS = _ref2.forceCSS,\n      tx = parseFloat(x),\n      ty = parseFloat(y),\n      a11,\n      a21,\n      a12,\n      a22,\n      temp;\n\n  rotation = parseFloat(rotation);\n  skewX = parseFloat(skewX);\n  skewY = parseFloat(skewY);\n\n  if (skewY) {\n    //for performance reasons, we combine all skewing into the skewX and rotation values. Remember, a skewY of 10 degrees looks the same as a rotation of 10 degrees plus a skewX of 10 degrees.\n    skewY = parseFloat(skewY);\n    skewX += skewY;\n    rotation += skewY;\n  }\n\n  if (rotation || skewX) {\n    rotation *= _DEG2RAD;\n    skewX *= _DEG2RAD;\n    a11 = Math.cos(rotation) * scaleX;\n    a21 = Math.sin(rotation) * scaleX;\n    a12 = Math.sin(rotation - skewX) * -scaleY;\n    a22 = Math.cos(rotation - skewX) * scaleY;\n\n    if (skewX) {\n      skewY *= _DEG2RAD;\n      temp = Math.tan(skewX - skewY);\n      temp = Math.sqrt(1 + temp * temp);\n      a12 *= temp;\n      a22 *= temp;\n\n      if (skewY) {\n        temp = Math.tan(skewY);\n        temp = Math.sqrt(1 + temp * temp);\n        a11 *= temp;\n        a21 *= temp;\n      }\n    }\n\n    a11 = _round(a11);\n    a21 = _round(a21);\n    a12 = _round(a12);\n    a22 = _round(a22);\n  } else {\n    a11 = scaleX;\n    a22 = scaleY;\n    a21 = a12 = 0;\n  }\n\n  if (tx && !~(x + \"\").indexOf(\"px\") || ty && !~(y + \"\").indexOf(\"px\")) {\n    tx = _convertToUnit(target, \"x\", x, \"px\");\n    ty = _convertToUnit(target, \"y\", y, \"px\");\n  }\n\n  if (xOrigin || yOrigin || xOffset || yOffset) {\n    tx = _round(tx + xOrigin - (xOrigin * a11 + yOrigin * a12) + xOffset);\n    ty = _round(ty + yOrigin - (xOrigin * a21 + yOrigin * a22) + yOffset);\n  }\n\n  if (xPercent || yPercent) {\n    //The SVG spec doesn't support percentage-based translation in the \"transform\" attribute, so we merge it into the translation to simulate it.\n    temp = target.getBBox();\n    tx = _round(tx + xPercent / 100 * temp.width);\n    ty = _round(ty + yPercent / 100 * temp.height);\n  }\n\n  temp = \"matrix(\" + a11 + \",\" + a21 + \",\" + a12 + \",\" + a22 + \",\" + tx + \",\" + ty + \")\";\n  target.setAttribute(\"transform\", temp);\n  forceCSS && (target.style[_transformProp] = temp); //some browsers prioritize CSS transforms over the transform attribute. When we sense that the user has CSS transforms applied, we must overwrite them this way (otherwise some browser simply won't render the  transform attribute changes!)\n},\n    _addRotationalPropTween = function _addRotationalPropTween(plugin, target, property, startNum, endValue, relative) {\n  var cap = 360,\n      isString = _isString(endValue),\n      endNum = parseFloat(endValue) * (isString && ~endValue.indexOf(\"rad\") ? _RAD2DEG : 1),\n      change = relative ? endNum * relative : endNum - startNum,\n      finalValue = startNum + change + \"deg\",\n      direction,\n      pt;\n\n  if (isString) {\n    direction = endValue.split(\"_\")[1];\n\n    if (direction === \"short\") {\n      change %= cap;\n\n      if (change !== change % (cap / 2)) {\n        change += change < 0 ? cap : -cap;\n      }\n    }\n\n    if (direction === \"cw\" && change < 0) {\n      change = (change + cap * _bigNum) % cap - ~~(change / cap) * cap;\n    } else if (direction === \"ccw\" && change > 0) {\n      change = (change - cap * _bigNum) % cap - ~~(change / cap) * cap;\n    }\n  }\n\n  plugin._pt = pt = new PropTween(plugin._pt, target, property, startNum, change, _renderPropWithEnd);\n  pt.e = finalValue;\n  pt.u = \"deg\";\n\n  plugin._props.push(property);\n\n  return pt;\n},\n    _assign = function _assign(target, source) {\n  // Internet Explorer doesn't have Object.assign(), so we recreate it here.\n  for (var p in source) {\n    target[p] = source[p];\n  }\n\n  return target;\n},\n    _addRawTransformPTs = function _addRawTransformPTs(plugin, transforms, target) {\n  //for handling cases where someone passes in a whole transform string, like transform: \"scale(2, 3) rotate(20deg) translateY(30em)\"\n  var startCache = _assign({}, target._gsap),\n      exclude = \"perspective,force3D,transformOrigin,svgOrigin\",\n      style = target.style,\n      endCache,\n      p,\n      startValue,\n      endValue,\n      startNum,\n      endNum,\n      startUnit,\n      endUnit;\n\n  if (startCache.svg) {\n    startValue = target.getAttribute(\"transform\");\n    target.setAttribute(\"transform\", \"\");\n    style[_transformProp] = transforms;\n    endCache = _parseTransform(target, 1);\n\n    _removeProperty(target, _transformProp);\n\n    target.setAttribute(\"transform\", startValue);\n  } else {\n    startValue = getComputedStyle(target)[_transformProp];\n    style[_transformProp] = transforms;\n    endCache = _parseTransform(target, 1);\n    style[_transformProp] = startValue;\n  }\n\n  for (p in _transformProps) {\n    startValue = startCache[p];\n    endValue = endCache[p];\n\n    if (startValue !== endValue && exclude.indexOf(p) < 0) {\n      //tweening to no perspective gives very unintuitive results - just keep the same perspective in that case.\n      startUnit = getUnit(startValue);\n      endUnit = getUnit(endValue);\n      startNum = startUnit !== endUnit ? _convertToUnit(target, p, startValue, endUnit) : parseFloat(startValue);\n      endNum = parseFloat(endValue);\n      plugin._pt = new PropTween(plugin._pt, endCache, p, startNum, endNum - startNum, _renderCSSProp);\n      plugin._pt.u = endUnit || 0;\n\n      plugin._props.push(p);\n    }\n  }\n\n  _assign(endCache, startCache);\n}; // handle splitting apart padding, margin, borderWidth, and borderRadius into their 4 components. Firefox, for example, won't report borderRadius correctly - it will only do borderTopLeftRadius and the other corners. We also want to handle paddingTop, marginLeft, borderRightWidth, etc.\n\n\n_forEachName(\"padding,margin,Width,Radius\", function (name, index) {\n  var t = \"Top\",\n      r = \"Right\",\n      b = \"Bottom\",\n      l = \"Left\",\n      props = (index < 3 ? [t, r, b, l] : [t + l, t + r, b + r, b + l]).map(function (side) {\n    return index < 2 ? name + side : \"border\" + side + name;\n  });\n\n  _specialProps[index > 1 ? \"border\" + name : name] = function (plugin, target, property, endValue, tween) {\n    var a, vars;\n\n    if (arguments.length < 4) {\n      // getter, passed target, property, and unit (from _get())\n      a = props.map(function (prop) {\n        return _get(plugin, prop, property);\n      });\n      vars = a.join(\" \");\n      return vars.split(a[0]).length === 5 ? a[0] : vars;\n    }\n\n    a = (endValue + \"\").split(\" \");\n    vars = {};\n    props.forEach(function (prop, i) {\n      return vars[prop] = a[i] = a[i] || a[(i - 1) / 2 | 0];\n    });\n    plugin.init(target, vars, tween);\n  };\n});\n\nexport var CSSPlugin = {\n  name: \"css\",\n  register: _initCore,\n  targetTest: function targetTest(target) {\n    return target.style && target.nodeType;\n  },\n  init: function init(target, vars, tween, index, targets) {\n    var props = this._props,\n        style = target.style,\n        startAt = tween.vars.startAt,\n        startValue,\n        endValue,\n        endNum,\n        startNum,\n        type,\n        specialProp,\n        p,\n        startUnit,\n        endUnit,\n        relative,\n        isTransformRelated,\n        transformPropTween,\n        cache,\n        smooth,\n        hasPriority;\n    _pluginInitted || _initCore();\n\n    for (p in vars) {\n      if (p === \"autoRound\") {\n        continue;\n      }\n\n      endValue = vars[p];\n\n      if (_plugins[p] && _checkPlugin(p, vars, tween, index, target, targets)) {\n        // plugins\n        continue;\n      }\n\n      type = typeof endValue;\n      specialProp = _specialProps[p];\n\n      if (type === \"function\") {\n        endValue = endValue.call(tween, index, target, targets);\n        type = typeof endValue;\n      }\n\n      if (type === \"string\" && ~endValue.indexOf(\"random(\")) {\n        endValue = _replaceRandom(endValue);\n      }\n\n      if (specialProp) {\n        specialProp(this, target, p, endValue, tween) && (hasPriority = 1);\n      } else if (p.substr(0, 2) === \"--\") {\n        //CSS variable\n        startValue = (getComputedStyle(target).getPropertyValue(p) + \"\").trim();\n        endValue += \"\";\n        _colorExp.lastIndex = 0;\n\n        if (!_colorExp.test(startValue)) {\n          // colors don't have units\n          startUnit = getUnit(startValue);\n          endUnit = getUnit(endValue);\n        }\n\n        endUnit ? startUnit !== endUnit && (startValue = _convertToUnit(target, p, startValue, endUnit) + endUnit) : startUnit && (endValue += startUnit);\n        this.add(style, \"setProperty\", startValue, endValue, index, targets, 0, 0, p);\n        props.push(p);\n      } else if (type !== \"undefined\") {\n        if (startAt && p in startAt) {\n          // in case someone hard-codes a complex value as the start, like top: \"calc(2vh / 2)\". Without this, it'd use the computed value (always in px)\n          startValue = typeof startAt[p] === \"function\" ? startAt[p].call(tween, index, target, targets) : startAt[p];\n          _isString(startValue) && ~startValue.indexOf(\"random(\") && (startValue = _replaceRandom(startValue));\n          getUnit(startValue + \"\") || (startValue += _config.units[p] || getUnit(_get(target, p)) || \"\"); // for cases when someone passes in a unitless value like {x: 100}; if we try setting translate(100, 0px) it won't work.\n\n          (startValue + \"\").charAt(1) === \"=\" && (startValue = _get(target, p)); // can't work with relative values\n        } else {\n          startValue = _get(target, p);\n        }\n\n        startNum = parseFloat(startValue);\n        relative = type === \"string\" && endValue.charAt(1) === \"=\" ? +(endValue.charAt(0) + \"1\") : 0;\n        relative && (endValue = endValue.substr(2));\n        endNum = parseFloat(endValue);\n\n        if (p in _propertyAliases) {\n          if (p === \"autoAlpha\") {\n            //special case where we control the visibility along with opacity. We still allow the opacity value to pass through and get tweened.\n            if (startNum === 1 && _get(target, \"visibility\") === \"hidden\" && endNum) {\n              //if visibility is initially set to \"hidden\", we should interpret that as intent to make opacity 0 (a convenience)\n              startNum = 0;\n            }\n\n            _addNonTweeningPT(this, style, \"visibility\", startNum ? \"inherit\" : \"hidden\", endNum ? \"inherit\" : \"hidden\", !endNum);\n          }\n\n          if (p !== \"scale\" && p !== \"transform\") {\n            p = _propertyAliases[p];\n            ~p.indexOf(\",\") && (p = p.split(\",\")[0]);\n          }\n        }\n\n        isTransformRelated = p in _transformProps; //--- TRANSFORM-RELATED ---\n\n        if (isTransformRelated) {\n          if (!transformPropTween) {\n            cache = target._gsap;\n            cache.renderTransform && !vars.parseTransform || _parseTransform(target, vars.parseTransform); // if, for example, gsap.set(... {transform:\"translateX(50vw)\"}), the _get() call doesn't parse the transform, thus cache.renderTransform won't be set yet so force the parsing of the transform here.\n\n            smooth = vars.smoothOrigin !== false && cache.smooth;\n            transformPropTween = this._pt = new PropTween(this._pt, style, _transformProp, 0, 1, cache.renderTransform, cache, 0, -1); //the first time through, create the rendering PropTween so that it runs LAST (in the linked list, we keep adding to the beginning)\n\n            transformPropTween.dep = 1; //flag it as dependent so that if things get killed/overwritten and this is the only PropTween left, we can safely kill the whole tween.\n          }\n\n          if (p === \"scale\") {\n            this._pt = new PropTween(this._pt, cache, \"scaleY\", cache.scaleY, (relative ? relative * endNum : endNum - cache.scaleY) || 0);\n            props.push(\"scaleY\", p);\n            p += \"X\";\n          } else if (p === \"transformOrigin\") {\n            endValue = _convertKeywordsToPercentages(endValue); //in case something like \"left top\" or \"bottom right\" is passed in. Convert to percentages.\n\n            if (cache.svg) {\n              _applySVGOrigin(target, endValue, 0, smooth, 0, this);\n            } else {\n              endUnit = parseFloat(endValue.split(\" \")[2]) || 0; //handle the zOrigin separately!\n\n              endUnit !== cache.zOrigin && _addNonTweeningPT(this, cache, \"zOrigin\", cache.zOrigin, endUnit);\n\n              _addNonTweeningPT(this, style, p, _firstTwoOnly(startValue), _firstTwoOnly(endValue));\n            }\n\n            continue;\n          } else if (p === \"svgOrigin\") {\n            _applySVGOrigin(target, endValue, 1, smooth, 0, this);\n\n            continue;\n          } else if (p in _rotationalProperties) {\n            _addRotationalPropTween(this, cache, p, startNum, endValue, relative);\n\n            continue;\n          } else if (p === \"smoothOrigin\") {\n            _addNonTweeningPT(this, cache, \"smooth\", cache.smooth, endValue);\n\n            continue;\n          } else if (p === \"force3D\") {\n            cache[p] = endValue;\n            continue;\n          } else if (p === \"transform\") {\n            _addRawTransformPTs(this, endValue, target);\n\n            continue;\n          }\n        } else if (!(p in style)) {\n          p = _checkPropPrefix(p) || p;\n        }\n\n        if (isTransformRelated || (endNum || endNum === 0) && (startNum || startNum === 0) && !_complexExp.test(endValue) && p in style) {\n          startUnit = (startValue + \"\").substr((startNum + \"\").length);\n          endNum || (endNum = 0); // protect against NaN\n\n          endUnit = getUnit(endValue) || (p in _config.units ? _config.units[p] : startUnit);\n          startUnit !== endUnit && (startNum = _convertToUnit(target, p, startValue, endUnit));\n          this._pt = new PropTween(this._pt, isTransformRelated ? cache : style, p, startNum, relative ? relative * endNum : endNum - startNum, !isTransformRelated && (endUnit === \"px\" || p === \"zIndex\") && vars.autoRound !== false ? _renderRoundedCSSProp : _renderCSSProp);\n          this._pt.u = endUnit || 0;\n\n          if (startUnit !== endUnit && endUnit !== \"%\") {\n            //when the tween goes all the way back to the beginning, we need to revert it to the OLD/ORIGINAL value (with those units). We record that as a \"b\" (beginning) property and point to a render method that handles that. (performance optimization)\n            this._pt.b = startValue;\n            this._pt.r = _renderCSSPropWithBeginning;\n          }\n        } else if (!(p in style)) {\n          if (p in target) {\n            //maybe it's not a style - it could be a property added directly to an element in which case we'll try to animate that.\n            this.add(target, p, startValue || target[p], endValue, index, targets);\n          } else {\n            _missingPlugin(p, endValue);\n\n            continue;\n          }\n        } else {\n          _tweenComplexCSSString.call(this, target, p, startValue, endValue);\n        }\n\n        props.push(p);\n      }\n    }\n\n    hasPriority && _sortPropTweensByPriority(this);\n  },\n  get: _get,\n  aliases: _propertyAliases,\n  getSetter: function getSetter(target, property, plugin) {\n    //returns a setter function that accepts target, property, value and applies it accordingly. Remember, properties like \"x\" aren't as simple as target.style.property = value because they've got to be applied to a proxy object and then merged into a transform string in a renderer.\n    var p = _propertyAliases[property];\n    p && p.indexOf(\",\") < 0 && (property = p);\n    return property in _transformProps && property !== _transformOriginProp && (target._gsap.x || _get(target, \"x\")) ? plugin && _recentSetterPlugin === plugin ? property === \"scale\" ? _setterScale : _setterTransform : (_recentSetterPlugin = plugin || {}) && (property === \"scale\" ? _setterScaleWithRender : _setterTransformWithRender) : target.style && !_isUndefined(target.style[property]) ? _setterCSSStyle : ~property.indexOf(\"-\") ? _setterCSSProp : _getSetter(target, property);\n  },\n  core: {\n    _removeProperty: _removeProperty,\n    _getMatrix: _getMatrix\n  }\n};\ngsap.utils.checkPrefix = _checkPropPrefix;\n\n(function (positionAndScale, rotation, others, aliases) {\n  var all = _forEachName(positionAndScale + \",\" + rotation + \",\" + others, function (name) {\n    _transformProps[name] = 1;\n  });\n\n  _forEachName(rotation, function (name) {\n    _config.units[name] = \"deg\";\n    _rotationalProperties[name] = 1;\n  });\n\n  _propertyAliases[all[13]] = positionAndScale + \",\" + rotation;\n\n  _forEachName(aliases, function (name) {\n    var split = name.split(\":\");\n    _propertyAliases[split[1]] = all[split[0]];\n  });\n})(\"x,y,z,scale,scaleX,scaleY,xPercent,yPercent\", \"rotation,rotationX,rotationY,skewX,skewY\", \"transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective\", \"0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY\");\n\n_forEachName(\"x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective\", function (name) {\n  _config.units[name] = \"px\";\n});\n\ngsap.registerPlugin(CSSPlugin);\nexport { CSSPlugin as default, _getBBox, _createElement, _checkPropPrefix as checkPrefix };"]}]}